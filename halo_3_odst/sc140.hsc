; Decompiled with Blamite
; Source file: sc140.hsc
; Start time: 4/7/2022 7:37:04
; Decompilation finished in ~0.0073783s
; Remember that all script code is property of Bungie/343 Industries.
; You have no rights. Play nice.


; GLOBALS

(global short player_00 0)
(global short player_01 1)
(global short player_02 2)
(global short player_03 3)
(global string data_mine_mission_segment "")
(global short s_waypoint_index 0)
(global short s_waypoint_timer (* 30.0 10.0))
(global short g_pda_breadcrumb_fade (* 30.0 45.0))
(global short g_pda_breadcrumb_timer (* 30.0 1.5))
(global sound sfx_a_button "sound\game_sfx\ui\hud_ui\b_button")
(global sound sfx_b_button "sound\game_sfx\ui\hud_ui\a_button")
(global sound sfx_hud_in "sound\game_sfx\ui\hud_ui\hud_in")
(global sound sfx_hud_out "sound\game_sfx\ui\hud_ui\hud_out")
(global sound sfx_objective "sound\game_sfx\ui\hud_ui\mission_objective")
(global short s_sc110_01 0)
(global short s_sc110_02 0)
(global short s_sc110_03 0)
(global short s_sc110_04 0)
(global short s_sc110_05 0)
(global short s_sc110_06 0)
(global short s_sc120_01 0)
(global short s_sc120_02 0)
(global short s_sc120_03 0)
(global short s_sc120_04 0)
(global short s_sc120_05 0)
(global short s_sc120_06 0)
(global short s_sc130_01 0)
(global short s_sc130_02 0)
(global short s_sc130_03 0)
(global short s_sc130_04 0)
(global short s_sc130_05 0)
(global short s_sc130_06 0)
(global short s_sc140_01 0)
(global short s_sc140_02 0)
(global short s_sc140_03 0)
(global short s_sc140_04 0)
(global short s_sc140_05 0)
(global short s_sc140_06 0)
(global short s_sc150_01 0)
(global short s_sc150_02 0)
(global short s_sc150_03 0)
(global short s_sc150_04 0)
(global short s_sc150_05 0)
(global short s_l200_01 0)
(global short k_sur_ai_rand_limit 0)
(global short k_sur_ai_end_limit 0)
(global short k_sur_ai_final_limit 0)
(global short k_sur_squad_per_wave_limit 0)
(global short s_sur_squad_count 0)
(global boolean b_sur_squad_spawn true)
(global short k_sur_rand_wave_count 0)
(global short k_sur_rand_wave_limit 0)
(global boolean b_sur_rand_wave_spawn true)
(global short s_sq_actor_count 0)
(global boolean b_sur_wave_phantom false)
(global short k_sur_wave_per_round_limit 0)
(global short k_sur_round_per_set_limit 0)
(global short k_sur_wave_timer 0)
(global short k_sur_wave_timeout 0)
(global short k_sur_round_timer 0)
(global short k_sur_set_timer 0)
(global short k_sur_bonus_timer 0)
(global boolean b_survival_game_end_condition false)
(global ai ai_sur_wave_spawns none)
(global short s_sur_wave_squad_count 4)
(global ai ai_sur_bonus_wave none)
(global short s_sur_dropship_type 1)
(global short s_sur_dropship_crew_count 2)
(global vehicle v_sur_phantom_01 none)
(global vehicle v_sur_phantom_02 none)
(global vehicle v_sur_phantom_03 none)
(global vehicle v_sur_phantom_04 none)
(global vehicle v_sur_bonus_phantom none)
(global ai ai_sur_phantom_01 none)
(global ai ai_sur_phantom_02 none)
(global ai ai_sur_phantom_03 none)
(global ai ai_sur_phantom_04 none)
(global ai ai_sur_bonus_phantom none)
(global string s_sur_drop_side_01 "dual")
(global string s_sur_drop_side_02 "dual")
(global string s_sur_drop_side_03 "dual")
(global string s_sur_drop_side_04 "dual")
(global string s_sur_drop_side_bonus "dual")
(global boolean b_phantom_spawn true)
(global short b_phantom_spawn_count 0)
(global short k_phantom_spawn_limit 0)
(global boolean b_sur_phantoms_semi_random false)
(global short s_sur_wave_cleanup_threshold 0)
(global boolean b_sur_bonus_round false)
(global boolean b_sur_bonus_round_running false)
(global boolean b_sur_bonus_end false)
(global boolean b_sur_bonus_spawn true)
(global boolean b_sur_bonus_refilling false)
(global boolean b_sur_bonus_phantom_ready false)
(global long l_sur_pre_bonus_points 0)
(global long l_sur_post_bonus_points 0)
(global long k_sur_bonus_points_award 0)
(global short s_sur_bonus_count 0)
(global short k_sur_bonus_squad_limit 6)
(global short k_sur_bonus_limit 17)
(global boolean b_survival_bonus_timer_begin false)
(global short k_survival_bonus_timer (* 30.0 60.0 1.0))
(global boolean b_phantom_move_out false)
(global short s_survival_wave_complete_count 0)
(global short s_phantom_load_count 1)
(global boolean b_phantom_loaded false)
(global boolean b_survival_new_set true)
(global boolean b_survival_new_round true)
(global boolean b_survival_new_wave true)
(global folder folder_survival_scenery "sc_survival")
(global folder folder_survival_crates "cr_survival")
(global folder folder_survival_vehicles "v_survival")
(global folder folder_survival_equipment "eq_survival")
(global folder folder_survival_weapons "wp_survival")
(global boolean b_sur_weapon_drop false)
(global looping_sound m_survival_start "multiplayer\firefight_music\firefight_music01")
(global looping_sound m_new_set "multiplayer\firefight_music\firefight_music01")
(global looping_sound m_initial_wave "multiplayer\firefight_music\firefight_music02")
(global looping_sound m_final_wave "multiplayer\firefight_music\firefight_music20")
(global looping_sound m_pgcr "multiplayer\firefight_music\firefight_music30")
(global short s_music_initial 0)
(global short s_music_final 0)
(global string string_survival_map_name none)
(global long l_player0_score 0)
(global long l_player1_score 0)
(global long l_player2_score 0)
(global long l_player3_score 0)
(global long l_sur_round_timer 0)
(global ai ai_obj_survival none)
(global ai ai_sur_remaining none)
(global boolean g_music_sc140_01 true)
(global boolean g_music_sc140_02 false)
(global boolean g_music_sc140_03 false)
(global boolean g_music_sc140_04 true)
(global boolean g_music_sc140_05 false)
(global boolean g_music_sc140_06 true)
(global boolean g_music_sc140_07 false)
(global boolean g_music_sc140_08 true)
(global boolean g_music_sc140_09 false)
(global boolean g_music_sc140_10 true)
(global ai ai_buck none)
(global ai ai_mickey none)
(global ai ai_dutch none)
(global boolean bridge_talk true)
(global short g_set_all 4)
(global boolean editor false)
(global boolean g_play_cinematics true)
(global boolean g_player_training true)
(global boolean debug true)
(global boolean dialogue true)
(global boolean music true)
(global short g_insertion_index 0)
(global short g_intro_obj_control 0)
(global short g_1a_obj_control 0)
(global short g_1b_obj_control 0)
(global short g_bridge_obj_control 0)
(global short g_2a_obj_control 0)
(global short g_2b_obj_control 0)
(global short g_wave_control 0)
(global short wave04_rand_short 0)
(global short wave04_count_short 0)
(global short tempbanshee 0)
(global short banshee_rand_short 0)
(global short banshee_rand_wave 0)
(global short random_point_a 0)
(global short g_player_start_pitch -16)
(global boolean g_null false)
(global boolean wave04_inf00_bool false)
(global boolean wave04_inf01_bool false)
(global boolean wave04_inf02_bool false)
(global boolean wave04_inf03_bool false)
(global boolean wave04_inf04_bool false)
(global boolean wave04_inf05_bool false)
(global real g_nav_offset 0.55)
(global vehicle v_cell_1b_phantom01 none)
(global vehicle v_end_phantom01 none)
(global vehicle v_end_phantom01_5 none)
(global vehicle v_end_phantom02 none)
(global vehicle v_end_phantom02_5 none)
(global vehicle v_end_phantom03 none)
(global vehicle v_end_phantom03_5 none)
(global vehicle v_end_phantom04 none)
(global vehicle v_end_phantom04_5 none)
(global vehicle v_end_phantom05 none)
(global vehicle v_end_phantom05_5 none)
(global vehicle v_end_phantom06 none)
(global vehicle v_1a_phantom01 none)
(global vehicle v_2a_phantom01 none)
(global vehicle v_ambient_air01 none)
(global vehicle v_ambient_air02 none)
(global object obj_buck none)
(global object obj_dutch none)
(global object obj_mickey none)
(global boolean g_mob_attack false)
(global boolean wave_left false)
(global boolean wave_right false)
(global boolean wave_center false)
(global boolean wave_found false)
(global boolean phantom_01a_unload false)
(global short s_round -1)
(global boolean g_pad_attack1 true)
(global boolean g_pad_attack2 true)


; SCRIPTS

(script static void f_load_phantom (vehicle phantom, string load_side, ai load_squad_01, ai load_squad_02, ai load_squad_03, ai load_squad_04)
    (ai_place load_squad_01)
    (ai_place load_squad_02)
    (ai_place load_squad_03)
    (ai_place load_squad_04)
    (sleep 1)
    (cond
        ((= load_side "left")
            (begin
                (if debug 
                    (print "load phantom left..."))
                (ai_vehicle_enter_immediate load_squad_01 phantom phantom_p_lb)
                (ai_vehicle_enter_immediate load_squad_02 phantom phantom_p_lf)
                (ai_vehicle_enter_immediate load_squad_03 phantom phantom_p_ml_f)
                (ai_vehicle_enter_immediate load_squad_04 phantom phantom_p_ml_b)
            )
        )
        ((= load_side "right")
            (begin
                (if debug 
                    (print "load phantom right..."))
                (ai_vehicle_enter_immediate load_squad_01 phantom phantom_p_rb)
                (ai_vehicle_enter_immediate load_squad_02 phantom phantom_p_rf)
                (ai_vehicle_enter_immediate load_squad_03 phantom phantom_p_mr_f)
                (ai_vehicle_enter_immediate load_squad_04 phantom phantom_p_mr_b)
            )
        )
        ((= load_side "dual")
            (begin
                (if debug 
                    (print "load phantom dual..."))
                (ai_vehicle_enter_immediate load_squad_01 phantom phantom_p_lf)
                (ai_vehicle_enter_immediate load_squad_02 phantom phantom_p_rf)
                (ai_vehicle_enter_immediate load_squad_03 phantom phantom_p_lb)
                (ai_vehicle_enter_immediate load_squad_04 phantom phantom_p_rb)
            )
        )
        ((= load_side "chute")
            (begin
                (if debug 
                    (print "load phantom chute..."))
                (ai_vehicle_enter_immediate load_squad_01 phantom phantom_pc_a)
                (ai_vehicle_enter_immediate load_squad_02 phantom phantom_pc_b)
                (ai_vehicle_enter_immediate load_squad_03 phantom phantom_pc_c)
                (ai_vehicle_enter_immediate load_squad_04 phantom phantom_pc_d)
            )
        )
    )
)

(script static void f_load_phantom_cargo (vehicle phantom, string load_number, ai load_squad_01, ai load_squad_02)
    (cond
        ((= load_number "single")
            (begin
                (ai_place load_squad_01)
                (sleep 1)
                (vehicle_load_magic phantom phantom_lc (ai_vehicle_get_from_squad load_squad_01 0))
            )
        )
        ((= load_number "double")
            (begin
                (ai_place load_squad_01)
                (ai_place load_squad_02)
                (sleep 1)
                (vehicle_load_magic phantom phantom_sc01 (ai_vehicle_get_from_squad load_squad_01 0))
                (vehicle_load_magic phantom phantom_sc02 (ai_vehicle_get_from_squad load_squad_02 0))
            )
        )
    )
)

(script static void f_unload_phantom (vehicle phantom, string drop_side)
    (cond
        ((= drop_side "left")
            (begin
                (f_unload_ph_left phantom)
                (sleep 45)
                (f_unload_ph_mid_left phantom)
                (sleep 75)
            )
        )
        ((= drop_side "right")
            (begin
                (f_unload_ph_right phantom)
                (sleep 45)
                (f_unload_ph_mid_right phantom)
                (sleep 75)
            )
        )
        ((= drop_side "dual")
            (begin
                (f_unload_ph_left phantom)
                (f_unload_ph_right phantom)
                (sleep 75)
            )
        )
        ((= drop_side "chute")
            (begin
                (f_unload_ph_chute phantom)
                (sleep 75)
            )
        )
    )
)

(script static void f_unload_ph_left (vehicle phantom)
    (begin_random
        (begin
            (vehicle_unload phantom phantom_p_lf)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload phantom phantom_p_lb)
            (sleep (random_range 0 10))
        )
    )
)

(script static void f_unload_ph_right (vehicle phantom)
    (begin_random
        (begin
            (vehicle_unload phantom phantom_p_rf)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload phantom phantom_p_rb)
            (sleep (random_range 0 10))
        )
    )
)

(script static void f_unload_ph_mid_left (vehicle phantom)
    (begin_random
        (begin
            (vehicle_unload phantom phantom_p_ml_f)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload phantom phantom_p_ml_b)
            (sleep (random_range 0 10))
        )
    )
)

(script static void f_unload_ph_mid_right (vehicle phantom)
    (begin_random
        (begin
            (vehicle_unload phantom phantom_p_mr_f)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload phantom phantom_p_mr_b)
            (sleep (random_range 0 10))
        )
    )
)

(script static void f_unload_ph_chute (vehicle phantom)
    (object_set_phantom_power phantom true)
    (if (vehicle_test_seat phantom phantom_pc_a) 
        (begin
            (vehicle_unload phantom phantom_pc_a)
            (sleep 120)
        )
    )
    (if (vehicle_test_seat phantom phantom_pc_b) 
        (begin
            (vehicle_unload phantom phantom_pc_b)
            (sleep 120)
        )
    )
    (if (vehicle_test_seat phantom phantom_pc_c) 
        (begin
            (vehicle_unload phantom phantom_pc_c)
            (sleep 120)
        )
    )
    (if (vehicle_test_seat phantom phantom_pc_d) 
        (begin
            (vehicle_unload phantom phantom_pc_d)
            (sleep 120)
        )
    )
    (object_set_phantom_power phantom false)
)

(script static void f_unload_phantom_cargo (vehicle phantom, string load_number)
    (cond
        ((= load_number "single")
            (vehicle_unload phantom phantom_lc)
        )
        ((= load_number "double")
            (begin_random
                (begin
                    (vehicle_unload phantom phantom_sc01)
                    (sleep (random_range 15 30))
                )
                (begin
                    (vehicle_unload phantom phantom_sc02)
                    (sleep (random_range 15 30))
                )
            )
        )
    )
)

(script static unit player0
    (player_get 0)
)

(script static unit player1
    (player_get 1)
)

(script static unit player2
    (player_get 2)
)

(script static unit player3
    (player_get 3)
)

(script static short player_count
    (list_count (players))
)

(script static void print_difficulty
    (cond
        ((= (game_difficulty_get_real) easy)
            (print "easy")
        )
        ((= (game_difficulty_get_real) normal)
            (print "normal")
        )
        ((= (game_difficulty_get_real) heroic)
            (print "heroic")
        )
        ((= (game_difficulty_get_real) legendary)
            (print "legendary")
        )
    )
)

(script static boolean difficulty_legendary
    (= (game_difficulty_get_real) legendary)
)

(script static boolean difficulty_heroic
    (= (game_difficulty_get_real) heroic)
)

(script static boolean difficulty_normal
    (<= (game_difficulty_get_real) normal)
)

(script static void replenish_players
    (if debug 
        (print "replenish player health..."))
    (unit_set_current_vitality (player0) 80.0 80.0)
    (unit_set_current_vitality (player1) 80.0 80.0)
    (unit_set_current_vitality (player2) 80.0 80.0)
    (unit_set_current_vitality (player3) 80.0 80.0)
)

(script static boolean coop_players_2
    (>= (game_coop_player_count) 2)
)

(script static boolean coop_players_3
    (>= (game_coop_player_count) 3)
)

(script static boolean coop_players_4
    (>= (game_coop_player_count) 4)
)

(script dormant void player0_award_tourist
    (f_award_tourist player_00)
)

(script dormant void player1_award_tourist
    (f_award_tourist player_01)
)

(script dormant void player2_award_tourist
    (f_award_tourist player_02)
)

(script dormant void player3_award_tourist
    (f_award_tourist player_03)
)

(script static void f_award_tourist (short player_short)
    (sleep_until (pda_is_active_deterministic (player_get player_short)) 45)
    (sleep 30)
    (achievement_grant_to_player (player_get player_short) "_achievement_tourist")
)

(script static void f_sleep_until_activate_waypoint (short player_short)
    (sleep 3)
    (unit_action_test_reset (player_get player_short))
    (sleep 3)
    (sleep_until 
        (and
            (> (object_get_health (player_get player_short)) 0.0)
            (unit_action_test_waypoint_activate (player_get player_short))
        ) 
    1)
    (f_sfx_a_button player_short)
    (sleep 3)
)

(script static void f_sleep_deactivate_waypoint (short player_short)
    (sleep 3)
    (unit_action_test_reset (player_get player_short))
    (sleep 3)
    (sleep_until 
        (or
            (<= (unit_get_health (player_get player_short)) 0.0)
            (unit_action_test_waypoint_activate (player_get player_short))
        ) 
    1 s_waypoint_timer)
    (if (unit_action_test_waypoint_activate (player_get player_short)) 
        (begin
            (f_sfx_a_button player_short)
        )
    )
    (sleep 3)
)

(script static void f_waypoint_message (short player_short, cutscene_flag waypoint_01, cutscene_title display_title, cutscene_title blank_title)
    (unit_action_test_reset (player_get player_short))
    (if (not (pda_is_active_deterministic (player_get player_short))) 
        (begin
            (chud_show_cinematic_title (player_get player_short) display_title)
            (sleep 15)
            (f_sleep_deactivate_waypoint player_short)
            (chud_show_cinematic_title (player_get player_short) blank_title)
        ) (sleep 5))
)

(script static void f_waypoint_activate_1 (short player_short, cutscene_flag waypoint_01)
    (unit_action_test_reset (player_get player_short))
    (if (not (pda_is_active_deterministic (player_get player_short))) 
        (chud_show_navpoint (player_get player_short) waypoint_01 0.55 true))
    (sleep 15)
    (f_sleep_deactivate_waypoint player_short)
    (chud_show_navpoint (player_get player_short) waypoint_01 0.0 false)
)

(script static void f_waypoint_activate_2 (short player_short, cutscene_flag waypoint_01, cutscene_flag waypoint_02)
    (unit_action_test_reset (player_get player_short))
    (if (not (pda_is_active_deterministic (player_get player_short))) 
        (begin
            (chud_show_navpoint (player_get player_short) waypoint_01 0.55 true)
            (chud_show_navpoint (player_get player_short) waypoint_02 0.55 true)
        )
    )
    (sleep 15)
    (f_sleep_deactivate_waypoint player_short)
    (chud_show_navpoint (player_get player_short) waypoint_01 0.0 false)
    (chud_show_navpoint (player_get player_short) waypoint_02 0.0 false)
)

(script static void f_waypoint_activate_3 (short player_short, cutscene_flag waypoint_01, cutscene_flag waypoint_02, cutscene_flag waypoint_03)
    (unit_action_test_reset (player_get player_short))
    (if (not (pda_is_active_deterministic (player_get player_short))) 
        (begin
            (chud_show_navpoint (player_get player_short) waypoint_01 0.55 true)
            (chud_show_navpoint (player_get player_short) waypoint_02 0.55 true)
            (chud_show_navpoint (player_get player_short) waypoint_03 0.55 true)
        )
    )
    (sleep 15)
    (f_sleep_deactivate_waypoint player_short)
    (chud_show_navpoint (player_get player_short) waypoint_01 0.0 false)
    (chud_show_navpoint (player_get player_short) waypoint_02 0.0 false)
    (chud_show_navpoint (player_get player_short) waypoint_03 0.0 false)
)

(script static void f_waypoint_activate_4 (short player_short, cutscene_flag waypoint_01, cutscene_flag waypoint_02, cutscene_flag waypoint_03, cutscene_flag waypoint_04)
    (unit_action_test_reset (player_get player_short))
    (if (not (pda_is_active_deterministic (player_get player_short))) 
        (begin
            (chud_show_navpoint (player_get player_short) waypoint_01 0.55 true)
            (chud_show_navpoint (player_get player_short) waypoint_02 0.55 true)
            (chud_show_navpoint (player_get player_short) waypoint_03 0.55 true)
            (chud_show_navpoint (player_get player_short) waypoint_04 0.55 true)
        )
    )
    (sleep 15)
    (f_sleep_deactivate_waypoint player_short)
    (chud_show_navpoint (player_get player_short) waypoint_01 0.0 false)
    (chud_show_navpoint (player_get player_short) waypoint_02 0.0 false)
    (chud_show_navpoint (player_get player_short) waypoint_03 0.0 false)
    (chud_show_navpoint (player_get player_short) waypoint_04 0.0 false)
)

(script static void f_coop_resume_unlocked (cutscene_title resume_title, short insertion_point)
    (if (not (is_ace_build)) 
        (begin
            (if (game_is_cooperative) 
                (begin
                    (sound_impulse_start sfx_hud_in none 1.0)
                    (cinematic_set_chud_objective resume_title)
                    (game_insertion_point_unlock insertion_point)
                )
            )
        )
    )
)

(script static void f_new_intel (cutscene_title new_intel, cutscene_title intel_chapter, long objective_number, cutscene_flag minimap_flag)
    (sound_impulse_start sfx_objective none 1.0)
    (chud_display_pda_objectives_message "pda_activate_intel" 0)
    (cinematic_set_chud_objective new_intel)
    (objectives_show objective_number)
    (sleep 60)
    (sound_impulse_start sfx_hud_in none 1.0)
    (cinematic_set_chud_objective intel_chapter)
    (sleep (* 30.0 3.0))
    (sound_impulse_start sfx_hud_out none 1.0)
    (chud_display_pda_minimap_message "" minimap_flag)
)

(script static boolean cinematic_skip_start
    (cinematic_skip_start_internal)
    (game_save_cinematic_skip)
    (sleep_until (not (game_saving)) 1)
    (not (game_reverted))
)

(script static void cinematic_skip_stop
    (cinematic_skip_stop_internal)
    (if (not (game_reverted)) 
        (game_revert))
)

(script static void cinematic_skip_stop_terminal
    (cinematic_skip_stop_internal)
    (if (not (game_reverted)) 
        (begin
            (game_revert)
            (if debug 
                (print "sleeping forever..."))
            (sleep_forever)
        )
    )
)

(script static void cinematic_snap_to_black
    (fade_out 0.0 0.0 0.0 0)
    (cinematic_preparation)
)

(script static void cinematic_snap_to_white
    (fade_out 1.0 1.0 1.0 0)
    (cinematic_preparation)
)

(script static void cinematic_preparation
    (ai_disregard (players) true)
    (object_cannot_take_damage (players))
    (player_control_fade_out_all_input 0.0)
    (object_hide (player0) true)
    (object_hide (player1) true)
    (object_hide (player2) true)
    (object_hide (player3) true)
    (unit_enable_vision_mode (player0) false)
    (unit_enable_vision_mode (player1) false)
    (unit_enable_vision_mode (player2) false)
    (unit_enable_vision_mode (player3) false)
    (player_close_pda (player0))
    (player_close_pda (player1))
    (player_close_pda (player2))
    (player_close_pda (player3))
    (replenish_players)
    (pda_stop_arg_sound (player0))
    (pda_stop_arg_sound (player1))
    (pda_stop_arg_sound (player2))
    (pda_stop_arg_sound (player3))
    (chud_cinematic_fade 0.0 0.0)
    (chud_show_messages false)
    (campaign_metagame_time_pause true)
    (player_enable_input false)
    (player_disable_movement false)
    (sleep 1)
    (cinematic_start)
    (camera_control true)
)

(script static void cinematic_snap_from_black
    (cinematic_snap_from_pre)
    (sleep 5)
    (fade_in 0.0 0.0 0.0 5)
    (cinematic_snap_from_post)
)

(script static void cinematic_snap_from_white
    (cinematic_snap_from_pre)
    (sleep 5)
    (fade_in 1.0 1.0 1.0 5)
    (cinematic_snap_from_post)
)

(script static void cinematic_snap_from_pre
    (cinematic_stop)
    (camera_control false)
    (cinematic_show_letterbox_immediate false)
    (cinematic_hud_off)
    (sleep 1)
    (chud_cinematic_fade 1.0 0.0)
    (object_hide (player0) false)
    (object_hide (player1) false)
    (object_hide (player2) false)
    (object_hide (player3) false)
)

(script static void cinematic_snap_from_post
    (unit_enable_vision_mode (player0) true)
    (unit_enable_vision_mode (player1) true)
    (unit_enable_vision_mode (player2) true)
    (unit_enable_vision_mode (player3) true)
    (player_enable_input true)
    (player_control_fade_in_all_input 1.0)
    (campaign_metagame_time_pause false)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
    (player_disable_movement false)
    (chud_show_messages true)
    (if (not (campaign_survival_enabled)) 
        (game_save))
)

(script static void cinematic_fade_to_black
    (ai_disregard (players) true)
    (object_cannot_take_damage (players))
    (player_control_fade_out_all_input 1.0)
    (campaign_metagame_time_pause true)
    (sleep 10)
    (chud_cinematic_fade 0.0 0.5)
    (cinematic_show_letterbox true)
    (sleep 5)
    (fade_out 0.0 0.0 0.0 30)
    (sleep 30)
    (object_hide (player0) true)
    (object_hide (player1) true)
    (object_hide (player2) true)
    (object_hide (player3) true)
    (unit_enable_vision_mode (player0) false)
    (unit_enable_vision_mode (player1) false)
    (unit_enable_vision_mode (player2) false)
    (unit_enable_vision_mode (player3) false)
    (player_close_pda (player0))
    (player_close_pda (player1))
    (player_close_pda (player2))
    (player_close_pda (player3))
    (cinematic_start)
    (camera_control true)
    (player_enable_input false)
    (player_disable_movement false)
    (sleep 1)
    (cinematic_show_letterbox_immediate true)
)

(script static void cinematic_fade_to_gameplay
    (cinematic_stop)
    (camera_control false)
    (cinematic_show_letterbox_immediate true)
    (object_hide (player0) false)
    (object_hide (player1) false)
    (object_hide (player2) false)
    (object_hide (player3) false)
    (player_control_unlock_gaze (player0))
    (player_control_unlock_gaze (player1))
    (player_control_unlock_gaze (player2))
    (player_control_unlock_gaze (player3))
    (sleep 1)
    (sleep 1)
    (fade_in 0.0 0.0 0.0 15)
    (sleep 15)
    (cinematic_show_letterbox false)
    (sleep 15)
    (chud_cinematic_fade 1.0 1.0)
    (unit_raise_weapon (player0) 30)
    (unit_raise_weapon (player1) 30)
    (unit_raise_weapon (player2) 30)
    (unit_raise_weapon (player3) 30)
    (sleep 10)
    (player_enable_input true)
    (player_control_fade_in_all_input 1.0)
    (campaign_metagame_time_pause false)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
    (player_disable_movement false)
)

(script static void cinematic_hud_on
    (chud_cinematic_fade 1.0 0.0)
    (chud_show_compass false)
    (chud_show_crosshair false)
)

(script static void cinematic_hud_off
    (chud_cinematic_fade 0.0 0.0)
    (chud_show_compass true)
    (chud_show_crosshair true)
)

(script dormant void pda_breadcrumbs
    (pda_set_footprint_dead_zone 5.0)
    (sleep_until 
        (begin
            (player_add_footprint (player0) g_pda_breadcrumb_fade)
            (player_add_footprint (player1) g_pda_breadcrumb_fade)
            (player_add_footprint (player2) g_pda_breadcrumb_fade)
            (player_add_footprint (player3) g_pda_breadcrumb_fade)
            false
        ) 
    g_pda_breadcrumb_timer)
)

(script static void end_mission
    (if global_playtest_mode 
        (begin
            (data_mine_set_mission_segment "questionaire")
            (cinematic_fade_to_gameplay)
            (sleep 1)
            (print "end mission!")
            (sleep 15)
            (hud_show_training_text true)
            (sleep 90)
            (player_action_test_reset)
            (sleep_until 
                (begin
                    (sleep_until (player_action_test_accept) 1 90)
                    (player_action_test_accept)
                ) 
            1)
            (hud_show_training_text false)
            (print "loading next mission...")
            (sleep 15)
        ) (begin
            (fade_out 0.0 0.0 0.0 0)
            (cinematic_stop)
            (camera_control false)
        )
    )
    (game_won)
)

(script static void f_end_scene (script cinematic_outro, zone_set cinematic_zone_set, string_id scene_boolean, string_id scene_name, string snap_color)
    (cond
        ((= snap_color "black")
            (cinematic_snap_to_black)
        )
        ((= snap_color "white")
            (cinematic_snap_to_white)
        )
    )
    (sleep 1)
    (game_award_level_complete_achievements)
    (game_level_prepare scene_name)
    (ai_erase_all)
    (switch_zone_set cinematic_zone_set)
    (sound_suppress_ambience_update_on_revert)
    (sleep 1)
    (if (= g_play_cinematics true) 
        (begin
            (if (cinematic_skip_start) 
                (begin
                    (if debug 
                        (print "play outro cinematic..."))
                    (cinematic_show_letterbox true)
                    (sleep 30)
                    (evaluate cinematic_outro)
                    (sound_class_set_gain "" 0.0 0)
                )
            )
            (cinematic_skip_stop_internal)
        )
    )
    (sound_class_set_gain "" 0.0 0)
    (sound_class_set_gain "ui" 1.0 0)
    (cinematic_snap_to_black)
    (gp_boolean_set scene_boolean true)
    (gp_boolean_set "gp_l100_complete" true)
    (if debug 
        (print "switch to scene..."))
    (game_level_advance scene_name)
)

(script startup void beginning_mission_segment
    (data_mine_set_mission_segment "mission_start")
)

(script static void f_sfx_a_button (short player_short)
    (sound_impulse_start sfx_a_button (player_get player_short) 1.0)
)

(script static void f_sfx_b_button (short player_short)
    (sound_impulse_start sfx_b_button (player_get player_short) 1.0)
)

(script static void f_sfx_hud_in (short player_short)
    (sound_impulse_start sfx_hud_in (player_get player_short) 1.0)
)

(script static void f_sfx_hud_out (short player_short)
    (sound_impulse_start sfx_hud_out (player_get player_short) 1.0)
)

(script static void f_display_message (short player_short, cutscene_title display_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
)

(script static void f_display_message_accept (short player_short, cutscene_title display_title, cutscene_title blank_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (unit_confirm_message (player_get player_short))
    (sleep_until (unit_action_test_accept (player_get player_short)) 1)
    (f_sfx_a_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void f_display_message_cancel (short player_short, cutscene_title display_title, cutscene_title blank_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (unit_confirm_cancel_message (player_get player_short))
    (sleep_until (unit_action_test_cancel (player_get player_short)) 1)
    (f_sfx_a_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void f_display_message_confirm (short player_short, cutscene_title display_title, cutscene_title blank_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (unit_confirm_message (player_get player_short))
    (unit_confirm_cancel_message (player_get player_short))
    (sleep_until 
        (or
            (unit_action_test_accept (player_get player_short))
            (unit_action_test_cancel (player_get player_short))
        ) 
    1)
    (cond
        ((unit_action_test_accept (player_get player_short))
            (f_sfx_a_button player_short)
        )
        ((unit_action_test_cancel (player_get player_short))
            (f_sfx_b_button player_short)
        )
    )
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void f_display_repeat_training (short player_short, cutscene_title display_title, cutscene_title blank_title, trigger_volume volume_01, trigger_volume volume_02)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (unit_confirm_retrain_message (player_get player_short))
    (unit_confirm_cancel_message (player_get player_short))
    (sleep_until 
        (or
            (unit_action_test_retrain (player_get player_short))
            (unit_action_test_cancel (player_get player_short))
            (and
                (not (volume_test_object volume_01 (player_get player_short)))
                (not (volume_test_object volume_02 (player_get player_short)))
            )
        ) 
    1)
    (if 
        (or
            (volume_test_object volume_01 (player_get player_short))
            (volume_test_object volume_02 (player_get player_short))
        ) 
            (begin
                (cond
                    ((unit_action_test_retrain (player_get player_short))
                        (f_sfx_a_button player_short)
                    )
                    ((unit_action_test_cancel (player_get player_short))
                        (f_sfx_b_button player_short)
                    )
                )
                (chud_show_cinematic_title (player_get player_short) blank_title)
                (sleep 5)
            )
    )
)

(script static void f_display_message_vision (short player_short, cutscene_title display_title, cutscene_title blank_title, trigger_volume volume_01, trigger_volume volume_02)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until 
        (or
            (unit_action_test_vision_trigger (player_get player_short))
            (and
                (not (volume_test_object volume_01 (player_get player_short)))
                (not (volume_test_object volume_02 (player_get player_short)))
            )
        ) 
    1)
    (if 
        (or
            (volume_test_object volume_01 (player_get player_short))
            (volume_test_object volume_02 (player_get player_short))
        ) 
            (begin
                (f_sfx_a_button player_short)
                (chud_show_cinematic_title (player_get player_short) blank_title)
                (sleep 5)
            )
    )
)

(script static void f_display_message_accept_volume (short player_short, cutscene_title display_title, cutscene_title blank_title, trigger_volume volume_01, trigger_volume volume_02)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (unit_confirm_message (player_get player_short))
    (sleep_until 
        (or
            (unit_action_test_accept (player_get player_short))
            (and
                (not (volume_test_object volume_01 (player_get player_short)))
                (not (volume_test_object volume_02 (player_get player_short)))
            )
        ) 
    1)
    (if 
        (or
            (volume_test_object volume_01 (player_get player_short))
            (volume_test_object volume_02 (player_get player_short))
        ) 
            (begin
                (f_sfx_a_button player_short)
                (chud_show_cinematic_title (player_get player_short) blank_title)
                (sleep 5)
            )
    )
)

(script static void f_display_message_a (short player_short, cutscene_title display_title, cutscene_title blank_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_accept (player_get player_short)) 1)
    (f_sfx_a_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void f_display_message_b (short player_short, cutscene_title display_title, cutscene_title blank_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_cancel (player_get player_short)) 1)
    (f_sfx_a_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void f_display_message_x (short player_short, cutscene_title display_title, cutscene_title blank_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_x (player_get player_short)) 1)
    (f_sfx_a_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void f_display_message_y (short player_short, cutscene_title display_title, cutscene_title blank_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_y (player_get player_short)) 1)
    (f_sfx_a_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void f_display_message_back (short player_short, cutscene_title display_title, cutscene_title blank_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_back (player_get player_short)) 1)
    (f_sfx_a_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void f_display_message_back_b (short player_short, cutscene_title display_title, cutscene_title blank_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until 
        (or
            (unit_action_test_back (player_get player_short))
            (unit_action_test_cancel (player_get player_short))
        ) 
    1)
    (f_sfx_a_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void f_display_message_left_bumper (short player_short, cutscene_title display_title, cutscene_title blank_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_left_shoulder (player_get player_short)) 1)
    (f_sfx_a_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void f_display_message_right_bumper (short player_short, cutscene_title display_title, cutscene_title blank_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_right_shoulder (player_get player_short)) 1)
    (f_sfx_a_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void f_display_message_bumpers (short player_short, cutscene_title display_title, cutscene_title blank_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until 
        (or
            (unit_action_test_left_shoulder (player_get player_short))
            (unit_action_test_right_shoulder (player_get player_short))
        ) 
    1)
    (f_sfx_a_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void f_display_message_rotate_gren (short player_short, cutscene_title display_title, cutscene_title blank_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_rotate_grenades (player_get player_short)) 1)
    (f_sfx_a_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void f_display_message_action (short player_short, cutscene_title display_title, cutscene_title blank_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_action (player_get player_short)) 1)
    (f_sfx_a_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void f_display_message_dpad_up (short player_short, cutscene_title display_title, cutscene_title blank_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_dpad_up (player_get player_short)) 1)
    (f_sfx_a_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void f_display_message_dpad_up_down (short player_short, cutscene_title display_title, cutscene_title blank_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until 
        (or
            (unit_action_test_dpad_up (player_get player_short))
            (unit_action_test_dpad_down (player_get player_short))
        ) 
    1)
    (f_sfx_a_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void f_display_message_move_stick (short player_short, cutscene_title display_title, cutscene_title blank_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_move_relative_all_directions (player_get player_short)) 1)
    (f_sfx_a_button player_short)
    (sleep 150)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void f_display_message_look_stick (short player_short, cutscene_title display_title, cutscene_title blank_title)
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until 
        (or
            (unit_action_test_look_relative_up (player_get player_short))
            (unit_action_test_look_relative_down (player_get player_short))
            (unit_action_test_look_relative_left (player_get player_short))
            (unit_action_test_look_relative_right (player_get player_short))
        ) 
    1)
    (f_sfx_a_button player_short)
    (sleep 150)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static short h100_arg_completed_short
    (h100_reset_arg_shorts)
    (sleep 1)
    (h100_set_arg_shorts)
    (sleep 1)
    (+ s_sc110_01 s_sc110_02 s_sc110_03 s_sc110_04 s_sc110_05 s_sc110_06 s_sc120_01 s_sc120_02 s_sc120_03 s_sc120_04 s_sc120_05 s_sc120_06 s_sc130_01 s_sc130_02 s_sc130_03 s_sc130_04 s_sc130_05 s_sc130_06 s_sc140_01 s_sc140_02 s_sc140_03 s_sc140_04 s_sc140_05 s_sc140_06 s_sc150_01 s_sc150_02 s_sc150_03 s_sc150_04 s_sc150_05 s_l200_01)
)

(script static void h100_set_arg_shorts
    (if (gp_boolean_get "gp_sc110_terminal_01_complete") 
        (set s_sc110_01 1))
    (if (gp_boolean_get "gp_sc110_terminal_02_complete") 
        (set s_sc110_02 1))
    (if (gp_boolean_get "gp_sc110_terminal_03_complete") 
        (set s_sc110_03 1))
    (if (gp_boolean_get "gp_sc110_terminal_04_complete") 
        (set s_sc110_04 1))
    (if (gp_boolean_get "gp_sc110_terminal_05_complete") 
        (set s_sc110_05 1))
    (if (gp_boolean_get "gp_sc110_terminal_06_complete") 
        (set s_sc110_06 1))
    (if (gp_boolean_get "gp_sc120_terminal_01_complete") 
        (set s_sc120_01 1))
    (if (gp_boolean_get "gp_sc120_terminal_02_complete") 
        (set s_sc120_02 1))
    (if (gp_boolean_get "gp_sc120_terminal_03_complete") 
        (set s_sc120_03 1))
    (if (gp_boolean_get "gp_sc120_terminal_04_complete") 
        (set s_sc120_04 1))
    (if (gp_boolean_get "gp_sc120_terminal_05_complete") 
        (set s_sc120_05 1))
    (if (gp_boolean_get "gp_sc120_terminal_06_complete") 
        (set s_sc120_06 1))
    (if (gp_boolean_get "gp_sc130_terminal_01_complete") 
        (set s_sc130_01 1))
    (if (gp_boolean_get "gp_sc130_terminal_02_complete") 
        (set s_sc130_02 1))
    (if (gp_boolean_get "gp_sc130_terminal_03_complete") 
        (set s_sc130_03 1))
    (if (gp_boolean_get "gp_sc130_terminal_04_complete") 
        (set s_sc130_04 1))
    (if (gp_boolean_get "gp_sc130_terminal_05_complete") 
        (set s_sc130_05 1))
    (if (gp_boolean_get "gp_sc130_terminal_06_complete") 
        (set s_sc130_06 1))
    (if (gp_boolean_get "gp_sc140_terminal_01_complete") 
        (set s_sc140_01 1))
    (if (gp_boolean_get "gp_sc140_terminal_02_complete") 
        (set s_sc140_02 1))
    (if (gp_boolean_get "gp_sc140_terminal_03_complete") 
        (set s_sc140_03 1))
    (if (gp_boolean_get "gp_sc140_terminal_04_complete") 
        (set s_sc140_04 1))
    (if (gp_boolean_get "gp_sc140_terminal_05_complete") 
        (set s_sc140_05 1))
    (if (gp_boolean_get "gp_sc140_terminal_06_complete") 
        (set s_sc140_06 1))
    (if (gp_boolean_get "gp_sc150_terminal_01_complete") 
        (set s_sc150_01 1))
    (if (gp_boolean_get "gp_sc150_terminal_02_complete") 
        (set s_sc150_02 1))
    (if (gp_boolean_get "gp_sc150_terminal_03_complete") 
        (set s_sc150_03 1))
    (if (gp_boolean_get "gp_sc150_terminal_04_complete") 
        (set s_sc150_04 1))
    (if (gp_boolean_get "gp_sc150_terminal_05_complete") 
        (set s_sc150_05 1))
    (if (gp_boolean_get "gp_l200_terminal_01_complete") 
        (set s_l200_01 1))
)

(script static void h100_reset_arg_shorts
    (set s_sc110_01 0)
    (set s_sc110_02 0)
    (set s_sc110_03 0)
    (set s_sc110_04 0)
    (set s_sc110_05 0)
    (set s_sc110_06 0)
    (set s_sc120_01 0)
    (set s_sc120_02 0)
    (set s_sc120_03 0)
    (set s_sc120_04 0)
    (set s_sc120_05 0)
    (set s_sc120_06 0)
    (set s_sc130_01 0)
    (set s_sc130_02 0)
    (set s_sc130_03 0)
    (set s_sc130_04 0)
    (set s_sc130_05 0)
    (set s_sc130_06 0)
    (set s_sc140_01 0)
    (set s_sc140_02 0)
    (set s_sc140_03 0)
    (set s_sc140_04 0)
    (set s_sc140_05 0)
    (set s_sc140_06 0)
    (set s_sc150_01 0)
    (set s_sc150_02 0)
    (set s_sc150_03 0)
    (set s_sc150_04 0)
    (set s_sc150_05 0)
    (set s_l200_01 0)
)

(script static boolean survival_you_are_a_man
    true
)

(script static void survival_squad_limit
    (set k_sur_squad_per_wave_limit 6)
    (set k_phantom_spawn_limit 2)
)

(script static void survival_wave_limit
    (survival_mode_set_waves_per_round 5)
    (set k_sur_wave_per_round_limit 5)
)

(script static void survival_round_limit
    (survival_mode_set_rounds_per_set 3)
    (set k_sur_round_per_set_limit 3)
)

(script static void survival_ai_limit
    (cond
        ((difficulty_legendary)
            (begin
                (set k_sur_ai_rand_limit 6)
                (set k_sur_ai_final_limit 4)
                (set k_sur_ai_end_limit 0)
            )
        )
        ((difficulty_heroic)
            (begin
                (set k_sur_ai_rand_limit 4)
                (set k_sur_ai_final_limit 3)
                (set k_sur_ai_end_limit 0)
            )
        )
        (true
            (begin
                (set k_sur_ai_rand_limit 4)
                (set k_sur_ai_final_limit 2)
                (set k_sur_ai_end_limit 0)
            )
        )
    )
)

(script static void survival_ai_timeout
    (cond
        ((difficulty_legendary)
            (set k_sur_wave_timeout (* 30.0 300.0))
        )
        ((difficulty_heroic)
            (set k_sur_wave_timeout (* 30.0 180.0))
        )
        (true
            (set k_sur_wave_timeout (* 30.0 120.0))
        )
    )
)

(script static void survival_wave_timer
    (cond
        ((difficulty_legendary)
            (set k_sur_wave_timer (* 30.0 3.0))
        )
        ((difficulty_heroic)
            (set k_sur_wave_timer (* 30.0 6.0))
        )
        (true
            (set k_sur_wave_timer (* 30.0 9.0))
        )
    )
)

(script static void survival_round_timer
    (cond
        ((difficulty_legendary)
            (set k_sur_round_timer (* 30.0 5.0))
        )
        ((difficulty_heroic)
            (set k_sur_round_timer (* 30.0 10.0))
        )
        (true
            (set k_sur_round_timer (* 30.0 15.0))
        )
    )
)

(script static void survival_set_timer
    (cond
        ((difficulty_legendary)
            (set k_sur_set_timer (* 30.0 10.0))
        )
        ((difficulty_heroic)
            (set k_sur_set_timer (* 30.0 20.0))
        )
        (true
            (set k_sur_set_timer (* 30.0 30.0))
        )
    )
)

(script static void survival_bonus_wait_timer
    (cond
        ((difficulty_legendary)
            (set k_sur_bonus_timer (* 30.0 5.0))
        )
        ((difficulty_heroic)
            (set k_sur_bonus_timer (* 30.0 10.0))
        )
        (true
            (set k_sur_bonus_timer (* 30.0 15.0))
        )
    )
)

(script static void survival_lives
    (if (< (survival_mode_get_shared_team_life_count) 0) 
        (survival_mode_lives_set -1) (survival_mode_lives_set (survival_mode_get_shared_team_life_count)))
)

(script static void survival_add_lives
    (survival_mode_award_hero_medal)
    (sleep 1)
    (survival_mode_respawn_dead_players)
    (sleep 1)
    (if 
        (and
            (>= (survival_mode_lives_get) 0)
            (< (survival_mode_lives_get) (survival_mode_max_lives))
        ) 
            (begin
                (survival_mode_add_human_lives (game_coop_player_count))
                (survival_mode_event_new "survival_awarded_lives")
            )
    )
)

(script static void survival_mode_add_human_lives (short lives)
    (if (not b_survival_game_end_condition) 
        (if (> (survival_mode_max_lives) 0) 
            (survival_mode_lives_set (max (min (survival_mode_max_lives) (+ (survival_mode_lives_get) lives)) (survival_mode_lives_get))))
    )
)

(script static void survival_award_bonus_lives
    (if 
        (and
            (>= (survival_mode_lives_get) 0)
            (< (survival_mode_lives_get) (survival_mode_max_lives))
        ) 
            (begin
                (survival_mode_event_new "survival_bonus_lives_awarded")
                (survival_mode_add_human_lives (game_coop_player_count))
            )
    )
)

(script static void survival_set_multiplier
    (cond
        ((>= (survival_mode_set_get) 8)
            (survival_mode_set_multiplier_set 5.0)
        )
        ((>= (survival_mode_set_get) 7)
            (survival_mode_set_multiplier_set 4.5)
        )
        ((>= (survival_mode_set_get) 6)
            (survival_mode_set_multiplier_set 4.0)
        )
        ((>= (survival_mode_set_get) 5)
            (survival_mode_set_multiplier_set 3.5)
        )
        ((>= (survival_mode_set_get) 4)
            (survival_mode_set_multiplier_set 3.0)
        )
        ((>= (survival_mode_set_get) 3)
            (survival_mode_set_multiplier_set 2.5)
        )
        ((>= (survival_mode_set_get) 2)
            (survival_mode_set_multiplier_set 2.0)
        )
        ((>= (survival_mode_set_get) 1)
            (survival_mode_set_multiplier_set 1.5)
        )
        ((>= (survival_mode_set_get) 0)
            (survival_mode_set_multiplier_set 1.0)
        )
    )
)

(script static void survival_scenario_weapon_drop
    (sc140_survival_turret_reserve)
)

(script static void survival_scenario_new_wave
    (if 
        (and
            (= (survival_mode_current_wave_is_initial) false)
            (= (survival_mode_current_wave_is_boss) false)
        ) 
            (begin
                (print "randomizing phantom spawns")
                (if (= (random_range 0 3) 0) 
                    (begin
                        (print "**spawn from phantoms**")
                        (set s_sur_dropship_type 1)
                    ) (begin
                        (print "**spawn from closets**")
                        (set s_sur_dropship_type 0)
                    )
                )
            ) (begin
                (set s_sur_dropship_type 1)
            )
    )
    (if (= (random_range 0 2) 1) 
        (begin
            (print "attack the pad")
            (set g_pad_attack1 true)
            (set s_sur_drop_side_01 "right")
        ) (begin
            (print "attack the building")
            (set g_pad_attack1 false)
            (set s_sur_drop_side_01 "chute")
        )
    )
    (if (= (random_range 0 2) 1) 
        (begin
            (print "attack the pad")
            (set g_pad_attack2 true)
            (set s_sur_drop_side_02 "right")
        ) (begin
            (print "attack the building")
            (set g_pad_attack2 false)
            (set s_sur_drop_side_02 "chute")
        )
    )
)

(script stub void survival_vehicle_cleanup
    (if debug 
        (print "**vehicle cleanup**"))
)

(script static boolean wave_dropship_enabled
    (if 
        (or
            (and
                (= (survival_mode_current_wave_is_bonus) true)
                (!= ai_sur_bonus_phantom none)
            )
            (and
                (= (survival_mode_current_wave_is_bonus) false)
                (!= s_sur_dropship_type 0)
            )
        ) 
            (survival_mode_current_wave_uses_dropship) false)
)

(script static void f_survival_disable_pda (short player_short)
    (pda_input_enable (player_get player_short) true)
    (sleep 1)
    (pda_input_enable_a (player_get player_short) false)
    (pda_input_enable_x (player_get player_short) false)
    (pda_input_enable_y (player_get player_short) false)
    (pda_input_enable_dpad (player_get player_short) false)
)

(script dormant void survival_mode
    (if (> (player_count) 0) 
        (cinematic_snap_to_black))
    (sound_looping_start m_survival_start none 1.0)
    (f_survival_disable_pda player_00)
    (f_survival_disable_pda player_01)
    (f_survival_disable_pda player_02)
    (f_survival_disable_pda player_03)
    (player0_set_pitch -5.0 0)
    (player1_set_pitch -5.0 0)
    (player2_set_pitch -5.0 0)
    (player3_set_pitch -5.0 0)
    (survival_squad_limit)
    (survival_wave_limit)
    (survival_round_limit)
    (survival_ai_limit)
    (survival_wave_timer)
    (survival_round_timer)
    (survival_set_timer)
    (survival_bonus_wait_timer)
    (survival_ai_timeout)
    (survival_lives)
    (object_create_folder_anew folder_survival_scenery)
    (object_create_folder_anew folder_survival_crates)
    (object_create_folder_anew folder_survival_vehicles)
    (object_create_folder_anew folder_survival_equipment)
    (sleep 1)
    (sleep (* 30.0 3.0))
    (if (> (player_count) 0) 
        (cinematic_snap_from_black))
    (sleep (* 30.0 2.0))
    (survival_mode_event_new "survival_welcome")
    (sleep (* 30.0 2.0))
    (wake survival_lives_announcement)
    (wake survival_award_achievement)
    (wake survival_bonus_round_end)
    (wake survival_end_game)
    (wake survival_bonus_round_phantom)
    (sleep (* 30.0 3.0))
    (sound_looping_stop m_survival_start)
    (sleep_until 
        (begin
            (if debug 
                (print "beginning new set"))
            (survival_mode_begin_new_set)
            (sleep 1)
            (survival_begin_announcer)
            (survival_set_multiplier)
            (if (survival_mode_get_debug_bonus_round) 
                (survival_bonus_wave_test) (survival_wave_loop))
            (survival_respawn_weapons)
            (replenish_players)
            (set b_survival_new_set true)
            (sleep k_sur_set_timer)
            false
        ) 
    1)
)

(script static void survival_wave_loop
    (if debug 
        (print "resetting wave variables..."))
    (set b_sur_rand_wave_spawn true)
    (set k_sur_rand_wave_count 0)
    (survival_like_marty_start)
    (sleep_until 
        (begin
            (survival_mode_begin_new_wave)
            (if (survival_mode_current_wave_is_initial) 
                (begin
                    (surival_set_music)
                    (survival_begin_announcer)
                    (sleep 1)
                    (if (> (survival_mode_set_get) 1) 
                        (survival_respawn_crates))
                )
            )
            (survival_wave_spawn)
            (set s_survival_wave_complete_count (+ s_survival_wave_complete_count 1.0))
            (if 
                (and
                    (> (survival_mode_get_set_count) 0)
                    (>= s_survival_wave_complete_count (survival_mode_get_set_count))
                ) 
                    (begin
                        (sleep_forever)
                    )
            )
            (if (survival_mode_current_wave_is_initial) 
                (begin
                    (print "completed an initial wave")
                )
            )
            (if (survival_mode_current_wave_is_boss) 
                (begin
                    (set b_survival_new_round true)
                    (survival_vehicle_cleanup)
                    (survival_add_lives)
                    (replenish_players)
                    (if (< (survival_mode_round_get) 2) 
                        (begin
                            (survival_respawn_weapons)
                            (sleep k_sur_round_timer)
                        )
                    )
                )
            )
            (and
                (>= (survival_mode_round_get) 2)
                (>= (survival_mode_wave_get) 4)
            )
        ) 
    1)
    (sleep k_sur_bonus_timer)
    (survival_bonus_round)
    (if 
        (and
            (> (survival_mode_get_set_count) 0)
            (>= s_survival_wave_complete_count (survival_mode_get_set_count))
        ) 
            (begin
                (sleep_forever)
            )
    )
    (survival_add_lives)
)

(script static void survival_bonus_wave_test
    (print "survival_bonus_wave_test")
    (survival_mode_begin_new_wave)
    (sleep 1)
    (survival_mode_begin_new_wave)
    (sleep 1)
    (survival_mode_begin_new_wave)
    (sleep 1)
    (survival_mode_begin_new_wave)
    (sleep 1)
    (survival_mode_begin_new_wave)
    (sleep 1)
    (survival_mode_begin_new_wave)
    (sleep 1)
    (survival_mode_begin_new_wave)
    (sleep 1)
    (survival_mode_begin_new_wave)
    (sleep 1)
    (survival_mode_begin_new_wave)
    (sleep 1)
    (survival_mode_begin_new_wave)
    (sleep 1)
    (survival_mode_begin_new_wave)
    (sleep 1)
    (survival_mode_begin_new_wave)
    (sleep 1)
    (survival_mode_begin_new_wave)
    (sleep 1)
    (survival_mode_begin_new_wave)
    (sleep 1)
    (survival_mode_begin_new_wave)
    (sleep 1)
    (set s_survival_wave_complete_count (+ s_survival_wave_complete_count 15.0))
    (survival_bonus_round)
)

(script static void survival_wave_spawn
    (if debug 
        (print "spawn wave..."))
    (survival_scenario_new_wave)
    (survival_mode_wave_music_start)
    (add_recycling_volume "tv_sur_garbage_all" 30 10)
    (survival_begin_announcer)
    (sleep 5)
    (ai_reset_objective ai_obj_survival)
    (if (wave_dropship_enabled) 
        (survival_phantom_spawner))
    (if (wave_dropship_enabled) 
        (ai_place_wave_in_limbo (survival_mode_get_wave_squad) ai_sur_wave_spawns s_sur_wave_squad_count) (ai_place_wave (survival_mode_get_wave_squad) ai_sur_wave_spawns s_sur_wave_squad_count))
    (sleep 1)
    (set s_sur_wave_cleanup_threshold 7)
    (if (<= (ai_nonswarm_count ai_sur_wave_spawns) s_sur_wave_cleanup_threshold) 
        (set s_sur_wave_cleanup_threshold (- (ai_nonswarm_count ai_sur_wave_spawns) 2.0)))
    (if (wave_dropship_enabled) 
        (survival_dropship_loader))
    (set b_phantom_move_out true)
    (sleep 30)
    (survival_wave_end_conditions)
    (ai_migrate_persistent "gr_survival_all" ai_sur_remaining)
    (survival_end_announcer)
    (survival_mode_end_wave)
    (set b_survival_new_wave true)
    (set b_sur_wave_phantom false)
    (set b_phantom_move_out false)
    (set s_phantom_load_count 1)
    (if 
        (and
            (< (survival_mode_wave_get) k_sur_wave_per_round_limit)
            (< s_survival_wave_complete_count (- (survival_mode_get_set_count) 1.0))
        ) 
            (sleep k_sur_wave_timer))
    (survival_mode_wave_music_stop)
)

(script static short survival_wave_living_count
    (+ (ai_nonswarm_count "gr_survival_all") (ai_nonswarm_count "gr_survival_remaining") (max 0.0 (- (ai_living_count ai_sur_phantom_01) s_sur_dropship_crew_count)) (max 0.0 (- (ai_living_count ai_sur_phantom_02) s_sur_dropship_crew_count)) (max 0.0 (- (ai_living_count ai_sur_phantom_03) s_sur_dropship_crew_count)) (max 0.0 (- (ai_living_count ai_sur_phantom_04) s_sur_dropship_crew_count)))
)

(script static void survival_wave_end_conditions
    (sleep_until (< (survival_wave_living_count) s_sur_wave_cleanup_threshold) 1 k_sur_wave_timeout)
    (print "**starting end-of-wave cleanup**")
    (survival_kill_volumes_on)
    (ai_survival_cleanup "gr_survival_all" true true)
    (ai_survival_cleanup "gr_survival_remaining" true true)
    (ai_survival_cleanup "gr_survival_extras" true true)
    (cond
        ((= (survival_mode_wave_get) (- k_sur_wave_per_round_limit 2.0))
            (begin
                (sleep_until (<= (survival_wave_living_count) k_sur_ai_final_limit))
            )
        )
        ((or
            (>= (survival_mode_wave_get) (- k_sur_wave_per_round_limit 1.0))
            (and
                (> (survival_mode_get_set_count) 0)
                (>= s_survival_wave_complete_count (- (survival_mode_get_set_count) 1.0))
            )
        )
            (begin
                (sleep_until (<= (survival_wave_living_count) 5) 1)
                (if 
                    (and
                        (<= (survival_wave_living_count) 5)
                        (> (survival_wave_living_count) 2)
                    ) 
                        (begin
                            (survival_mode_event_new "survival_5_ai_remaining")
                        )
                )
                (sound_looping_set_alternate m_final_wave true)
                (sleep_until (<= (survival_wave_living_count) 2) 1)
                (if (= (survival_wave_living_count) 2) 
                    (begin
                        (survival_mode_event_new "survival_2_ai_remaining")
                    )
                )
                (sleep_until (<= (survival_wave_living_count) 1) 1)
                (if (= (survival_wave_living_count) 1) 
                    (begin
                        (survival_mode_event_new "survival_1_ai_remaining")
                    )
                )
                (sleep_until (<= (survival_wave_living_count) 0))
            )
        )
        (true
            (begin
                (sleep_until (<= (survival_wave_living_count) k_sur_ai_rand_limit))
            )
        )
    )
    (survival_kill_volumes_off)
    (ai_survival_cleanup "gr_survival_all" false false)
    (ai_survival_cleanup "gr_survival_remaining" false false)
    (ai_survival_cleanup "gr_survival_extras" false false)
    (sleep_until 
        (and
            (< (object_get_health v_sur_phantom_01) 0.0)
            (< (object_get_health v_sur_phantom_02) 0.0)
            (< (object_get_health v_sur_phantom_03) 0.0)
            (< (object_get_health v_sur_phantom_04) 0.0)
        )
    )
)

(script static void survival_kill_volumes_on
    (kill_volume_enable "kill_sur_room_01")
    (kill_volume_enable "kill_sur_room_02")
    (kill_volume_enable "kill_sur_room_03")
    (kill_volume_enable "kill_sur_room_04")
    (kill_volume_enable "kill_sur_room_05")
    (kill_volume_enable "kill_sur_room_06")
    (kill_volume_enable "kill_sur_room_07")
    (kill_volume_enable "kill_sur_room_08")
    (kill_volume_enable "kill_survival01")
)

(script static void survival_kill_volumes_off
    (kill_volume_disable "kill_sur_room_01")
    (kill_volume_disable "kill_sur_room_02")
    (kill_volume_disable "kill_sur_room_03")
    (kill_volume_disable "kill_sur_room_04")
    (kill_volume_disable "kill_sur_room_05")
    (kill_volume_disable "kill_sur_room_06")
    (kill_volume_disable "kill_sur_room_07")
    (kill_volume_disable "kill_sur_room_08")
    (kill_volume_disable "kill_survival01")
)

(script static void survival_bonus_round
    (if debug 
        (print "** start bonus round **"))
    (ai_reset_objective ai_obj_survival)
    (set b_sur_bonus_round_running true)
    (set b_sur_bonus_end false)
    (ai_kill_silent "gr_survival_extras")
    (set l_sur_pre_bonus_points (survival_total_score))
    (survival_mode_begin_new_wave)
    (set k_survival_bonus_timer (* (survival_mode_get_current_wave_time_limit) 30.0))
    (survival_bonus_round_limit)
    (chud_bonus_round_set_timer (survival_mode_get_current_wave_time_limit))
    (chud_bonus_round_show_timer true)
    (survival_mode_event_new "survival_bonus_round")
    (sleep 150)
    (if (wave_dropship_enabled) 
        (begin
            (ai_place ai_sur_bonus_phantom)
            (sleep 1)
            (f_survival_bonus_spawner true)
            (f_survival_bonus_spawner true)
            (f_survival_bonus_spawner true)
            (f_survival_bonus_spawner true)
        )
    )
    (if (wave_dropship_enabled) 
        (sleep_until b_sur_bonus_phantom_ready))
    (set b_survival_bonus_timer_begin true)
    (sleep_until 
        (begin
            (sleep_until 
                (or
                    b_sur_bonus_end
                    (<= (survival_bonus_living_count) k_sur_bonus_limit)
                    (survival_players_dead)
                ) 
            1)
            (if 
                (and
                    (not (survival_players_dead))
                    (not b_sur_bonus_end)
                ) 
                    (begin
                        (f_survival_bonus_spawner false)
                    )
            )
            (or
                b_sur_bonus_end
                (survival_players_dead)
            )
        ) 
    1)
    (ai_kill_silent ai_sur_wave_spawns)
    (ai_kill_silent ai_sur_bonus_wave)
    (sleep 90)
    (ai_kill_silent ai_sur_wave_spawns)
    (ai_kill_silent ai_sur_bonus_wave)
    (survival_mode_event_new "survival_bonus_round_over")
    (survival_mode_respawn_dead_players)
    (sleep 30)
    (survival_mode_end_wave)
    (survival_mode_end_set)
    (set s_survival_wave_complete_count (+ s_survival_wave_complete_count 1.0))
    (sleep 120)
    (set l_sur_post_bonus_points (survival_total_score))
    (if (>= (- l_sur_post_bonus_points l_sur_pre_bonus_points) k_sur_bonus_points_award) 
        (begin
            (survival_award_bonus_lives)
        ) (begin
            (survival_mode_event_new "survival_better_luck_next_time")
        )
    )
    (chud_bonus_round_set_timer 0.0)
    (chud_bonus_round_show_timer false)
    (chud_bonus_round_start_timer false)
    (set k_sur_bonus_squad_limit 6)
    (set b_sur_bonus_phantom_ready false)
    (set b_sur_bonus_refilling false)
    (set b_sur_bonus_round_running false)
)

(script dormant void survival_bonus_round_end
    (sleep_until 
        (begin
            (sleep_until b_survival_bonus_timer_begin 1)
            (chud_bonus_round_start_timer true)
            (sleep_until (survival_players_dead) 1 k_survival_bonus_timer)
            (set b_sur_bonus_end true)
            (if (survival_players_dead) 
                (begin
                    (chud_bonus_round_start_timer false)
                    (chud_bonus_round_set_timer 0.0)
                )
            )
            (set b_survival_bonus_timer_begin false)
            false
        ) 
    1)
)

(script static void survival_bonus_round_limit
    (cond
        ((coop_players_4)
            (begin
                (if (>= (survival_mode_set_get) 5) 
                    (set k_sur_bonus_points_award 24000))
                (if (= (survival_mode_set_get) 4) 
                    (set k_sur_bonus_points_award 20000))
                (if (= (survival_mode_set_get) 3) 
                    (set k_sur_bonus_points_award 16000))
                (if (= (survival_mode_set_get) 2) 
                    (set k_sur_bonus_points_award 12000))
                (if (<= (survival_mode_set_get) 1) 
                    (set k_sur_bonus_points_award 8000))
            )
        )
        ((coop_players_3)
            (begin
                (if (>= (survival_mode_set_get) 5) 
                    (set k_sur_bonus_points_award 18000))
                (if (= (survival_mode_set_get) 4) 
                    (set k_sur_bonus_points_award 15000))
                (if (= (survival_mode_set_get) 3) 
                    (set k_sur_bonus_points_award 12000))
                (if (= (survival_mode_set_get) 2) 
                    (set k_sur_bonus_points_award 9000))
                (if (<= (survival_mode_set_get) 1) 
                    (set k_sur_bonus_points_award 6000))
            )
        )
        ((coop_players_2)
            (begin
                (if (>= (survival_mode_set_get) 5) 
                    (set k_sur_bonus_points_award 12000))
                (if (= (survival_mode_set_get) 4) 
                    (set k_sur_bonus_points_award 10000))
                (if (= (survival_mode_set_get) 3) 
                    (set k_sur_bonus_points_award 8000))
                (if (= (survival_mode_set_get) 2) 
                    (set k_sur_bonus_points_award 6000))
                (if (<= (survival_mode_set_get) 1) 
                    (set k_sur_bonus_points_award 4000))
            )
        )
        (true
            (begin
                (if (>= (survival_mode_set_get) 5) 
                    (set k_sur_bonus_points_award 6000))
                (if (= (survival_mode_set_get) 4) 
                    (set k_sur_bonus_points_award 5000))
                (if (= (survival_mode_set_get) 3) 
                    (set k_sur_bonus_points_award 4000))
                (if (= (survival_mode_set_get) 2) 
                    (set k_sur_bonus_points_award 3000))
                (if (<= (survival_mode_set_get) 1) 
                    (set k_sur_bonus_points_award 2000))
            )
        )
    )
    (sleep 1)
    (chud_bonus_round_set_target_score k_sur_bonus_points_award)
)

(script static void f_survival_bonus_spawner (boolean force_load)
    (if debug 
        (print "spawn bonus squad..."))
    (if 
        (and
            (wave_dropship_enabled)
            (or
                force_load
                (and
                    b_sur_bonus_phantom_ready
                    (= (random_range 0 2) 0)
                )
            )
        ) 
            (begin
                (ai_place_wave_in_limbo (survival_mode_get_wave_squad) ai_sur_wave_spawns 1)
                (sleep 1)
                (f_survival_bonus_load_phantom ai_sur_wave_spawns)
            ) (begin
                (ai_place_wave (survival_mode_get_wave_squad) ai_sur_wave_spawns 1)
                (sleep 1)
                (ai_migrate_persistent ai_sur_wave_spawns ai_sur_bonus_wave)
            )
    )
)

(script static void f_survival_bonus_load_phantom (ai load_squad)
    (if debug 
        (print "loading bonus squad into dropship..."))
    (f_survival_load_phantom v_sur_bonus_phantom s_sur_drop_side_bonus load_squad)
)

(script dormant void survival_bonus_round_phantom
    (sleep_until 
        (begin
            (sleep_until 
                (or
                    b_sur_bonus_phantom_ready
                    b_sur_bonus_end
                ) 
            5)
            (if (not b_sur_bonus_end) 
                (begin
                    (unit_open v_sur_bonus_phantom)
                    (sleep_until 
                        (begin
                            (vehicle_unload v_sur_bonus_phantom phantom_p)
                            (sleep 1)
                            (ai_migrate_persistent ai_sur_wave_spawns ai_sur_bonus_wave)
                            b_sur_bonus_end
                        ) 
                    30)
                    (unit_close v_sur_bonus_phantom)
                )
            )
            false
        )
    )
)

(script static short survival_bonus_living_count
    (+ (ai_nonswarm_count ai_sur_wave_spawns) (ai_nonswarm_count ai_sur_bonus_wave) (ai_living_count ai_sur_bonus_phantom))
)

(script static void f_unload_bonus_phantom (vehicle phantom)
    (begin_random
        (begin
            (vehicle_unload phantom phantom_p_lf)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload phantom phantom_p_lb)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload phantom phantom_p_rf)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload phantom phantom_p_rb)
            (sleep (random_range 0 10))
        )
    )
    (sleep 90)
    (begin_random
        (begin
            (vehicle_unload phantom phantom_p_ml_b)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload phantom phantom_p_mr_f)
            (sleep (random_range 0 10))
        )
    )
)

(script static long survival_total_score
    (+ (campaign_metagame_get_player_score (player0)) (campaign_metagame_get_player_score (player1)) (campaign_metagame_get_player_score (player2)) (campaign_metagame_get_player_score (player3)))
)

(script static void survival_phantom_spawner
    (sleep_until 
        (begin
            (if b_sur_phantoms_semi_random 
                (begin_random
                    (begin
                        (if b_phantom_spawn 
                            (f_survival_phantom_spawner ai_sur_phantom_01))
                        (if b_phantom_spawn 
                            (f_survival_phantom_spawner ai_sur_phantom_02))
                    )
                    (begin
                        (if b_phantom_spawn 
                            (f_survival_phantom_spawner ai_sur_phantom_03))
                        (if b_phantom_spawn 
                            (f_survival_phantom_spawner ai_sur_phantom_04))
                    )
                ) (begin_random
                    (if b_phantom_spawn 
                        (f_survival_phantom_spawner ai_sur_phantom_01))
                    (if b_phantom_spawn 
                        (f_survival_phantom_spawner ai_sur_phantom_02))
                    (if b_phantom_spawn 
                        (f_survival_phantom_spawner ai_sur_phantom_03))
                    (if b_phantom_spawn 
                        (f_survival_phantom_spawner ai_sur_phantom_04))
                )
            )
            (= b_phantom_spawn false)
        ) 
    1)
    (set b_phantom_spawn true)
    (set b_phantom_spawn_count 0)
    (sleep 1)
)

(script static void f_survival_phantom_spawner (ai spawned_phantom)
    (ai_place spawned_phantom)
    (sleep 1)
    (set s_sur_dropship_crew_count (ai_living_count spawned_phantom))
    (ai_force_active spawned_phantom true)
    (if (> (object_get_health spawned_phantom) 0.0) 
        (begin
            (if debug 
                (print "spawn phantom..."))
            (set b_phantom_spawn_count (+ b_phantom_spawn_count 1.0))
            (if (>= b_phantom_spawn_count k_phantom_spawn_limit) 
                (set b_phantom_spawn false))
        )
    )
)

(script static ai wave_squad_get (short index)
    (if (<= index (ai_squad_group_get_squad_count ai_sur_wave_spawns)) 
        (ai_squad_group_get_squad ai_sur_wave_spawns index) none)
)

(script static short wave_squad_get_count (short index)
    (if (<= index (ai_squad_group_get_squad_count ai_sur_wave_spawns)) 
        (ai_living_count (ai_squad_group_get_squad ai_sur_wave_spawns index)) 0)
)

(script static boolean survival_should_load_squad (ai squad)
    (> (ai_living_count squad) 0)
)

(script static void survival_dropship_loader
    (if (survival_should_load_squad (wave_squad_get 0)) 
        (f_survival_phantom_loader (wave_squad_get 0)))
    (if (survival_should_load_squad (wave_squad_get 1)) 
        (f_survival_phantom_loader (wave_squad_get 1)))
    (if (survival_should_load_squad (wave_squad_get 2)) 
        (f_survival_phantom_loader (wave_squad_get 2)))
    (if (survival_should_load_squad (wave_squad_get 3)) 
        (f_survival_phantom_loader (wave_squad_get 3)))
    (if (survival_should_load_squad (wave_squad_get 4)) 
        (f_survival_phantom_loader (wave_squad_get 4)))
    (if (survival_should_load_squad (wave_squad_get 5)) 
        (f_survival_phantom_loader (wave_squad_get 5)))
    (if (survival_should_load_squad (wave_squad_get 6)) 
        (f_survival_phantom_loader (wave_squad_get 6)))
    (if (survival_should_load_squad (wave_squad_get 7)) 
        (f_survival_phantom_loader (wave_squad_get 7)))
    (if (survival_should_load_squad (wave_squad_get 8)) 
        (f_survival_phantom_loader (wave_squad_get 8)))
    (if (survival_should_load_squad (wave_squad_get 9)) 
        (f_survival_phantom_loader (wave_squad_get 9)))
    (if (survival_should_load_squad (wave_squad_get 10)) 
        (f_survival_phantom_loader (wave_squad_get 10)))
    (if (survival_should_load_squad (wave_squad_get 11)) 
        (f_survival_phantom_loader (wave_squad_get 11)))
    (if (survival_should_load_squad (wave_squad_get 12)) 
        (f_survival_phantom_loader (wave_squad_get 12)))
    (if (survival_should_load_squad (wave_squad_get 13)) 
        (f_survival_phantom_loader (wave_squad_get 13)))
    (if (survival_should_load_squad (wave_squad_get 14)) 
        (f_survival_phantom_loader (wave_squad_get 14)))
    (if (survival_should_load_squad (wave_squad_get 15)) 
        (f_survival_phantom_loader (wave_squad_get 15)))
    (if (survival_should_load_squad (wave_squad_get 16)) 
        (f_survival_phantom_loader (wave_squad_get 16)))
    (if (survival_should_load_squad (wave_squad_get 17)) 
        (f_survival_phantom_loader (wave_squad_get 17)))
    (if (survival_should_load_squad (wave_squad_get 18)) 
        (f_survival_phantom_loader (wave_squad_get 18)))
    (if (survival_should_load_squad (wave_squad_get 19)) 
        (f_survival_phantom_loader (wave_squad_get 19)))
    (if (survival_should_load_squad (wave_squad_get 20)) 
        (f_survival_phantom_loader (wave_squad_get 20)))
)

(script static void f_survival_phantom_loader (ai load_squad)
    (sleep_until 
        (begin
            (if 
                (and
                    (= b_phantom_loaded false)
                    (= s_phantom_load_count 1)
                ) 
                    (begin
                        (if (> (object_get_health v_sur_phantom_01) 0.0) 
                            (begin
                                (if debug 
                                    (print "** load phantom 01 **"))
                                (f_survival_load_phantom v_sur_phantom_01 s_sur_drop_side_01 load_squad)
                            )
                        )
                        (set s_phantom_load_count 2)
                    )
            )
            (if 
                (and
                    (= b_phantom_loaded false)
                    (= s_phantom_load_count 2)
                ) 
                    (begin
                        (if (> (object_get_health v_sur_phantom_02) 0.0) 
                            (begin
                                (if debug 
                                    (print "** load phantom 02 **"))
                                (f_survival_load_phantom v_sur_phantom_02 s_sur_drop_side_02 load_squad)
                            )
                        )
                        (set s_phantom_load_count 3)
                    )
            )
            (if 
                (and
                    (= b_phantom_loaded false)
                    (= s_phantom_load_count 3)
                ) 
                    (begin
                        (if (> (object_get_health v_sur_phantom_03) 0.0) 
                            (begin
                                (if debug 
                                    (print "** load phantom 03 **"))
                                (f_survival_load_phantom v_sur_phantom_03 s_sur_drop_side_03 load_squad)
                            )
                        )
                        (set s_phantom_load_count 4)
                    )
            )
            (if 
                (and
                    (= b_phantom_loaded false)
                    (= s_phantom_load_count 4)
                ) 
                    (begin
                        (if (> (object_get_health v_sur_phantom_04) 0.0) 
                            (begin
                                (if debug 
                                    (print "** load phantom 04 **"))
                                (f_survival_load_phantom v_sur_phantom_04 s_sur_drop_side_04 load_squad)
                            )
                        )
                        (set s_phantom_load_count 1)
                    )
            )
            b_phantom_loaded
        ) 
    1)
    (set b_phantom_loaded false)
)

(script static void f_survival_load_phantom (vehicle phantom, string load_side, ai load_squad)
    (ai_exit_limbo load_squad)
    (if (= load_side "left") 
        (begin
            (if debug 
                (print "load phantom left..."))
            (if (= (vehicle_test_seat phantom phantom_p_lb) false) 
                (ai_vehicle_enter_immediate load_squad phantom phantom_p_lb))
            (if (= (vehicle_test_seat phantom phantom_p_lf) false) 
                (ai_vehicle_enter_immediate load_squad phantom phantom_p_lf))
            (if (= (vehicle_test_seat phantom phantom_p_ml_f) false) 
                (ai_vehicle_enter_immediate load_squad phantom phantom_p_ml_f))
            (if (= (vehicle_test_seat phantom phantom_p_ml_b) false) 
                (ai_vehicle_enter_immediate load_squad phantom phantom_p_ml_b))
            (set b_phantom_loaded true)
        )
    )
    (if (= load_side "right") 
        (begin
            (if debug 
                (print "load phantom right..."))
            (if (= (vehicle_test_seat phantom phantom_p_rb) false) 
                (ai_vehicle_enter_immediate load_squad phantom phantom_p_rb))
            (if (= (vehicle_test_seat phantom phantom_p_rf) false) 
                (ai_vehicle_enter_immediate load_squad phantom phantom_p_rf))
            (if (= (vehicle_test_seat phantom phantom_p_mr_f) false) 
                (ai_vehicle_enter_immediate load_squad phantom phantom_p_mr_f))
            (if (= (vehicle_test_seat phantom phantom_p_mr_b) false) 
                (ai_vehicle_enter_immediate load_squad phantom phantom_p_mr_b))
            (set b_phantom_loaded true)
        )
    )
    (if (= load_side "dual") 
        (begin
            (if debug 
                (print "load phantom dual..."))
            (if (= (vehicle_test_seat phantom phantom_p_lf) false) 
                (ai_vehicle_enter_immediate load_squad phantom phantom_p_lf))
            (if (= (vehicle_test_seat phantom phantom_p_rf) false) 
                (ai_vehicle_enter_immediate load_squad phantom phantom_p_rf))
            (if (= (vehicle_test_seat phantom phantom_p_lb) false) 
                (ai_vehicle_enter_immediate load_squad phantom phantom_p_lb))
            (if (= (vehicle_test_seat phantom phantom_p_rb) false) 
                (ai_vehicle_enter_immediate load_squad phantom phantom_p_rb))
            (set b_phantom_loaded true)
        )
    )
    (if (= load_side "chute") 
        (begin
            (if debug 
                (print "load phantom chute..."))
            (if (= (vehicle_test_seat phantom phantom_pc_a) false) 
                (ai_vehicle_enter_immediate load_squad phantom phantom_pc_a))
            (if (= (vehicle_test_seat phantom phantom_pc_b) false) 
                (ai_vehicle_enter_immediate load_squad phantom phantom_pc_b))
            (if (= (vehicle_test_seat phantom phantom_pc_c) false) 
                (ai_vehicle_enter_immediate load_squad phantom phantom_pc_c))
            (if (= (vehicle_test_seat phantom phantom_pc_d) false) 
                (ai_vehicle_enter_immediate load_squad phantom phantom_pc_d))
            (set b_phantom_loaded true)
        )
    )
)

(script static void survival_countdown_timer
    (sound_impulse_start "sound\game_sfx\ui\atlas_main_menu\player_timer_beep" none 1.0)
    (sleep 30)
    (sound_impulse_start "sound\game_sfx\ui\atlas_main_menu\player_timer_beep" none 1.0)
    (sleep 30)
    (sound_impulse_start "sound\game_sfx\ui\atlas_main_menu\player_timer_beep" none 1.0)
    (sleep 30)
    (sound_impulse_start "sound\game_sfx\ui\atlas_main_menu\player_respawn" none 1.0)
    (sleep 30)
)

(script static void survival_begin_announcer
    (cond
        (b_survival_new_set
            (begin
                (if debug 
                    (print "announce new set..."))
                (survival_countdown_timer)
                (survival_mode_event_new "survival_new_set")
                (set b_survival_new_set false)
                (set b_survival_new_round false)
                (set b_survival_new_wave false)
            )
        )
        (b_survival_new_round
            (begin
                (if debug 
                    (print "announce new round..."))
                (survival_countdown_timer)
                (survival_mode_event_new "survival_new_round")
                (set b_survival_new_round false)
                (set b_survival_new_wave false)
            )
        )
        (b_survival_new_wave
            (begin
                (if debug 
                    (print "announce new wave..."))
                (if (> (survival_mode_wave_get) 0) 
                    (begin
                        (survival_mode_award_hero_medal)
                        (sleep 1)
                        (survival_mode_event_new "survival_reinforcements")
                        (survival_mode_respawn_dead_players)
                        (sleep (* (random_range 3 5) 30.0))
                    )
                )
            )
        )
    )
    (sleep 5)
)

(script static void survival_end_announcer
    (cond
        ((< (survival_mode_wave_get) k_sur_wave_per_round_limit)
            (begin
                (if debug 
                    (print "announce end wave..."))
            )
        )
        ((< (survival_mode_round_get) k_sur_round_per_set_limit)
            (begin
                (sleep (* 30.0 5.0))
                (if debug 
                    (print "announce end round..."))
                (survival_mode_event_new "survival_end_round")
                (sleep (* 30.0 3.0))
            )
        )
        (true
            (begin
                (sleep (* 30.0 5.0))
                (if debug 
                    (print "announce end set..."))
                (survival_mode_event_new "survival_end_set")
                (ai_kill "gr_survival_extras")
                (sleep (* 30.0 3.0))
            )
        )
    )
)

(script dormant void survival_lives_announcement
    (sleep_until 
        (begin
            (sleep_until (> (survival_mode_lives_get) 0) 1)
            (sleep_until (<= (survival_mode_lives_get) 5) 1)
            (if (= (survival_mode_lives_get) 5) 
                (begin
                    (if debug 
                        (print "5 lives left..."))
                    (survival_mode_event_new "survival_5_lives_left")
                )
            )
            (sleep_until 
                (or
                    (<= (survival_mode_lives_get) 1)
                    (> (survival_mode_lives_get) 5)
                ) 
            1)
            (if (= (survival_mode_lives_get) 1) 
                (begin
                    (if debug 
                        (print "1 life left..."))
                    (survival_mode_event_new "survival_1_life_left")
                )
            )
            (sleep_until 
                (or
                    (<= (survival_mode_lives_get) 0)
                    (> (survival_mode_lives_get) 1)
                ) 
            1)
            (if (<= (survival_mode_lives_get) 0) 
                (begin
                    (if debug 
                        (print "0 lives left..."))
                    (survival_mode_event_new "survival_0_lives_left")
                )
            )
            (sleep_until 
                (or
                    (<= (player_count) 1)
                    (> (survival_mode_lives_get) 0)
                ) 
            1)
            (if 
                (and
                    (<= (survival_mode_lives_get) 0)
                    (= (player_count) 1)
                ) 
                    (begin
                        (if debug 
                            (print "last man standing..."))
                        (survival_mode_event_new "survival_last_man_standing")
                    )
            )
            false
        )
    )
)

(script static void survival_respawn_weapons
    (if debug 
        (print "creating scenery / vehicles / equipment"))
    (survival_mode_event_new "survival_awarded_weapon")
    (set b_sur_weapon_drop true)
    (object_create_folder_anew folder_survival_scenery)
    (object_create_folder_anew folder_survival_vehicles)
    (object_create_folder_anew folder_survival_equipment)
    (survival_scenario_weapon_drop)
    (sleep 30)
    (set b_sur_weapon_drop false)
)

(script static void survival_respawn_crates
    (if debug 
        (print "respawn crates"))
    (object_create_folder_anew folder_survival_crates)
)

(script static void surival_set_music
    (set s_music_initial (random_range 0 5))
    (cond
        ((= s_music_initial 0)
            (set m_initial_wave "multiplayer\firefight_music\firefight_music02")
        )
        ((= s_music_initial 1)
            (set m_initial_wave "multiplayer\firefight_music\firefight_music03")
        )
        ((= s_music_initial 2)
            (set m_initial_wave "multiplayer\firefight_music\firefight_music04")
        )
        ((= s_music_initial 3)
            (set m_initial_wave "multiplayer\firefight_music\firefight_music05")
        )
        ((= s_music_initial 4)
            (set m_initial_wave "multiplayer\firefight_music\firefight_music06")
        )
    )
    (sleep 1)
    (set s_music_final (random_range 0 5))
    (cond
        ((= s_music_final 0)
            (set m_final_wave "multiplayer\firefight_music\firefight_music20")
        )
        ((= s_music_final 1)
            (set m_final_wave "multiplayer\firefight_music\firefight_music21")
        )
        ((= s_music_final 2)
            (set m_final_wave "multiplayer\firefight_music\firefight_music22")
        )
        ((= s_music_final 3)
            (set m_final_wave "multiplayer\firefight_music\firefight_music23")
        )
        ((= s_music_final 4)
            (set m_final_wave "multiplayer\firefight_music\firefight_music24")
        )
    )
)

(script static void survival_mode_wave_music_start
    (cond
        ((survival_mode_current_wave_is_initial)
            (sound_looping_start m_initial_wave none 1.0)
        )
        ((survival_mode_current_wave_is_boss)
            (sound_looping_start m_final_wave none 1.0)
        )
    )
)

(script static void survival_mode_wave_music_stop
    (cond
        ((survival_mode_current_wave_is_initial)
            (sound_looping_stop m_initial_wave)
        )
        ((survival_mode_current_wave_is_boss)
            (sound_looping_stop m_final_wave)
        )
    )
)

(script dormant void survival_award_achievement
    (sleep_until (>= (survival_total_score) 200000))
    (cond
        ((= string_survival_map_name "sc100")
            (achievement_grant_to_all_players "_achievement_metagame_points_in_sc100")
        )
        ((= string_survival_map_name "sc110")
            (achievement_grant_to_all_players "_achievement_metagame_points_in_sc110")
        )
        ((= string_survival_map_name "sc120")
            (achievement_grant_to_all_players "_achievement_metagame_points_in_sc120")
        )
        ((= string_survival_map_name "sc130a")
            (achievement_grant_to_all_players "_achievement_metagame_points_in_sc130a")
        )
        ((= string_survival_map_name "sc130b")
            (achievement_grant_to_all_players "_achievement_metagame_points_in_sc130b")
        )
        ((= string_survival_map_name "sc140")
            (achievement_grant_to_all_players "_achievement_metagame_points_in_sc140")
        )
        ((= string_survival_map_name "l200")
            (achievement_grant_to_all_players "_achievement_metagame_points_in_l200")
        )
        ((= string_survival_map_name "l300")
            (achievement_grant_to_all_players "_achievement_metagame_points_in_l300")
        )
        ((= string_survival_map_name "h100a")
            (achievement_grant_to_all_players "_achievement_metagame_points_in_sc100")
        )
        ((= string_survival_map_name "h100b")
            (achievement_grant_to_all_players "_achievement_metagame_points_in_sc120")
        )
    )
)

(script static void survival_like_marty_start
    (set l_player0_score (campaign_metagame_get_player_score (player0)))
    (set l_player1_score (campaign_metagame_get_player_score (player1)))
    (set l_player2_score (campaign_metagame_get_player_score (player2)))
    (set l_player3_score (campaign_metagame_get_player_score (player3)))
)

(script static void survival_like_marty_award
    (if (<= (campaign_metagame_get_player_score (player0)) l_player0_score) 
        (achievement_grant_to_player (player0) "_achievement_be_like_marty"))
    (if (<= (campaign_metagame_get_player_score (player1)) l_player1_score) 
        (achievement_grant_to_player (player1) "_achievement_be_like_marty"))
    (if (<= (campaign_metagame_get_player_score (player2)) l_player2_score) 
        (achievement_grant_to_player (player2) "_achievement_be_like_marty"))
    (if (<= (campaign_metagame_get_player_score (player3)) l_player3_score) 
        (achievement_grant_to_player (player3) "_achievement_be_like_marty"))
)

(script startup void survival_round_timer_counter
    (sleep 300)
    (sleep_until 
        (begin
            (set l_sur_round_timer (+ l_sur_round_timer 1.0))
            false
        ) 
    30)
)

(script dormant void survival_end_game
    (wake survival_mode_end_cond_lives)
    (wake survival_mode_end_cond_time)
    (wake survival_mode_end_cond_complete)
    (sleep_until b_survival_game_end_condition 1)
    (sleep_forever survival_mode_end_cond_lives)
    (sleep_forever survival_mode_end_cond_time)
    (sleep_forever survival_mode)
    (sleep_forever survival_bonus_round_end)
    (sleep_forever survival_lives_announcement)
    (sleep_forever survival_award_achievement)
    (sleep 30)
    (sound_looping_stop m_final_wave)
    (sleep 30)
    (sound_looping_start m_pgcr none 1.0)
    (survival_mode_event_new "survival_game_over")
    (sleep 60)
    (sound_class_set_gain "" 0.0 270)
    (sound_class_set_gain "mus" 1.0 1)
    (sound_class_set_gain "ui" 1.0 0)
    (game_won)
)

(script dormant void survival_mode_end_cond_lives
    (sleep_until 
        (and
            (= (survival_mode_lives_get) 0)
            (survival_players_dead)
            (= b_sur_bonus_round_running false)
        ) 
    1)
    (sleep 30)
    (set b_survival_game_end_condition true)
)

(script dormant void survival_mode_end_cond_time
    (sleep_until 
        (and
            (= b_sur_bonus_round_running false)
            (> (survival_mode_get_time_limit) 0)
            (>= l_sur_round_timer (* (survival_mode_get_time_limit) 60.0))
        ) 
    10)
    (set b_survival_game_end_condition true)
)

(script dormant void survival_mode_end_cond_complete
    (sleep_until 
        (and
            (> (survival_mode_get_set_count) 0)
            (>= s_survival_wave_complete_count (survival_mode_get_set_count))
        ) 
    10)
    (sleep 30)
    (set b_survival_game_end_condition true)
)

(script static boolean survival_players_dead
    (if 
        (and
            (<= (object_get_health (player0)) 0.0)
            (<= (object_get_health (player1)) 0.0)
            (<= (object_get_health (player2)) 0.0)
            (<= (object_get_health (player3)) 0.0)
        ) 
            true false)
)

(script static void survival_refresh_sleep
    (if (>= (ai_living_count "gr_survival_all") 10) 
        (cond
            ((difficulty_normal)
                (sleep (* (random_range 20 30) 30.0))
            )
            ((difficulty_heroic)
                (sleep (* (random_range 10 20) 30.0))
            )
            ((difficulty_legendary)
                (sleep (* (random_range 5 10) 30.0))
            )
        ) (sleep 30))
)

(script dormant void test_ai_erase_fast
    (sleep_until 
        (begin
            (sleep_until (>= (ai_living_count "gr_survival_all") 1) 1)
            (sleep 5)
            (ai_erase_all)
            false
        ) 
    1)
)

(script dormant void test_ai_erase
    (sleep_until 
        (begin
            (sleep_until (>= (ai_living_count "gr_survival_all") 1) 1)
            (sleep 30)
            (ai_erase_all)
            false
        ) 
    1)
)

(script dormant void test_ai_erase_slow
    (sleep_until 
        (begin
            (sleep_until (>= (ai_living_count "gr_survival_all") 1) 1)
            (sleep 150)
            (ai_erase_all)
            false
        ) 
    1)
)

(script static void test_award_500
    (campaign_metagame_award_points (player0) 500)
)

(script static void test_award_1000
    (campaign_metagame_award_points (player0) 1000)
)

(script static void test_award_5000
    (campaign_metagame_award_points (player0) 5000)
)

(script static void test_award_10000
    (campaign_metagame_award_points (player0) 10000)
)

(script static void test_award_20000
    (campaign_metagame_award_points (player0) 20000)
)

(script static void test_award_30000
    (campaign_metagame_award_points (player0) 30000)
)

(script static void test_4_player
    (set k_sur_squad_per_wave_limit 6)
    (set k_phantom_spawn_limit 2)
)

(script dormant void sc140_music_01
    (sound_looping_resume "levels\atlas\sc140\music\sc140_music01" none 1.0)
    (sleep_until (not g_music_sc140_01))
    (if debug 
        (print "stop music sc140_01"))
    (sound_looping_stop "levels\atlas\sc140\music\sc140_music01")
)

(script dormant void sc140_music_02
    (sleep_until g_music_sc140_02)
    (if debug 
        (print "start music sc140_02"))
    (sound_looping_start "levels\atlas\sc140\music\sc140_music02" none 1.0)
    (sleep_until (not g_music_sc140_02))
    (if debug 
        (print "stop music sc140_02"))
    (sound_looping_stop "levels\atlas\sc140\music\sc140_music02")
)

(script dormant void sc140_music_03
    (sleep_until g_music_sc140_03)
    (if debug 
        (print "start music sc140_03"))
    (sound_looping_start "levels\atlas\sc140\music\sc140_music03" none 1.0)
    (sleep_until (not g_music_sc140_03))
    (if debug 
        (print "stop music sc140_03"))
    (sound_looping_stop "levels\atlas\sc140\music\sc140_music03")
)

(script dormant void sc140_music_04
    (sleep_until 
        (or
            (>= g_1b_obj_control 2)
            (< (ai_living_count "cell1b_carbine_group") 1)
        )
    )
    (if debug 
        (print "start music sc140_04"))
    (sound_looping_start "levels\atlas\sc140\music\sc140_music04" none 1.0)
    (sleep_until (not g_music_sc140_04))
    (if debug 
        (print "stop music sc140_04"))
    (sound_looping_stop "levels\atlas\sc140\music\sc140_music04")
)

(script dormant void sc140_music_05
    (sleep_until g_music_sc140_05)
    (if debug 
        (print "start music sc140_05"))
    (sound_looping_start "levels\atlas\sc140\music\sc140_music05" none 1.0)
    (sleep_until (not g_music_sc140_05))
    (if debug 
        (print "stop music sc140_05"))
    (sound_looping_stop "levels\atlas\sc140\music\sc140_music05")
)

(script dormant void sc140_music_06
    (sleep_until 
        (or
            (volume_test_players "cell_2b_oc_01_vol")
            (>= (ai_combat_status "cell2b_group") 8)
        ) 
    5)
    (sound_looping_start "levels\atlas\sc140\music\sc140_music06" none 1.0)
    (sleep_until (not g_music_sc140_06))
    (if debug 
        (print "stop music sc140_06"))
    (sound_looping_stop "levels\atlas\sc140\music\sc140_music06")
)

(script dormant void sc140_music_07
    (sleep_until g_music_sc140_07)
    (if debug 
        (print "start music sc140_07"))
    (sound_looping_start "levels\atlas\sc140\music\sc140_music07" none 1.0)
    (sleep_until (not g_music_sc140_07))
    (if debug 
        (print "stop music sc140_07"))
    (sound_looping_stop "levels\atlas\sc140\music\sc140_music07")
)

(script dormant void md_010_first_pad
    (sleep 60)
    (if debug 
        (print "mission dialogue:010:first:pad"))
    (sleep 1)
    (ai_dialogue_enable false)
    (if dialogue 
        (print "buck (radio): back inside! let's find that pelican!"))
    (sleep (ai_play_line ai_buck sc140_0010))
    (sleep 10)
    (if dialogue 
        (print "romeo (helmet): what about all those covenant we sidestepped on the way up?"))
    (ai_player_dialogue_enable false)
    (sound_impulse_start "sound\dialog\atlas\sc140\mission\sc140_0020_rom" none 1.0)
    (sleep (sound_impulse_language_time "sound\dialog\atlas\sc140\mission\sc140_0020_rom"))
    (sleep 10)
    (ai_player_dialogue_enable true)
    (if dialogue 
        (print "buck (radio): now we get kill them."))
    (sleep (ai_play_line ai_buck sc140_0030))
    (ai_dialogue_enable true)
    (sleep 10)
    (wake md_010_first_pad_reminder)
)

(script dormant void md_010_first_pad_reminder
    (sleep_until (not (volume_test_players_all "initial_md01_vol")) 5 (* 30.0 5.0))
    (if 
        (and
            (<= (ai_combat_status "cell1a_group") 3)
            (volume_test_players_all "initial_md01_vol")
        ) 
            (begin
                (if debug 
                    (print "mission dialogue:010:first:pad:reminder"))
                (sleep 1)
                (ai_dialogue_enable false)
                (if dialogue 
                    (print "romeo (helmet): thanks for picking such a tall building. i'm really digging all these stairs."))
                (ai_player_dialogue_enable false)
                (sound_impulse_start "sound\dialog\atlas\sc140\mission\sc140_0045_rom" none 1.0)
                (sleep (sound_impulse_language_time "sound\dialog\atlas\sc140\mission\sc140_0045_rom"))
                (ai_player_dialogue_enable true)
                (sleep 10)
                (if (volume_test_players_all "initial_md01_vol") 
                    (begin
                        (if dialogue 
                            (print "buck (radio): do you ever get tired of bitching, romeo?"))
                        (sleep (ai_play_line ai_buck sc140_0050))
                        (sleep 10)
                    )
                )
                (if (volume_test_players_all "initial_md01_vol") 
                    (begin
                        (if dialogue 
                            (print "romeo (helmet): you ever get tired of busting my balls?"))
                        (ai_player_dialogue_enable false)
                        (sound_impulse_start "sound\dialog\atlas\sc140\mission\sc140_0060_rom" none 1.0)
                        (sleep (sound_impulse_language_time "sound\dialog\atlas\sc140\mission\sc140_0060_rom"))
                        (ai_player_dialogue_enable true)
                        (sleep 10)
                    )
                )
                (if (volume_test_players_all "initial_md01_vol") 
                    (begin
                        (if dialogue 
                            (print "buck (radio): point taken."))
                        (sleep (ai_play_line ai_buck sc140_0070))
                        (ai_dialogue_enable true)
                        (sleep 10)
                    )
                )
            )
    )
)

(script dormant void md_020_cell_1a
    (sleep 90)
    (if debug 
        (print "mission dialogue:020:cell:1a"))
    (sleep_until (volume_test_players "cell_1a_md01_vol") 1)
    (sleep 75)
    (sleep_forever md_010_first_pad_reminder)
    (if (< (ai_combat_status "cell1a_group") 2) 
        (begin
            (if dialogue 
                (print "buck (radio): they haven't seen us. pick a target. take it out."))
            (sleep (ai_play_line ai_buck sc140_0080))
            (ai_dialogue_enable true)
        )
    )
    (sleep 10)
    (sleep_until (> (ai_combat_status "cell1a_group") 3) 5)
    (sleep 30)
    (ai_dialogue_enable false)
    (if dialogue 
        (print "buck (radio): that did it! shoot and scoot!"))
    (sleep (ai_play_line ai_buck sc140_0090))
    (ai_dialogue_enable true)
    (sleep 10)
    (ai_disregard ai_buck false)
    (set g_music_sc140_01 false)
    (ai_suppress_combat ai_buck false)
    (wake md_020_cell_1a_turret)
)

(script dormant void md_020_cell_1a_turret
    (sleep 90)
    (if (> (ai_in_vehicle_count "1a_turret01") 0) 
        (begin
            (if debug 
                (print "mission dialogue:020:cell:1a:turret"))
            (sleep 1)
            (ai_dialogue_enable false)
            (if dialogue 
                (print "buck (radio): i'll draw that turret's fire! when it turns, kill the operator!"))
            (sleep (ai_play_line ai_buck sc140_0100))
            (ai_dialogue_enable true)
            (sleep 10)
        )
    )
)

(script dormant void md_020_cell_1a_alt
    (if debug 
        (print "mission dialogue:020:cell:1a:alt"))
    (sleep 1)
    (ai_dialogue_enable false)
    (if dialogue 
        (print "buck (radio): romeo! phantom! landing on the pad!"))
    (sleep (ai_play_line ai_buck sc140_0120))
    (ai_dialogue_enable true)
    (set g_music_sc140_02 true)
    (sleep 600)
    (ai_dialogue_enable false)
    (if dialogue 
        (print "buck (radio): come on, romeo! push on through these doors!"))
    (sleep (ai_play_line ai_buck sc140_0130))
    (ai_dialogue_enable true)
    (sleep 10)
)

(script dormant void md_030_cell_1b
    (sleep_until (volume_test_players "cell_1b_md01_vol") 5)
    (if debug 
        (print "mission dialogue:030:cell:1b"))
    (if (> (ai_living_count "cell1b_carbine_group") 0) 
        (begin
            (sleep 1)
            (ai_dialogue_enable false)
            (if dialogue 
                (print "buck (radio): jackals with carbines up top! watch yourself!"))
            (sleep (ai_play_line ai_buck sc140_0140))
            (ai_dialogue_enable true)
        )
    )
    (set g_music_sc140_03 true)
    (sleep 900)
    (if (volume_test_players "cell_1b_md02_vol") 
        (begin
            (if (> (ai_living_count "cell1b_carbine_group") 0) 
                (begin
                    (ai_dialogue_enable false)
                    (if dialogue 
                        (print "buck (radio): c'mon, romeo! we gotta kill those jackals!"))
                    (sleep (ai_play_line ai_buck sc140_0150))
                    (ai_dialogue_enable true)
                    (sleep 10)
                ) (begin
                    (ai_dialogue_enable false)
                    (if dialogue 
                        (print "buck (radio): upper level! let's move!"))
                    (sleep (ai_play_line ai_buck sc140_0170))
                    (ai_dialogue_enable true)
                    (sleep 10)
                )
            )
        )
    )
    (sleep 900)
    (sleep_until 
        (and
            (volume_test_players "cell_1b_md02_vol")
            (< (ai_living_count "cell1b_carbine_group") 1)
        )
    )
    (ai_dialogue_enable false)
    (if dialogue 
        (print "buck (radio): come on, romeo! up those steps!"))
    (sleep (ai_play_line ai_buck sc140_0180))
    (ai_dialogue_enable true)
    (sleep 10)
)

(script dormant void md_040_cell_lobby
    (if debug 
        (print "mission dialogue:040:cell:lobby"))
    (sleep 60)
    (ai_dialogue_enable false)
    (if dialogue 
        (print "dutch (radio, static): rooftop, northeast of your location!"))
    (sleep (ai_play_line_on_object none sc140_0200))
    (set g_music_sc140_02 false)
    (set g_music_sc140_03 false)
    (set g_music_sc140_04 false)
    (set g_music_sc140_05 true)
    (sleep 10)
    (if dialogue 
        (print "buck (radio): stay put, dutch! we'll come to you! "))
    (sleep (ai_play_line ai_buck sc140_0210))
    (ai_dialogue_enable true)
    (sleep_until (volume_test_players "lobby_md01_vol"))
    (ai_dialogue_enable false)
    (if dialogue 
        (print "buck (radio): grab some ammo, romeo. these boys won't need it…"))
    (sleep (ai_play_line ai_buck sc140_0240))
    (ai_dialogue_enable true)
    (sleep 10)
)

(script dormant void md_050_cell_2a
    (sleep_until (volume_test_players "cell_2a_md01_vol") 1)
    (if debug 
        (print "mission dialogue:050:cell:2a"))
    (sleep_until (volume_test_objects "cell_2a_md01_vol" (ai_actors "buck")) 1 300)
    (sleep 60)
    (if (< (ai_combat_status "cell2a_group") 2) 
        (begin
            (ai_dialogue_enable false)
            (if dialogue 
                (print "buck (radio): sniper! twelve o'clock high!"))
            (sleep (ai_play_line ai_buck sc140_0250))
        )
    )
    (if (< (ai_combat_status "cell2a_group") 2) 
        (begin
            (if dialogue 
                (print "buck (radio): you go loud, you make sure you drop him!"))
            (sleep (ai_play_line ai_buck sc140_0260))
            (ai_dialogue_enable true)
            (sleep 10)
        )
    )
    (sleep_until 
        (or
            (> (ai_combat_status "cell2a_group") 2)
            (= g_2a_obj_control 1)
        ) 
    5)
    (if (< g_2a_obj_control 1) 
        (begin
            (sleep 30)
            (ai_dialogue_enable false)
            (if dialogue 
                (print "buck (radio): more of 'em! go to work!"))
            (sleep (ai_play_line ai_buck sc140_0270))
            (ai_dialogue_enable true)
        )
    )
    (sleep_until 
        (or
            (< (ai_living_count "cell2a_jackals") 3)
            (= g_2a_obj_control 1)
        ) 
    5)
    (sleep 120)
    (ai_dialogue_enable false)
    (if dialogue 
        (print "buck (radio): jetpack brutes! we gotta step it up!"))
    (sleep (ai_play_line ai_buck sc140_0280))
    (ai_dialogue_enable true)
    (sleep 10)
)

(script dormant void md_050_cell_2a_post
    (sleep_until (< (ai_living_count "cell2a_group") 1))
    (sleep 600)
    (if debug 
        (print "mission dialogue:050:cell:2a:post"))
    (sleep 1)
    (ai_dialogue_enable false)
    (if dialogue 
        (print "buck (radio): keep pressing! stay mobile!"))
    (sleep (ai_play_line ai_buck sc140_0290))
    (ai_dialogue_enable true)
    (sleep 1200)
    (ai_dialogue_enable false)
    (if dialogue 
        (print "buck (radio): move your ass, romeo! let's go!"))
    (sleep (ai_play_line ai_buck sc140_0300))
    (ai_dialogue_enable true)
    (sleep 10)
)

(script dormant void md_050_cell_2b_post
    (sleep_until (volume_test_players "cell_2b_md01_vol") 5)
    (if debug 
        (print "mission dialogue:050:cell:2b:post"))
    (sleep 1)
    (ai_dialogue_enable false)
    (if dialogue 
        (print "dutch (radio): gunny, you read me? we found a way for you to cross to our position!"))
    (sleep (ai_play_line_on_object none sc140_0360))
    (ai_dialogue_enable true)
    (sleep 10)
    (ai_dialogue_enable false)
    (if dialogue 
        (print "buck (radio): affirmative. we'll be right there!"))
    (sleep (ai_play_line ai_buck sc140_0370))
    (ai_dialogue_enable true)
    (sleep 10)
    (set g_music_sc140_06 false)
)

(script command_script void cs_buck_run_old
    (cs_enable_pathfinding_failsafe true)
    (cs_go_to "marine_banshee_script_run/p0")
    (cs_go_to "marine_banshee_script_run/p1")
    (cs_go_to "marine_banshee_script_run/p2")
    (cs_go_to "marine_banshee_script_run/p3")
)

(script dormant void md_070_cell_banshee_platform
    (sleep_until (volume_test_players "cell_2b_md02_vol") 5)
    (sleep_until (< (ai_living_count "gr_landing_pad") 1) 5 900)
    (if debug 
        (print "mission dialogue:070:cell:banshee:platform"))
    (vs_enable_pathfinding_failsafe ai_buck true)
    (vs_enable_moving ai_buck false)
    (sleep 1)
    (vs_go_to ai_buck true "marine_banshee_script_run/p0")
    (vs_action ai_buck true "marine_banshee_script_run/p4" 13)
    (ai_dialogue_enable false)
    (if dialogue 
        (print "romeo (helmet): well that looks safe!!!"))
    (ai_player_dialogue_enable false)
    (sound_impulse_start "sound\dialog\atlas\sc140\mission\sc140_0400_rom" none 1.0)
    (sleep (sound_impulse_language_time "sound\dialog\atlas\sc140\mission\sc140_0400_rom"))
    (ai_player_dialogue_enable true)
    (sleep 10)
    (if dialogue 
        (print "buck (radio): what? you afraid of heights? come on!"))
    (sleep (ai_play_line ai_buck sc140_0410))
    (sleep 90)
    (if dialogue 
        (print "buck (radio): let's go, romeo! follow me!"))
    (sleep (ai_play_line ai_buck sc140_0420))
    (ai_dialogue_enable true)
    (vs_go_to ai_buck false "marine_banshee_script_run/p1")
    (vs_go_to ai_buck false "marine_banshee_script_run/p2")
    (sleep 300)
    (if (not (volume_test_players "construction_md03_vol")) 
        (begin
            (ai_dialogue_enable false)
            (if dialogue 
                (print "buck (radio): romeo! jump down, hustle to the other side!"))
            (sleep (ai_play_line_on_object none sc140_0430))
            (ai_dialogue_enable true)
            (sleep 10)
        )
    )
    (vs_go_to ai_buck true "marine_banshee_script_run/p5")
    (ai_set_objective "buck" "marine_banshee_obj")
    (vs_release_all)
)

(script dormant void md_070_cell_banshee_plat_end
    (sleep_until (volume_test_players "construction_md01_vol") 5)
    (sleep_forever md_070_cell_banshee_platform)
    (ai_set_objective "buck" "marine_banshee_obj")
)

(script dormant void md_070_cell_banshee_bridge
    (if debug 
        (print "mission dialogue:070:cell:banshee:bridge"))
    (if 
        (and
            (volume_test_objects "construction_md03_vol" (ai_actors "buck"))
            (volume_test_players "construction_md03_vol")
        ) 
            (begin
                (ai_dialogue_enable true)
                (if dialogue 
                    (print "romeo (radio): to our left! banshees fast and low!"))
                (ai_player_dialogue_enable false)
                (sound_impulse_start "sound\dialog\atlas\sc140\mission\sc140_0450_rom" none 1.0)
                (sleep (sound_impulse_language_time "sound\dialog\atlas\sc140\mission\sc140_0450_rom"))
                (ai_player_dialogue_enable true)
                (sleep 10)
                (if dialogue 
                    (print "buck (radio): agreed! go, go, go!"))
                (sleep (ai_play_line ai_buck sc140_0470))
                (sleep 10)
                (ai_dialogue_enable false)
            )
    )
)

(script dormant void md_080_cell_construction_site
    (sleep_until 
        (and
            (<= (ai_living_count "gr_landing_pad_mob") 1)
            (volume_test_players "construction_md02_vol")
        ) 
    5)
    (if debug 
        (print "mission dialogue:080:cell:construction:site"))
    (sleep 1)
    (ai_dialogue_enable false)
    (if dialogue 
        (print "buck (radio): what's your status?"))
    (sleep (ai_play_line ai_buck sc140_0480))
    (sleep 10)
    (if dialogue 
        (print "dutch (radio): bird's wasted. lost our pilot on impact. rest of us are fine."))
    (sleep (ai_play_line_on_object none sc140_0490))
    (sleep 10)
    (if dialogue 
        (print "mickey (radio): not for longï¿½ phantoms inbound!"))
    (sleep (ai_play_line_on_object none sc140_0500))
    (sleep 10)
    (if dialogue 
        (print "romeo: why am i not surprised?"))
    (ai_player_dialogue_enable false)
    (sound_impulse_start "sound\dialog\atlas\sc140\mission\sc140_0505_rom" none 1.0)
    (sleep (sound_impulse_language_time "sound\dialog\atlas\sc140\mission\sc140_0505_rom"))
    (ai_player_dialogue_enable true)
    (set g_music_sc140_07 true)
    (sleep 10)
    (if dialogue 
        (print "buck (radio): pick a turret, romeo! conserve your ammo!"))
    (sleep (ai_play_line ai_buck sc140_0510))
    (sleep 10)
    (ai_dialogue_enable true)
    (game_save)
)

(script dormant void md_090_construction_left
    (ai_dialogue_enable false)
    (if dialogue 
        (print "buck (radio): phantom! coming-in left!"))
    (sleep (ai_play_line ai_buck sc140_0530))
    (ai_dialogue_enable true)
    (sleep 10)
)

(script dormant void md_090_construction_right
    (ai_dialogue_enable false)
    (if dialogue 
        (print "buck (radio): phantom to our right!"))
    (sleep (ai_play_line ai_buck sc140_0540))
    (ai_dialogue_enable true)
    (sleep 10)
)

(script dormant void md_090_construction_center
    (ai_dialogue_enable false)
    (if dialogue 
        (print "buck (radio): phantom! dead ahead!"))
    (sleep (ai_play_line ai_buck sc140_0550))
    (ai_dialogue_enable true)
    (sleep 10)
)

(script dormant void md_090_construction_lower
    (ai_dialogue_enable false)
    (if dialogue 
        (print "buck (radio): hostiles, lower level! clear 'em out!"))
    (sleep (ai_play_line ai_buck sc140_0570))
    (ai_dialogue_enable true)
    (sleep 10)
)

(script dormant void md_090_construction_more
    (ai_dialogue_enable false)
    (if dialogue 
        (print "dutch (radio): more phantoms! hit 'em hard!"))
    (sleep (ai_play_line ai_dutch sc140_0580))
    (ai_dialogue_enable true)
    (sleep 10)
)

(script dormant void md_090_construction_jetpack
    (ai_dialogue_enable false)
    (if dialogue 
        (print "buck (radio): jetpacks! take 'em down!"))
    (sleep (ai_play_line ai_buck sc140_0600))
    (ai_dialogue_enable true)
    (sleep 10)
)

(script dormant void md_090_construction_halfway
    (sleep_until (< (ai_strength "wave06_infantry_group") 0.6) 5)
    (ai_dialogue_enable false)
    (if dialogue 
        (print "buck (radio): pour it on! we're almost through this!"))
    (sleep (ai_play_line ai_buck sc140_0630))
    (ai_dialogue_enable true)
)

(script dormant void md_090_construction_finished
    (if (volume_test_players "construction_md04_vol") 
        (sleep 240) (begin
            (ai_dialogue_enable false)
            (if dialogue 
                (print "buck (radio): that's the last of 'em! everyone come up top!"))
            (sleep (ai_play_line ai_buck sc140_0640))
            (ai_dialogue_enable true)
        )
    )
)

(script dormant void md_090_construction_chieftain
    (ai_dialogue_enable false)
    (if dialogue 
        (print "dutch (radio): we got one more phantom, gunny!"))
    (sleep (ai_play_line ai_dutch sc140_0650))
    (sleep 10)
    (if dialogue 
        (print "buck (radio): look out! chieftain!"))
    (sleep (ai_play_line ai_buck sc140_0660))
    (ai_dialogue_enable true)
)

(script dormant void ambient_air_cell1
    (sleep_until 
        (begin
            (set random_point_a (random_range 0 2))
            (if (= random_point_a 0) 
                (begin
                    (ai_place "ambient_phantom01/pilot")
                    (ai_cannot_die "ambient_phantom01" true)
                    (object_cannot_take_damage (ai_vehicle_get_from_starting_location "ambient_phantom01/pilot"))
                    (ambient_track "ambient_phantom01/pilot" "background_air_a/p0a" "background_air_a/p0b" "background_air_a/p0c")
                    (cs_run_command_script "ambient_phantom01/pilot" cs_ambient_path_a)
                    (sleep_until (not (cs_command_script_running "ambient_phantom01/pilot" cs_ambient_path_a)) 5)
                    (ai_erase "ambient_phantom01")
                ) (begin
                    (ai_place "ambient_phantom01/pilot")
                    (ai_cannot_die "ambient_phantom01" true)
                    (object_cannot_take_damage (ai_vehicle_get_from_starting_location "ambient_phantom01/pilot"))
                    (ambient_track "ambient_phantom01/pilot" "background_air_a/p3a" "background_air_a/p3b" "background_air_a/p3c")
                    (cs_run_command_script "ambient_phantom01/pilot" cs_ambient_path_b)
                    (sleep_until (not (cs_command_script_running "ambient_phantom01/pilot" cs_ambient_path_b)) 5)
                    (ai_erase "ambient_phantom01")
                )
            )
            (random_range 150 450)
        )
    )
)

(script dormant void ambient_air_cell2
    (sleep_until 
        (begin
            (set random_point_a (random_range 0 2))
            (if (= random_point_a 0) 
                (begin
                    (ai_place "ambient_phantom02/pilot")
                    (ai_cannot_die "ambient_phantom02" true)
                    (object_cannot_take_damage (ai_vehicle_get_from_starting_location "ambient_phantom02/pilot"))
                    (ambient_track "ambient_phantom02/pilot" "background_air_b/p0a" "background_air_b/p0b" "background_air_b/p0c")
                    (cs_run_command_script "ambient_phantom02/pilot" cs_ambient_path_c)
                    (sleep_until (not (cs_command_script_running "ambient_phantom02/pilot" cs_ambient_path_c)) 5)
                    (ai_erase "ambient_phantom02")
                ) (begin
                    (ai_place "ambient_phantom02/pilot")
                    (ai_cannot_die "ambient_phantom02" true)
                    (object_cannot_take_damage (ai_vehicle_get_from_starting_location "ambient_phantom02/pilot"))
                    (ambient_track "ambient_phantom02/pilot" "background_air_b/p3a" "background_air_b/p3b" "background_air_b/p3c")
                    (cs_run_command_script "ambient_phantom02/pilot" cs_ambient_path_d)
                    (sleep_until (not (cs_command_script_running "ambient_phantom02/pilot" cs_ambient_path_d)) 5)
                    (ai_erase "ambient_phantom02")
                )
            )
            (random_range 150 450)
        )
    )
)

(script static void ambient_track (ai vehicle_starting_location, point_reference pt1, point_reference pt2, point_reference pt3)
    (set v_ambient_air01 (ai_vehicle_get_from_starting_location vehicle_starting_location))
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (object_teleport_to_ai_point v_ambient_air01 pt1)
        )
        ((= random_point_a 1)
            (object_teleport_to_ai_point v_ambient_air01 pt2)
        )
        ((= random_point_a 2)
            (object_teleport_to_ai_point v_ambient_air01 pt3)
        )
    )
)

(script command_script void cs_ambient_path_a
    (cs_enable_pathfinding_failsafe true)
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_vehicle_speed 0.5)
        )
        ((= random_point_a 1)
            (cs_vehicle_speed 0.7)
        )
        ((= random_point_a 2)
            (cs_vehicle_speed 1.0)
        )
    )
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_fly_by "background_air_a/p1a" 4.0)
        )
        ((= random_point_a 1)
            (cs_fly_by "background_air_a/p1b" 4.0)
        )
        ((= random_point_a 2)
            (cs_fly_by "background_air_a/p1c" 4.0)
        )
    )
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_vehicle_speed 0.4)
        )
        ((= random_point_a 1)
            (cs_vehicle_speed 0.6)
        )
        ((= random_point_a 2)
            (cs_vehicle_speed 0.8)
        )
    )
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_fly_by "background_air_a/p2a" 4.0)
        )
        ((= random_point_a 1)
            (cs_fly_by "background_air_a/p2b" 4.0)
        )
        ((= random_point_a 2)
            (cs_fly_by "background_air_a/p2c" 4.0)
        )
    )
    (cs_vehicle_speed 1.0)
    (cs_vehicle_boost true)
    (cs_fly_to "background_air_a/p3a" 10.0)
)

(script command_script void cs_ambient_path_b
    (cs_enable_pathfinding_failsafe true)
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_vehicle_speed 0.5)
        )
        ((= random_point_a 1)
            (cs_vehicle_speed 0.7)
        )
        ((= random_point_a 2)
            (cs_vehicle_speed 1.0)
        )
    )
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_fly_by "background_air_a/p2a" 4.0)
        )
        ((= random_point_a 1)
            (cs_fly_by "background_air_a/p2b" 4.0)
        )
        ((= random_point_a 2)
            (cs_fly_by "background_air_a/p2c" 4.0)
        )
    )
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_vehicle_speed 0.4)
        )
        ((= random_point_a 1)
            (cs_vehicle_speed 0.6)
        )
        ((= random_point_a 2)
            (cs_vehicle_speed 0.8)
        )
    )
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_fly_by "background_air_a/p1a" 4.0)
        )
        ((= random_point_a 1)
            (cs_fly_by "background_air_a/p1b" 4.0)
        )
        ((= random_point_a 2)
            (cs_fly_by "background_air_a/p1c" 4.0)
        )
    )
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_vehicle_speed 0.4)
        )
        ((= random_point_a 1)
            (cs_vehicle_speed 0.6)
        )
        ((= random_point_a 2)
            (cs_vehicle_speed 0.8)
        )
    )
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_fly_by "background_air_a/p0a" 4.0)
        )
        ((= random_point_a 1)
            (cs_fly_by "background_air_a/p0b" 4.0)
        )
        ((= random_point_a 2)
            (cs_fly_by "background_air_a/p0c" 4.0)
        )
    )
)

(script command_script void cs_ambient_path_c
    (cs_enable_pathfinding_failsafe true)
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_vehicle_speed 0.5)
        )
        ((= random_point_a 1)
            (cs_vehicle_speed 0.7)
        )
        ((= random_point_a 2)
            (cs_vehicle_speed 1.0)
        )
    )
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_fly_by "background_air_b/p1a" 4.0)
        )
        ((= random_point_a 1)
            (cs_fly_by "background_air_b/p1b" 4.0)
        )
        ((= random_point_a 2)
            (cs_fly_by "background_air_b/p1c" 4.0)
        )
    )
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_vehicle_speed 0.4)
        )
        ((= random_point_a 1)
            (cs_vehicle_speed 0.6)
        )
        ((= random_point_a 2)
            (cs_vehicle_speed 0.8)
        )
    )
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_fly_by "background_air_b/p2a" 4.0)
        )
        ((= random_point_a 1)
            (cs_fly_by "background_air_b/p2b" 4.0)
        )
        ((= random_point_a 2)
            (cs_fly_by "background_air_b/p2c" 4.0)
        )
    )
    (cs_vehicle_speed 1.0)
    (cs_vehicle_boost true)
    (cs_fly_to "background_air_b/p3a" 10.0)
)

(script command_script void cs_ambient_path_d
    (cs_enable_pathfinding_failsafe true)
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_vehicle_speed 0.5)
        )
        ((= random_point_a 1)
            (cs_vehicle_speed 0.7)
        )
        ((= random_point_a 2)
            (cs_vehicle_speed 1.0)
        )
    )
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_fly_by "background_air_b/p2a" 4.0)
        )
        ((= random_point_a 1)
            (cs_fly_by "background_air_b/p2b" 4.0)
        )
        ((= random_point_a 2)
            (cs_fly_by "background_air_b/p2c" 4.0)
        )
    )
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_vehicle_speed 0.4)
        )
        ((= random_point_a 1)
            (cs_vehicle_speed 0.6)
        )
        ((= random_point_a 2)
            (cs_vehicle_speed 0.8)
        )
    )
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_fly_by "background_air_b/p1a" 4.0)
        )
        ((= random_point_a 1)
            (cs_fly_by "background_air_b/p1b" 4.0)
        )
        ((= random_point_a 2)
            (cs_fly_by "background_air_b/p1c" 4.0)
        )
    )
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_vehicle_speed 0.4)
        )
        ((= random_point_a 1)
            (cs_vehicle_speed 0.6)
        )
        ((= random_point_a 2)
            (cs_vehicle_speed 0.8)
        )
    )
    (set random_point_a (random_range 0 3))
    (cond
        ((= random_point_a 0)
            (cs_fly_by "background_air_b/p0a" 4.0)
        )
        ((= random_point_a 1)
            (cs_fly_by "background_air_b/p0b" 4.0)
        )
        ((= random_point_a 2)
            (cs_fly_by "background_air_b/p0c" 4.0)
        )
    )
)

(script static void s_camera01
    (vehicle_auto_turret "v_super_cam_01" "tv_camera1" 0.0 0.0 0.0)
)

(script static void s_camera02
    (vehicle_auto_turret "v_super_cam_02" "tv_camera2" 0.0 0.0 0.0)
)

(script static void s_camera03
    (vehicle_auto_turret "v_super_cam_03" "tv_camera3" 0.0 0.0 0.0)
)

(script dormant void sc140_fp_dialog_check
    (sleep_until 
        (and
            (<= (object_get_health (player0)) 0.0)
            (<= (object_get_health (player1)) 0.0)
            (<= (object_get_health (player2)) 0.0)
            (<= (object_get_health (player3)) 0.0)
        ) 
    5)
    (sound_impulse_stop "sound\dialog\atlas\sc140\mission\sc140_0020_rom")
    (sound_impulse_stop "sound\dialog\atlas\sc140\mission\sc140_0045_rom")
    (sound_impulse_stop "sound\dialog\atlas\sc140\mission\sc140_0060_rom")
    (sound_impulse_stop "sound\dialog\atlas\sc140\mission\sc140_0400_rom")
    (sound_impulse_stop "sound\dialog\atlas\sc140\mission\sc140_0450_rom")
    (sound_impulse_stop "sound\dialog\atlas\sc140\mission\sc140_0505_rom")
)

(script dormant void sc140_insertion_stub
    (if debug 
        (print "sc140 insertion stub"))
)

(script static void ins_level_start
    (if (!= (current_zone_set) g_set_all) 
        (begin
            (if debug 
                (print "switching zone sets..."))
            (switch_zone_set "sc140_000_cinematic")
            (sleep 1)
        )
    )
    (set g_insertion_index 1)
)

(script static void ins_cell_1a
    (set g_insertion_index 2)
    (if (!= (current_zone_set) g_set_all) 
        (begin
            (if debug 
                (print "switching zone sets..."))
            (switch_zone_set "sc140_000_010_030")
            (sleep 1)
        )
    )
    (if debug 
        (print "teleporting players to highway..."))
    (object_teleport (player0) "cell_1a_point01")
    (object_teleport (player1) "cell_1a_point02")
    (object_teleport (player2) "cell_1a_point03")
    (object_teleport (player3) "cell_1a_point04")
    (player0_set_pitch -12.0 0)
    (player1_set_pitch -12.0 0)
    (player2_set_pitch -12.0 0)
    (player3_set_pitch -12.0 0)
    (unit_add_equipment (player0) "insertion_profile" true true)
    (unit_add_equipment (player1) "insertion_profile" true true)
    (unit_add_equipment (player2) "insertion_profile" true true)
    (unit_add_equipment (player3) "insertion_profile" true true)
    (sleep 5)
    (wake obj_find_set)
    (set g_intro_obj_control 10)
)

(script static void ins_cell_1b
    (set g_insertion_index 3)
    (if (!= (current_zone_set) g_set_all) 
        (begin
            (if debug 
                (print "switching zone sets..."))
            (switch_zone_set "sc140_000_010_030")
            (sleep 1)
        )
    )
    (if debug 
        (print "teleporting players..."))
    (device_set_power "sc140_door_00" 0.0)
    (object_teleport (player0) "cell_1b_point01")
    (object_teleport (player1) "cell_1b_point02")
    (object_teleport (player2) "cell_1b_point03")
    (object_teleport (player3) "cell_1b_point04")
    (player0_set_pitch -12.0 0)
    (player1_set_pitch -12.0 0)
    (player2_set_pitch -12.0 0)
    (player3_set_pitch -12.0 0)
    (unit_add_equipment (player0) "insertion_profile" true true)
    (unit_add_equipment (player1) "insertion_profile" true true)
    (unit_add_equipment (player2) "insertion_profile" true true)
    (unit_add_equipment (player3) "insertion_profile" true true)
    (sleep 5)
    (set g_intro_obj_control 10)
    (set g_1a_obj_control 10)
    (print "placing buck02")
    (ai_place "buck/actor02")
    (set obj_buck (ai_get_object "buck/actor02"))
    (set ai_buck "buck/actor02")
    (ai_cannot_die ai_buck true)
    (ai_force_active "buck/actor02" true)
    (chud_show_ai_navpoint "buck" "buck" true 0.1)
    (ai_set_objective "buck" "marine01b_obj")
    (wake obj_find_set)
    (flock_create "banshee01_flock")
    (flock_create "banshee02_flock")
    (sleep 1)
    (flock_start "banshee01_flock")
    (flock_start "banshee02_flock")
    (sleep 30)
    (wake ambient_air_cell1)
    (cinematic_snap_from_black)
    (game_save_immediate)
)

(script static void ins_bridge
    (set g_insertion_index 4)
    (if (!= (current_zone_set) g_set_all) 
        (begin
            (if debug 
                (print "switching zone sets..."))
            (switch_zone_set "sc140_010_020_030")
            (sleep 1)
        )
    )
    (if debug 
        (print "teleporting players..."))
    (device_set_power "sc140_door_14" 0.0)
    (object_teleport (player0) "cell_bridge_point01")
    (object_teleport (player1) "cell_bridge_point02")
    (object_teleport (player2) "cell_bridge_point03")
    (object_teleport (player3) "cell_bridge_point04")
    (player0_set_pitch -12.0 0)
    (player1_set_pitch -12.0 0)
    (player2_set_pitch -12.0 0)
    (player3_set_pitch -12.0 0)
    (unit_add_equipment (player0) "insertion_profile" true true)
    (unit_add_equipment (player1) "insertion_profile" true true)
    (unit_add_equipment (player2) "insertion_profile" true true)
    (unit_add_equipment (player3) "insertion_profile" true true)
    (sleep 5)
    (set g_intro_obj_control 10)
    (set g_1a_obj_control 10)
    (set g_1b_obj_control 10)
    (print "placing buck03")
    (ai_place "buck/actor03")
    (set ai_buck "buck/actor03")
    (set obj_buck (ai_get_object "buck/actor03"))
    (ai_cannot_die ai_buck true)
    (ai_force_active "buck/actor03" true)
    (chud_show_ai_navpoint "buck" "buck" true 0.1)
    (ai_set_objective "buck" "marinelobby_obj")
    (wake obj_find_set)
    (set g_music_sc140_05 true)
    (flock_create "banshee01_flock")
    (flock_create "banshee02_flock")
    (sleep 1)
    (flock_start "banshee01_flock")
    (flock_start "banshee02_flock")
    (sleep 30)
    (cinematic_snap_from_black)
    (game_save_immediate)
)

(script static void ins_cell_2a
    (set g_insertion_index 5)
    (if (!= (current_zone_set) g_set_all) 
        (begin
            (if debug 
                (print "switching zone sets..."))
            (switch_zone_set "sc140_010_020_030")
            (sleep 1)
        )
    )
    (if debug 
        (print "teleporting players..."))
    (object_teleport (player0) "cell_2a_point01")
    (object_teleport (player1) "cell_2a_point02")
    (object_teleport (player2) "cell_2a_point03")
    (object_teleport (player3) "cell_2a_point04")
    (player0_set_pitch -12.0 0)
    (player1_set_pitch -12.0 0)
    (player2_set_pitch -12.0 0)
    (player3_set_pitch -12.0 0)
    (unit_add_equipment (player0) "insertion_profile" true true)
    (unit_add_equipment (player1) "insertion_profile" true true)
    (unit_add_equipment (player2) "insertion_profile" true true)
    (unit_add_equipment (player3) "insertion_profile" true true)
    (sleep 5)
    (wake obj_find_set)
    (sleep 1)
    (set g_intro_obj_control 10)
    (set g_1a_obj_control 10)
    (set g_1b_obj_control 10)
    (set g_bridge_obj_control 10)
)

(script static void ins_cell_2b
    (set g_insertion_index 6)
    (if (!= (current_zone_set) g_set_all) 
        (begin
            (if debug 
                (print "switching zone sets..."))
            (switch_zone_set "sc140_010_020_030")
            (sleep 1)
        )
    )
    (device_set_power "sc140_door_18" 0.0)
    (object_teleport (player0) "cell_2b_point01")
    (object_teleport (player1) "cell_2b_point02")
    (object_teleport (player2) "cell_2b_point03")
    (object_teleport (player3) "cell_2b_point04")
    (player0_set_pitch -12.0 0)
    (player1_set_pitch -12.0 0)
    (player2_set_pitch -12.0 0)
    (player3_set_pitch -12.0 0)
    (unit_add_equipment (player0) "insertion_profile" true true)
    (unit_add_equipment (player1) "insertion_profile" true true)
    (unit_add_equipment (player2) "insertion_profile" true true)
    (unit_add_equipment (player3) "insertion_profile" true true)
    (sleep 5)
    (print "placing buck04")
    (ai_place "buck/actor04")
    (set g_intro_obj_control 10)
    (set g_1a_obj_control 10)
    (set g_1b_obj_control 10)
    (set g_bridge_obj_control 10)
    (set g_2a_obj_control 10)
    (set ai_buck "buck/actor04")
    (set obj_buck (ai_get_object "buck/actor04"))
    (ai_cannot_die ai_buck true)
    (ai_force_active "buck/actor04" true)
    (chud_show_ai_navpoint "buck" "buck" true 0.1)
    (ai_set_objective "buck" "marine02b_obj")
    (wake obj_find_set)
    (flock_create "banshee01_flock")
    (flock_create "banshee02_flock")
    (sleep 1)
    (flock_start "banshee01_flock")
    (flock_start "banshee02_flock")
    (sleep 30)
    (wake ambient_air_cell2)
    (cinematic_snap_from_black)
    (game_save_immediate)
)

(script static void ins_banshee_fight
    (set g_insertion_index 7)
    (if (!= (current_zone_set) g_set_all) 
        (begin
            (if debug 
                (print "switching zone sets..."))
            (switch_zone_set "sc140_020_cinematic")
            (sleep 1)
        )
    )
    (if debug 
        (print "teleporting players..."))
    (device_set_power "sc140_door_23" 0.0)
    (object_teleport (player0) "banshee_point01")
    (object_teleport (player1) "banshee_point02")
    (object_teleport (player2) "banshee_point03")
    (object_teleport (player3) "banshee_point04")
    (player0_set_pitch -12.0 0)
    (player1_set_pitch -12.0 0)
    (player2_set_pitch -12.0 0)
    (player3_set_pitch -12.0 0)
    (unit_add_equipment (player0) "insertion_profile" true true)
    (unit_add_equipment (player1) "insertion_profile" true true)
    (unit_add_equipment (player2) "insertion_profile" true true)
    (unit_add_equipment (player3) "insertion_profile" true true)
    (sleep 5)
    (print "placing buck05")
    (ai_place "buck/actor05")
    (set g_intro_obj_control 10)
    (set g_1a_obj_control 10)
    (set g_1b_obj_control 10)
    (set g_bridge_obj_control 10)
    (set g_2a_obj_control 10)
    (set g_2b_obj_control 10)
    (set ai_buck "buck/actor05")
    (set obj_buck (ai_get_object "buck/actor05"))
    (ai_cannot_die ai_buck true)
    (ai_force_active "buck/actor05" true)
    (chud_show_ai_navpoint "buck" "buck" true 0.1)
    (ai_set_objective "buck" "marine_banshee_obj")
    (cinematic_snap_from_black)
    (game_save_immediate)
    (wake obj_defend_set)
    (sleep 1)
)

(script continuous void achieveiment_vandalized
    (if (= (volume_test_object "face_trigger_volume" (player0)) true) 
        (begin
            (print "player 0 has arrived at face doodle easter egg")
            (player_check_for_location_achievement 0 "_achievement_ace_vandalized")
        )
    )
    (if (= (volume_test_object "face_trigger_volume" (player1)) true) 
        (begin
            (print "player 1 has arrived at face doodle easter egg")
            (player_check_for_location_achievement 1 "_achievement_ace_vandalized")
        )
    )
    (if (= (volume_test_object "face_trigger_volume" (player2)) true) 
        (begin
            (print "player 2 has arrived at face doodle easter egg")
            (player_check_for_location_achievement 2 "_achievement_ace_vandalized")
        )
    )
    (if (= (volume_test_object "face_trigger_volume" (player3)) true) 
        (begin
            (print "player 3 has arrived at face doodle easter egg")
            (player_check_for_location_achievement 3 "_achievement_ace_vandalized")
        )
    )
)

(script startup void sc140_startup
    (wake sur_kill_vol_disable)
    (fade_out 0.0 0.0 0.0 0)
    (if 
        (and
            (not editor)
            (> (player_count) 0)
        ) 
            (start) (fade_in 0.0 0.0 0.0 0))
)

(script static void start
    (if (not (campaign_survival_enabled)) 
        (wake sc140_mission))
    (cond
        ((= (game_insertion_point_get) 0)
            (ins_level_start)
        )
        ((= (game_insertion_point_get) 1)
            (ins_cell_1b)
        )
        ((= (game_insertion_point_get) 2)
            (ins_bridge)
        )
        ((= (game_insertion_point_get) 3)
            (ins_cell_2b)
        )
        ((= (game_insertion_point_get) 4)
            (ins_banshee_fight)
        )
        ((= (game_insertion_point_get) 5)
            (wake sc140_survival_mode)
        )
    )
)

(script dormant void sc140_mission
    (if debug 
        (print "sc140 mission script") (print "no debug"))
    (ai_allegiance human player)
    (ai_allegiance player human)
    (pda_set_active_pda_definition "sc140")
    (wake sc140_fp_dialog_check)
    (wake sc_sc140_coop_resume)
    (fade_out 0.0 0.0 0.0 0)
    (wake sc140_end_scene)
    (wake gs_recycle_volumes)
    (wake gs_disposable_ai)
    (wake dutch_fall)
    (wake mickey_fall)
    (wake buck_fall)
    (wake player0_award_tourist)
    (if (coop_players_2) 
        (wake player1_award_tourist))
    (if (coop_players_3) 
        (wake player2_award_tourist))
    (if (coop_players_4) 
        (wake player3_award_tourist))
    (player_set_fourth_wall_enabled (player0) false)
    (player_set_fourth_wall_enabled (player1) false)
    (player_set_fourth_wall_enabled (player2) false)
    (player_set_fourth_wall_enabled (player3) false)
    (wake player0_l00_waypoints)
    (wake player1_l00_waypoints)
    (wake player2_l00_waypoints)
    (wake player3_l00_waypoints)
    (gp_integer_set "gp_current_scene" 140)
    (wake object_management)
    (sleep_until (>= g_insertion_index 1) 1)
    (if (= g_insertion_index 1) 
        (wake enc_intro))
    (sleep_until 
        (or
            (volume_test_players "enc_cell_1a_vol")
            (>= g_insertion_index 2)
        ) 
    1)
    (if (<= g_insertion_index 2) 
        (wake enc_cell_1a))
    (sleep_until 
        (or
            (volume_test_players "enc_cell_1b_vol")
            (>= g_insertion_index 3)
        ) 
    1)
    (if (<= g_insertion_index 3) 
        (wake enc_cell_1b))
    (sleep_until 
        (or
            (volume_test_players "enc_cell_bridge_vol")
            (>= g_insertion_index 4)
        ) 
    1)
    (if (<= g_insertion_index 4) 
        (wake enc_cell_bridge))
    (sleep_until 
        (or
            (volume_test_players "enc_cell_2a_vol")
            (>= g_insertion_index 5)
        ) 
    1)
    (if (<= g_insertion_index 5) 
        (wake enc_cell_2a))
    (sleep_until 
        (or
            (volume_test_players "enc_cell_2b_vol")
            (>= g_insertion_index 6)
        ) 
    1)
    (if (<= g_insertion_index 6) 
        (wake enc_cell_2b))
    (sleep_until 
        (or
            (volume_test_players "enc_banshee_a_vol")
            (>= g_insertion_index 7)
        ) 
    1)
    (if (<= g_insertion_index 7) 
        (wake enc_banshee))
)

(script dormant void enc_intro
    (data_mine_set_mission_segment "sc140_01_enc_intro")
    (print "data_mine_set_mission_segment sc140_01_enc_intro")
    (set s_waypoint_index 1)
    (if (= g_play_cinematics true) 
        (begin
            (if (cinematic_skip_start) 
                (begin
                    (sound_class_set_gain "" 0.0 0)
                    (sound_class_set_gain "mus" 1.0 0)
                    (sound_impulse_start "sound\cinematics\atlas\sc140\foley\sc140_int_11sec_glue" none 1.0)
                    (cinematic_snap_to_black)
                    (if debug 
                        (print "sc140_in_sc"))
                    (sleep 60)
                    (sound_impulse_start "sound\cinematics\atlas\sc140\music\sc140m_int_sc_title" none 1.0)
                    (cinematic_set_title "title_1")
                    (sleep 60)
                    (cinematic_set_title "title_2")
                    (sleep 60)
                    (cinematic_set_title "title_3")
                    (sleep (* 30.0 5.0))
                    (sc140_int_sc)
                )
            )
            (cinematic_skip_stop)
        )
    )
    (sc140_int_sc_cleanup)
    (wake sc140_music_01)
    (wake sc140_music_02)
    (set ai_buck "buck/actor01")
    (sleep 1)
    (flock_create "banshee01_flock")
    (flock_create "banshee02_flock")
    (sleep 1)
    (flock_start "banshee01_flock")
    (flock_start "banshee02_flock")
    (object_create "cine_door")
    (print "placing buck01")
    (ai_place "buck/actor01")
    (set obj_buck (ai_get_object "buck/actor01"))
    (ai_cannot_die ai_buck true)
    (ai_force_active "buck/actor01" true)
    (chud_show_ai_navpoint "buck" "buck" true 0.1)
    (cinematic_snap_from_black)
    (wake md_010_first_pad)
    (s_camera01)
    (sleep 10)
    (object_set_vision_mode_render_default "sc140_door_04" true)
    (object_set_vision_mode_render_default "sc140_door_05" true)
    (object_set_vision_mode_render_default "sc140_door_02" true)
    (wake obj_find_set)
    (sleep_until (volume_test_players "cell_intro_oc_01_vol") 1)
    (if debug 
        (print "set objective control 1"))
    (set g_intro_obj_control 1)
    (sleep_until (volume_test_players "cell_intro_oc_02_vol") 1)
    (if debug 
        (print "set objective control 2"))
    (set g_intro_obj_control 2)
    (sleep_until (volume_test_players "cell_intro_oc_03_vol") 1)
    (if debug 
        (print "set objective control 3"))
    (set g_intro_obj_control 3)
    (game_save)
    (if debug 
        (print "game_save:intro_save"))
)

(script command_script void cs_buck_no_look_hack
    (cs_enable_pathfinding_failsafe true)
    (cs_enable_moving true)
    (ai_disregard (player0) true)
    (sleep 90)
    (cs_look false "buck_f_up/p0")
    (ai_disregard (player0) false)
)

(script dormant void enc_cell_1a
    (data_mine_set_mission_segment "sc140_02_enc_cell_1a")
    (print "data_mine_set_mission_segment sc140_02_enc_cell_1a")
    (set s_waypoint_index 2)
    (ai_place "1a_squad01")
    (ai_place "1a_squad02")
    (ai_place "1a_turret01")
    (wake ambient_air_cell1)
    (ai_suppress_combat ai_buck true)
    (ai_disregard ai_buck true)
    (ai_dialogue_enable false)
    (wake enc_cell_1a_reinf)
    (wake md_020_cell_1a)
    (sleep_until (volume_test_players "cell_1a_oc_01_vol") 1)
    (if debug 
        (print "set objective control 1"))
    (set g_1a_obj_control 1)
    (sleep_until (volume_test_players "cell_1a_oc_02_vol") 1)
    (if debug 
        (print "set objective control 2"))
    (set g_1a_obj_control 2)
    (ai_disregard ai_buck false)
    (ai_suppress_combat ai_buck false)
    (sleep_until (volume_test_players "cell_1a_oc_03_vol") 1)
    (if debug 
        (print "set objective control 3"))
    (set g_1a_obj_control 3)
    (sleep_until (volume_test_players "cell_1a_oc_04_vol") 1)
    (if debug 
        (print "set objective control 4"))
    (set g_1a_obj_control 4)
    (sleep_forever md_020_cell_1a)
    (sleep_forever md_020_cell_1a_turret)
    (ai_dialogue_enable true)
    (ai_player_dialogue_enable true)
    (ai_dialogue_enable true)
    (sleep_until (volume_test_players "enc_cell_1a_vol01") 5)
    (ai_set_objective "buck" "marine01b_obj")
    (sleep_until (< (ai_living_count "cell1a_group") 1) 5)
    (sleep_until (game_safe_to_save) 5)
    (game_save)
    (if debug 
        (print "game_save:cell1a_save"))
)

(script dormant void enc_cell_1a_reinf
    (ai_place "1a_phantom01")
    (set v_1a_phantom01 (ai_vehicle_get_from_starting_location "1a_phantom01/pilot"))
    (sleep_until 
        (or
            (< (ai_living_count "cell1a_group") 7)
            (= g_1a_obj_control 2)
        ) 
    5)
    (cs_run_command_script "1a_phantom01/pilot" cs_1a_phantom_path_a)
    (f_load_phantom v_1a_phantom01 "right" "1a_squad03" "1a_squad04" "1a_squad05" none)
    (sleep_forever md_020_cell_1a_turret)
    (ai_player_dialogue_enable true)
    (ai_dialogue_enable true)
)

(script dormant void enc_cell_1b
    (data_mine_set_mission_segment "sc140_03_enc_cell_1b")
    (print "data_mine_set_mission_segment sc140_03_enc_cell_1b")
    (set s_waypoint_index 3)
    (ai_place "1b_turret01")
    (ai_place "1b_phantom")
    (ai_place "1b_squad04")
    (ai_place "1b_squad05")
    (ai_place "1b_squad06")
    (ai_place "1b_squad07")
    (ai_place "1b_squad02")
    (wake enc_cell_1b_reinf)
    (wake md_030_cell_1b)
    (wake sc140_music_03)
    (wake sc140_music_04)
    (cs_run_command_script "1b_phantom/pilot" cs_1b_phantom_path_a)
    (set v_cell_1b_phantom01 (ai_vehicle_get_from_starting_location "1b_phantom/pilot"))
    (sleep_until (volume_test_players "cell_1b_oc_01_vol") 1)
    (if debug 
        (print "set objective control 1"))
    (set g_1b_obj_control 1)
    (ai_bring_forward obj_buck 20.0)
    (sleep_until (volume_test_players "cell_1b_oc_02_vol") 1)
    (if debug 
        (print "set objective control 2"))
    (set g_1b_obj_control 2)
    (sleep_until (volume_test_players "cell_1b_oc_03_vol") 1)
    (if debug 
        (print "set objective control 3"))
    (set g_1b_obj_control 3)
    (sleep_forever md_030_cell_1b)
    (ai_player_dialogue_enable true)
    (ai_dialogue_enable true)
    (sleep_until (< (ai_living_count "cell1b_group") 1) 5)
    (sleep_until (game_safe_to_save) 5)
    (game_save)
    (if debug 
        (print "game_save:cell1b_save"))
)

(script dormant void enc_cell_1b_reinf
    (sleep_until (volume_test_players "enc_cell_1b_vol02") 5)
    (ai_place "1b_squad03")
    (ai_place "1b_squad09")
    (sleep_forever md_020_cell_1a_alt)
    (ai_player_dialogue_enable true)
    (ai_dialogue_enable true)
)

(script dormant void enc_cell_bridge
    (data_mine_set_mission_segment "sc140_04_enc_cell_bridge")
    (print "data_mine_set_mission_segment sc140_04_enc_cell_bridge")
    (set s_waypoint_index 4)
    (sleep_forever ambient_air_cell1)
    (ai_erase "ambient_phantom01")
    (wake md_040_cell_lobby)
    (wake sc140_music_05)
    (s_camera02)
    (sleep_until (volume_test_players "cell_bridge_oc_01_vol") 1)
    (if debug 
        (print "set objective control 1"))
    (set g_bridge_obj_control 1)
    (sleep 1)
    (ai_bring_forward obj_buck 20.0)
    (ai_set_objective "buck" "marinelobby_obj")
    (game_save)
    (if debug 
        (print "game_save:bridge_save"))
    (sleep_until (volume_test_players "cell_bridge_oc_02_vol") 1)
    (if debug 
        (print "set objective control 2"))
    (set g_bridge_obj_control 2)
    (ai_bring_forward obj_buck 3.0)
)

(script dormant void enc_cell_2a
    (data_mine_set_mission_segment "sc140_05_enc_cell_2a")
    (print "data_mine_set_mission_segment sc140_05_enc_cell_2a")
    (set s_waypoint_index 5)
    (wake ambient_air_cell2)
    (ai_place "2a_turret01")
    (ai_place "2a_squad01")
    (ai_place "2a_squad03")
    (ai_place "2a_squad02")
    (ai_place "2a_phantom01")
    (wake enc_cell_2a_sniper)
    (set v_2a_phantom01 (ai_vehicle_get_from_starting_location "2a_phantom01/pilot"))
    (sleep 5)
    (f_load_phantom v_2a_phantom01 "chute" "2a_squad06" none none none)
    (wake enc_cell_2a_reinf)
    (ai_set_objective "buck" "marine02a_obj")
    (vehicle_hover "2a_phantom01" true)
    (sleep_forever md_040_cell_lobby)
    (ai_player_dialogue_enable true)
    (ai_dialogue_enable true)
    (wake md_050_cell_2a)
    (wake md_050_cell_2a_post)
    (sleep_until (volume_test_players "cell_2a_oc_01_vol") 1)
    (if debug 
        (print "set objective control 1"))
    (set g_2a_obj_control 1)
    (ai_bring_forward obj_buck 20.0)
    (sleep_until (volume_test_players "cell_2a_oc_02_vol") 1)
    (if debug 
        (print "set objective control 2"))
    (set g_2a_obj_control 2)
    (sleep_until (volume_test_players "cell_2a_oc_03_vol") 1)
    (if debug 
        (print "set objective control 3"))
    (set g_2a_obj_control 3)
    (sleep_until (volume_test_players "cell_2a_oc_04_vol") 1)
    (if debug 
        (print "set objective control 4"))
    (set g_music_sc140_05 false)
    (set g_2a_obj_control 4)
    (ai_set_objective "buck" "marine02b_obj")
    (sleep_until (< (ai_living_count "cell2a_group") 1) 5)
    (sleep_until (game_safe_to_save) 5)
    (game_save)
    (if debug 
        (print "game_save:cell2a_save"))
)

(script command_script void sniper_sleep
    (cs_abort_on_damage true)
    (cs_abort_on_combat_status 9)
    (sleep_forever)
)

(script dormant void enc_cell_2a_sniper
    (ai_disregard ai_buck true)
    (sleep_until 
        (or
            (> (ai_combat_status "cell2a_group") 2)
            (< (ai_living_count "cell2a_group") 6)
            (>= g_2a_obj_control 1)
        ) 
    5)
    (cs_run_command_script "2a_squad03" cs_abort)
    (ai_disregard ai_buck false)
)

(script dormant void enc_cell_2a_reinf
    (sleep_until 
        (or
            (< (ai_living_count "cell2a_jackals") 3)
            (= g_2a_obj_control 1)
        ) 
    5)
    (sleep 5)
    (f_unload_phantom v_2a_phantom01 "chute")
    (sleep 5)
    (sleep_until (> (ai_living_count "2a_squad06") 0) 5)
    (sleep_until 
        (or
            (< (ai_living_count "2a_squad06") 3)
            (>= g_2a_obj_control 2)
        ) 
    5)
    (sleep 5)
    (f_load_phantom v_2a_phantom01 "chute" "2a_squad07" none none none)
    (f_unload_phantom v_2a_phantom01 "chute")
    (sleep 120)
    (vehicle_hover "2a_phantom01" false)
    (cs_run_command_script "2a_phantom01/pilot" cs_2a_phantom_path_a)
    (sleep_until (<= (ai_living_count "cell2a_group") 0) 5)
    (set g_music_sc140_05 false)
    (game_save)
)

(script dormant void enc_cell_2b
    (data_mine_set_mission_segment "sc140_06_enc_cell_2b")
    (print "data_mine_set_mission_segment sc140_06_enc_cell_2b")
    (set s_waypoint_index 6)
    (wake enc_landing_pad)
    (wake sc140_music_06)
    (ai_place "2b_turret01")
    (ai_place "2b_squad01")
    (ai_place "2b_squad02")
    (ai_place "2b_squad05")
    (ai_place "2b_squad06")
    (s_camera03)
    (sleep_until (volume_test_players "cell_2b_oc_01_vol") 1)
    (ai_bring_forward obj_buck 20.0)
    (sleep_forever md_050_cell_2a_post)
    (ai_player_dialogue_enable true)
    (ai_dialogue_enable true)
    (wake enc_cell_2b_reinf)
    (if debug 
        (print "set objective control 1"))
    (set g_2b_obj_control 1)
    (game_save)
    (if debug 
        (print "game_save:cell2b_save"))
    (sleep_until (volume_test_players "cell_2b_oc_02_vol") 1)
    (if debug 
        (print "set objective control 2"))
    (set g_2b_obj_control 2)
    (sleep_until (volume_test_players "cell_2b_oc_03_vol") 1)
    (if debug 
        (print "set objective control 3"))
    (set g_2b_obj_control 3)
    (sleep_until (volume_test_players "cell_2b_oc_04_vol") 1)
    (if debug 
        (print "set objective control 4"))
    (set g_2b_obj_control 4)
    (sleep_until (volume_test_players "cell_2b_oc_05_vol") 1)
    (if debug 
        (print "set objective control 5"))
    (set g_2b_obj_control 5)
    (ai_bring_forward obj_buck 10.0)
    (sleep_until (volume_test_players "cell_2b_oc_06_vol") 1)
    (if debug 
        (print "set objective control 6"))
    (set g_2b_obj_control 6)
    (sleep_until (< (ai_living_count "cell2b_group") 1) 5)
    (sleep_until (game_safe_to_save) 5)
    (game_save)
    (if debug 
        (print "game_save:cell2b_end_save"))
)

(script command_script void cs_flee
    (cs_suppress_activity_termination true)
    (cs_abort_on_damage false)
    (cs_enable_moving true)
    (cs_movement_mode ai_movement_flee)
    (sleep_forever)
)

(script dormant void enc_cell_2b_reinf
    (sleep_until 
        (or
            (< (ai_living_count "cell2b_group") 2)
            (volume_test_players "enc_cell_2b_reinf_vol")
        ) 
    1)
    (ai_place "2b_squad03")
    (ai_place "2b_squad04")
    (wake md_050_cell_2b_post)
)

(script dormant void enc_landing_pad
    (sleep_until (volume_test_players "landing_pad_vol") 5)
    (data_mine_set_mission_segment "sc140_06_enc_landing_pad")
    (print "data_mine_set_mission_segment sc140_06_enc_landing_pad")
    (set s_waypoint_index 7)
    (ai_place "scaredy_grunts")
    (ai_place "landing_pad_snipers")
    (sleep 1)
    (ai_place "landing_pad_flak_grunt")
    (ai_magically_see "landing_pad_snipers" "sq_mickey")
    (ai_magically_see "landing_pad_snipers" "sq_dutch")
    (sleep_until (< (ai_living_count "gr_landing_pad") 1) 5)
    (sleep_until (game_safe_to_save) 5)
    (game_save)
    (if debug 
        (print "game_save:landing_pad"))
)

(script command_script void cs_sniper_shooting
    (cs_enable_pathfinding_failsafe true)
    (cs_enable_moving false)
    (cs_abort_on_damage true)
    (sleep_until 
        (begin
            (begin_random
                (cs_shoot_point true "construction_sniper_points/p0")
                (sleep (* (random_range 3 5) 30.0))
                (cs_shoot_point true "construction_sniper_points/p1")
                (sleep (* (random_range 2 4) 30.0))
                (cs_shoot_point true "construction_sniper_points/p2")
                (sleep (* (random_range 1 3) 30.0))
                (cs_shoot_point true "construction_sniper_points/p3")
                (sleep (* (random_range 2 4) 30.0))
                (cs_shoot_point true "construction_sniper_points/p4")
                (sleep (* (random_range 2 4) 30.0))
                (cs_shoot_point true "construction_sniper_points/p5")
            )
            false
        )
    )
)

(script command_script void cs_abort
    (sleep 1)
)

(script dormant void enc_banshee
    (data_mine_set_mission_segment "sc140_07_enc_banshee")
    (print "data_mine_set_mission_segment sc140_07_enc_banshee")
    (wake sc140_music_07)
    (sleep_forever ambient_air_cell2)
    (ai_erase "ambient_phantom02")
    (ai_place "missile00")
    (ai_place "missile01")
    (ai_place "chain_gun01")
    (ai_place "sq_mickey")
    (ai_place "sq_dutch")
    (ai_cannot_die "sq_dutch" true)
    (ai_cannot_die "sq_mickey" true)
    (ai_cannot_die "chain_gun01/police" true)
    (ai_place "landing_pad_mob01")
    (ai_place "landing_pad_mob02")
    (ai_place "landing_pad_mob03")
    (ai_place "landing_pad_mob04")
    (ai_magically_see "landing_pad_mob01" "sq_mickey")
    (ai_magically_see "landing_pad_mob03" "sq_dutch")
    (ai_magically_see "landing_pad_mob02" "sq_mickey")
    (ai_magically_see "landing_pad_mob04" "sq_dutch")
    (chud_show_ai_navpoint "sq_mickey/actor" "mickey" true 0.1)
    (set ai_mickey "sq_mickey/actor")
    (set obj_mickey (ai_get_object "sq_mickey/actor"))
    (ai_place "chain_gun02")
    (chud_show_ai_navpoint "sq_dutch/actor" "dutch" true 0.1)
    (set ai_dutch "sq_dutch/actor")
    (set obj_dutch (ai_get_object "sq_dutch/actor"))
    (wake md_070_cell_banshee_platform)
    (wake md_070_cell_banshee_plat_end)
    (wake md_080_cell_construction_site)
    (flock_stop "banshee01_flock")
    (flock_stop "banshee02_flock")
    (sleep 1)
    (flock_delete "banshee01_flock")
    (flock_delete "banshee02_flock")
    (wake mob_attack)
    (wake banshee_flyby)
    (sleep_until (volume_test_players "enc_crane_vol") 5)
    (set s_waypoint_index 8)
    (f_banshee_spawns 3)
    (sleep_until 
        (and
            (<= (ai_living_count "gr_landing_pad_mob") 1)
            (or
                (volume_test_players "construction_md04_vol")
                (script_finished "md_080_cell_construction_site")
            )
        ) 
    5)
    (wake end_phantom_battle)
)

(script dormant void buck_bring_to_construction
    (sleep_until 
        (begin
            (if (not (volume_test_objects "enc_banshee_teleport" obj_buck)) 
                (begin
                    (print "bringing buck to construction")
                    (ai_bring_forward obj_buck 5.0)
                    (sleep 150)
                )
            )
            (volume_test_objects "enc_banshee_teleport" obj_buck)
        ) 
    30)
)

(script dormant void mob_attack
    (sleep_until (volume_test_players "enc_mob_vol") 5)
    (set g_mob_attack true)
)

(script static void f_banshee_spawns (short gnumber)
    (set tempbanshee 0)
    (sleep_until 
        (begin
            (set banshee_rand_short (random_range 0 6))
            (cond
                ((and
                    (= banshee_rand_short 0)
                    (< (ai_living_count "banshee01") 1)
                    (< tempbanshee gnumber)
                )
                    (begin
                        (sleep 90)
                        (ai_place "banshee01")
                        (set tempbanshee (+ tempbanshee 1.0))
                    )
                )
                ((and
                    (= banshee_rand_short 1)
                    (< (ai_living_count "banshee02") 1)
                    (< tempbanshee gnumber)
                )
                    (begin
                        (sleep 90)
                        (ai_place "banshee02")
                        (set tempbanshee (+ tempbanshee 1.0))
                    )
                )
                ((and
                    (= banshee_rand_short 2)
                    (< (ai_living_count "banshee03") 1)
                    (< tempbanshee gnumber)
                )
                    (begin
                        (sleep 90)
                        (ai_place "banshee03")
                        (set tempbanshee (+ tempbanshee 1.0))
                    )
                )
                ((and
                    (= banshee_rand_short 3)
                    (< (ai_living_count "banshee04") 1)
                    (< tempbanshee gnumber)
                )
                    (begin
                        (sleep 90)
                        (ai_place "banshee04")
                        (set tempbanshee (+ tempbanshee 1.0))
                    )
                )
                ((and
                    (= banshee_rand_short 4)
                    (< (ai_living_count "banshee05") 1)
                    (< tempbanshee gnumber)
                )
                    (begin
                        (sleep 90)
                        (ai_place "banshee05")
                        (set tempbanshee (+ tempbanshee 1.0))
                    )
                )
                ((and
                    (= banshee_rand_short 5)
                    (< (ai_living_count "banshee06") 1)
                    (< tempbanshee gnumber)
                )
                    (begin
                        (sleep 90)
                        (ai_place "banshee06")
                        (set tempbanshee (+ tempbanshee 1.0))
                    )
                )
            )
            (>= tempbanshee gnumber)
        )
    )
    (print "exited script")
)

(script dormant void end_phantom_battle
    (sleep_until (volume_test_players "enc_banshee_teleport") 5)
    (volume_teleport_players_not_inside "enc_banshee_teleport" "enc_banshee_flag")
    (wake obj_find_clear)
    (wake obj_defend_set)
    (wake buck_bring_to_construction)
    (sleep 10)
    (game_save)
    (if debug 
        (print "game_save:phantom_battle_save"))
    (set g_wave_control 1)
    (set banshee_rand_wave (random_range 0 3))
    (cond
        ((and
            (= banshee_rand_wave 0)
            (= wave_left false)
        )
            (begin
                (set wave_left true)
                (ai_place "banshee03" 2)
                (ai_place "banshee05" 2)
                (ai_place "end_phantom01")
                (set v_end_phantom01 (ai_vehicle_get_from_starting_location "end_phantom01/pilot"))
                (cs_run_command_script "end_phantom01/pilot" cs_end_phantom_path_a)
                (set wave_found true)
                (sleep_until (= (ai_living_count "end_phantom01") 0))
            )
        )
        ((and
            (= banshee_rand_wave 1)
            (= wave_center false)
        )
            (begin
                (set wave_center true)
                (ai_place "banshee02" 2)
                (ai_place "banshee06" 2)
                (ai_place "end_phantom05")
                (set v_end_phantom05 (ai_vehicle_get_from_starting_location "end_phantom05/pilot"))
                (cs_run_command_script "end_phantom05/pilot" cs_end_phantom_path_e)
                (set wave_found true)
                (sleep_until (= (ai_living_count "end_phantom05") 0))
            )
        )
        ((and
            (= banshee_rand_wave 2)
            (= wave_right false)
        )
            (begin
                (set wave_right true)
                (ai_place "banshee01" 2)
                (ai_place "banshee04" 2)
                (ai_place "end_phantom03")
                (set v_end_phantom03 (ai_vehicle_get_from_starting_location "end_phantom03/pilot"))
                (cs_run_command_script "end_phantom03/pilot" cs_end_phantom_path_c)
                (set wave_found true)
                (sleep_until (= (ai_living_count "end_phantom03") 0))
            )
        )
    )
    (if (> (ai_living_count "banshee_groups") 4) 
        (sleep 300))
    (game_save)
    (if debug 
        (print "game_save:phantom_wave2_save"))
    (if (> (ai_living_count "banshee_groups") 2) 
        (sleep 300))
    (set g_wave_control 2)
    (ai_place "end_phantom02")
    (ai_place "end_phantom02_5")
    (set v_end_phantom02 (ai_vehicle_get_from_starting_location "end_phantom02/pilot"))
    (set v_end_phantom02_5 (ai_vehicle_get_from_starting_location "end_phantom02_5/pilot"))
    (cs_run_command_script "end_phantom02/pilot" cs_end_phantom_path_b)
    (cs_run_command_script "end_phantom02_5/pilot" cs_end_phantom_path_b_2)
    (f_load_phantom v_end_phantom02 "left" "wave02_infantry01" "wave02_infantry02" none none)
    (f_load_phantom "end_phantom02_5" "left" "wave02_infantry03" "wave02_infantry04" none none)
    (f_banshee_spawns 2)
    (sleep_until 
        (and
            (= (ai_living_count "end_phantom02") 0)
            (= (ai_living_count "end_phantom02_5") 0)
            (< (ai_living_count "wave02_infantry_group") 3)
        )
    )
    (set g_wave_control 3)
    (print "wave 3")
    (set wave_found false)
    (game_save)
    (if debug 
        (print "game_save:phantom_wave3_save"))
    (sleep_until 
        (begin
            (set banshee_rand_wave (random_range 0 3))
            (cond
                ((and
                    (= banshee_rand_wave 0)
                    (= wave_left false)
                )
                    (begin
                        (set wave_left true)
                        (ai_place "banshee03" 2)
                        (ai_place "banshee05" 2)
                        (ai_place "end_phantom01")
                        (set v_end_phantom01 (ai_vehicle_get_from_starting_location "end_phantom01/pilot"))
                        (cs_run_command_script "end_phantom01/pilot" cs_end_phantom_path_a)
                        (set wave_found true)
                        (f_banshee_spawns 4)
                        (sleep_until (= (ai_living_count "end_phantom01") 0))
                    )
                )
                ((and
                    (= banshee_rand_wave 1)
                    (= wave_center false)
                )
                    (begin
                        (set wave_center true)
                        (ai_place "banshee02" 2)
                        (ai_place "banshee06" 2)
                        (ai_place "end_phantom05")
                        (set v_end_phantom05 (ai_vehicle_get_from_starting_location "end_phantom05/pilot"))
                        (cs_run_command_script "end_phantom05/pilot" cs_end_phantom_path_e)
                        (set wave_found true)
                        (f_banshee_spawns 4)
                        (sleep_until (= (ai_living_count "end_phantom05") 0))
                    )
                )
                ((and
                    (= banshee_rand_wave 2)
                    (= wave_right false)
                )
                    (begin
                        (set wave_right true)
                        (ai_place "banshee01" 2)
                        (ai_place "banshee04" 2)
                        (ai_place "end_phantom03")
                        (set v_end_phantom05 (ai_vehicle_get_from_starting_location "end_phantom03/pilot"))
                        (cs_run_command_script "end_phantom03/pilot" cs_end_phantom_path_c)
                        (set wave_found true)
                        (f_banshee_spawns 4)
                        (sleep_until (= (ai_living_count "end_phantom03") 0))
                    )
                )
            )
            (= wave_found true)
        )
    )
    (if (> (ai_living_count "banshee_groups") 4) 
        (sleep 600))
    (game_save)
    (if debug 
        (print "game_save:phantom_wave3_end1_save"))
    (if (> (ai_living_count "banshee_groups") 2) 
        (sleep 300))
    (game_save)
    (if debug 
        (print "game_save:phantom_wave3_end2_save"))
    (set wave_found false)
    (sleep_until 
        (begin
            (set banshee_rand_wave (random_range 0 3))
            (cond
                ((and
                    (= banshee_rand_wave 0)
                    (= wave_left false)
                )
                    (begin
                        (wake md_090_construction_more)
                        (set wave_left true)
                        (ai_place "banshee03" 2)
                        (ai_place "banshee05" 2)
                        (ai_place "end_phantom01")
                        (set v_end_phantom01 (ai_vehicle_get_from_starting_location "end_phantom01/pilot"))
                        (cs_run_command_script "end_phantom01/pilot" cs_end_phantom_path_a)
                        (sleep 120)
                        (ai_place "end_phantom01_5")
                        (set v_end_phantom01_5 (ai_vehicle_get_from_starting_location "end_phantom01_5/pilot"))
                        (cs_run_command_script "end_phantom01_5/pilot" cs_end_phantom_path_a_2)
                        (set wave_found true)
                        (f_banshee_spawns 4)
                        (sleep_until 
                            (and
                                (= (ai_living_count "end_phantom01") 0)
                                (= (ai_living_count "end_phantom01_5") 0)
                            )
                        )
                    )
                )
                ((and
                    (= banshee_rand_wave 1)
                    (= wave_center false)
                )
                    (begin
                        (wake md_090_construction_more)
                        (set wave_center true)
                        (ai_place "banshee02" 2)
                        (ai_place "banshee06" 2)
                        (ai_place "end_phantom05")
                        (set v_end_phantom05 (ai_vehicle_get_from_starting_location "end_phantom05/pilot"))
                        (cs_run_command_script "end_phantom05/pilot" cs_end_phantom_path_e)
                        (sleep 120)
                        (ai_place "end_phantom05_5")
                        (set v_end_phantom05_5 (ai_vehicle_get_from_starting_location "end_phantom05_5/pilot"))
                        (cs_run_command_script "end_phantom05_5/pilot" cs_end_phantom_path_e_2)
                        (set wave_found true)
                        (f_banshee_spawns 4)
                        (sleep_until 
                            (and
                                (= (ai_living_count "end_phantom05") 0)
                                (= (ai_living_count "end_phantom05_5") 0)
                            )
                        )
                    )
                )
                ((and
                    (= banshee_rand_wave 2)
                    (= wave_right false)
                )
                    (begin
                        (wake md_090_construction_more)
                        (set wave_right true)
                        (ai_place "banshee01" 2)
                        (ai_place "banshee04" 2)
                        (ai_place "end_phantom03")
                        (set v_end_phantom03 (ai_vehicle_get_from_starting_location "end_phantom03/pilot"))
                        (cs_run_command_script "end_phantom03/pilot" cs_end_phantom_path_c)
                        (sleep 120)
                        (set v_end_phantom03_5 (ai_vehicle_get_from_starting_location "end_phantom03_5/pilot"))
                        (cs_run_command_script "end_phantom03_5/pilot" cs_end_phantom_path_c_2)
                        (set wave_found true)
                        (f_banshee_spawns 4)
                        (sleep_until 
                            (and
                                (= (ai_living_count "end_phantom03") 0)
                                (= (ai_living_count "end_phantom03_5") 0)
                            )
                        )
                    )
                )
            )
            (= wave_found true)
        )
    )
    (if (> (ai_living_count "banshee_groups") 4) 
        (sleep 600))
    (game_save)
    (if debug 
        (print "game_save:phantom_wave4_save"))
    (if (> (ai_living_count "banshee_groups") 2) 
        (sleep 300))
    (set g_wave_control 4)
    (ai_place "end_phantom06")
    (set v_end_phantom06 (ai_vehicle_get_from_starting_location "end_phantom06/pilot"))
    (cs_run_command_script "end_phantom06/pilot" cs_end_phantom_path_f)
    (f_load_phantom v_end_phantom06 "left" "wave06_infantry01" "wave06_infantry02" "wave06_infantry03" "wave06_infantry04")
)

(script dormant void sc140_end_scene
    (sleep_until (= g_wave_control 4) 1)
    (sleep_until (> (ai_living_count "wave06_infantry_group") 1))
    (wake md_090_construction_jetpack)
    (wake md_090_construction_halfway)
    (sleep_until (< (ai_living_count "wave06_infantry_group") 1) 30 1200)
    (wake md_090_construction_finished)
    (sleep_until (volume_test_players "construction_md04_vol") 5)
    (ai_place "end_phantom_cin")
    (cs_run_command_script "end_phantom_cin/pilot" cs_end_phantom_path_cin)
    (ai_cannot_die "end_phantom_cin/pilot" true)
    (wake obj_defend_clear)
    (sleep 240)
    (ai_erase "end_phantom_cin")
    (ai_erase "end_phantom06")
    (ai_erase "landing_pad_snipers")
    (ai_erase "banshee_groups")
    (garbage_collect_unsafe)
    (f_end_scene sc140_out_sc "sc140_020_cinematic" "gp_sc140_complete" "h100" "white")
    (sound_class_set_gain "" 0.0 0)
)

(script static void phantom_center_test
    (ai_place "end_phantom05")
    (set v_end_phantom05 (ai_vehicle_get_from_starting_location "end_phantom05/pilot"))
    (cs_run_command_script "end_phantom05/pilot" cs_end_phantom_path_e)
    (sleep 120)
    (ai_place "end_phantom05_5")
    (set v_end_phantom05_5 (ai_vehicle_get_from_starting_location "end_phantom05_5/pilot"))
    (cs_run_command_script "end_phantom05_5/pilot" cs_end_phantom_path_e_2)
)

(script static void phantom_left_test
    (ai_place "end_phantom01")
    (set v_end_phantom01 (ai_vehicle_get_from_starting_location "end_phantom01/pilot"))
    (cs_run_command_script "end_phantom01/pilot" cs_end_phantom_path_a)
    (sleep 120)
    (ai_place "end_phantom01_5")
    (set v_end_phantom01_5 (ai_vehicle_get_from_starting_location "end_phantom01_5/pilot"))
    (cs_run_command_script "end_phantom01_5/pilot" cs_end_phantom_path_a_2)
)

(script static void phantom_right_test
    (ai_place "end_phantom03")
    (set v_end_phantom03 (ai_vehicle_get_from_starting_location "end_phantom03/pilot"))
    (cs_run_command_script "end_phantom03/pilot" cs_end_phantom_path_c)
    (sleep 120)
    (ai_place "end_phantom03_5")
    (set v_end_phantom03_5 (ai_vehicle_get_from_starting_location "end_phantom03_5/pilot"))
    (cs_run_command_script "end_phantom03_5/pilot" cs_end_phantom_path_c_2)
)

(script dormant void phantom02_test
    (ai_place "end_phantom02")
    (ai_place "end_phantom02_5")
    (set v_end_phantom02 (ai_vehicle_get_from_starting_location "end_phantom02/pilot"))
    (set v_end_phantom02_5 (ai_vehicle_get_from_starting_location "end_phantom02_5/pilot"))
    (ai_place "wave02_infantry01")
    (ai_place "wave02_infantry02")
    (ai_place "wave02_infantry03")
    (ai_place "wave02_infantry04")
    (ai_vehicle_enter_immediate "wave02_infantry01" v_end_phantom02 phantom_p_lb)
    (ai_vehicle_enter_immediate "wave02_infantry02" v_end_phantom02 phantom_p_lf)
    (ai_vehicle_enter_immediate "wave02_infantry03" v_end_phantom02_5 phantom_p_lb)
    (ai_vehicle_enter_immediate "wave02_infantry04" v_end_phantom02_5 phantom_p_ml_b)
    (cs_run_command_script "end_phantom02/pilot" cs_end_phantom_path_b)
    (cs_run_command_script "end_phantom02_5/pilot" cs_end_phantom_path_b_2)
)

(script dormant void phantom06_test
    (ai_place "end_phantom06")
    (set v_end_phantom06 (ai_vehicle_get_from_starting_location "end_phantom06/pilot"))
    (ai_place "wave06_infantry01")
    (ai_place "wave06_infantry02")
    (ai_place "wave06_infantry03")
    (ai_place "wave06_infantry04")
    (cs_run_command_script "end_phantom06/pilot" cs_end_phantom_path_f)
    (ai_vehicle_enter_immediate "wave06_infantry01" v_end_phantom06 phantom_p_lf)
    (ai_vehicle_enter_immediate "wave06_infantry02" v_end_phantom06 phantom_p_ml_f)
    (ai_vehicle_enter_immediate "wave06_infantry03" v_end_phantom06 phantom_p_ml_b)
    (ai_vehicle_enter_immediate "wave06_infantry04" v_end_phantom06 phantom_p_lb)
    (ai_cannot_die "end_phantom06/pilot" true)
)

(script dormant void banshee_flyby
    (wake bridge_wiggle)
    (sleep_until (volume_test_players "banshee_flyby_vol") 1)
    (ai_place "banshee_flyby01")
    (cs_run_command_script "banshee_flyby01/pilot" cs_banshee_fly_by)
    (sleep 90)
    (ai_place "banshee_flyby02")
    (cs_run_command_script "banshee_flyby02/pilot" cs_banshee_fly_by)
    (sleep 60)
    (wake md_070_cell_banshee_bridge)
)

(script dormant void bridge_wiggle
    (sleep_until (volume_test_objects "banshee_wiggle_vol" (ai_actors "banshee_flyby01")) 1)
    (device_set_position "bridge" 1.0)
    (sleep_until (volume_test_objects "banshee_wiggle_vol" (ai_actors "banshee_flyby02")) 1)
    (device_set_position "bridge" 0.0)
)

(script command_script void cs_banshee_fly_by
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 1.0)
    (cs_fly_by "flyby/p0" 3.0)
    (cs_vehicle_speed 1.0)
    (cs_fly_by "flyby/p1" 3.0)
    (cs_vehicle_boost true)
    (cs_fly_by "flyby/p2" 1.0)
    (cs_fly_by "flyby/p3" 1.0)
    (cs_fly_by "flyby/p4" 1.0)
    (cs_fly_to "flyby/p5" 5.0)
    (ai_erase ai_current_actor)
)

(script command_script void cs_1a_phantom_path_a
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 1.0)
    (cs_fly_to "cell_1a_phantom_01/p0" 5.0)
    (cs_fly_to "cell_1a_phantom_01/p1" 1.0)
    (wake md_020_cell_1a_alt)
    (cs_fly_to_and_face "cell_1a_phantom_01/p4" "cell_1a_phantom_01/p7")
    (cs_fly_to_and_face "cell_1a_phantom_01/p6" "cell_1a_phantom_01/p5")
    (set g_music_sc140_02 true)
    (cs_vehicle_speed 0.4)
    (sleep 60)
    (unit_open v_1a_phantom01)
    (f_unload_phantom v_1a_phantom01 "right")
    (sleep 30)
    (unit_close v_1a_phantom01)
    (set phantom_01a_unload true)
    (cs_vehicle_speed 0.8)
    (cs_fly_to "cell_1a_phantom_01/p2" 2.0)
    (cs_vehicle_speed 1.0)
    (cs_fly_by "cell_1a_phantom_01/p3" 10.0)
    (ai_erase "1a_phantom01")
)

(script command_script void cs_1b_phantom_path_a
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 1.0)
    (cs_fly_to "cell_1b_phantom_01/p2" 2.0)
    (cs_vehicle_speed 0.8)
    (cs_fly_by "cell_1b_phantom_01/p1" 5.0)
    (cs_vehicle_speed 0.6)
    (cs_fly_to "cell_1b_phantom_01/p0" 2.0)
    (f_load_phantom v_cell_1b_phantom01 "chute" "1b_squad01" "1b_squad08" none none)
    (f_unload_phantom v_cell_1b_phantom01 "chute")
    (cs_vehicle_speed 1.0)
    (cs_fly_by "cell_1b_phantom_01/p3" 4.0)
    (cs_fly_by "cell_1b_phantom_01/p4" 10.0)
    (ai_erase "1b_phantom")
)

(script command_script void cs_2a_phantom_path_a
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 1.0)
    (cs_fly_to "cell_2a_phantom_01/p0" 5.0)
    (cs_vehicle_speed 0.5)
    (cs_fly_to "cell_2a_phantom_01/p1" 10.0)
    (cs_vehicle_speed 0.8)
    (cs_fly_to "cell_2a_phantom_01/p2" 2.0)
    (cs_vehicle_speed 1.0)
    (ai_erase "2a_phantom01")
)

(script command_script void cs_end_phantom_path_a
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 1.0)
    (cs_fly_to "end_phantom_path_a/p0" 5.0)
    (cs_vehicle_speed 0.8)
    (cs_fly_by "end_phantom_path_a/p1" 10.0)
    (wake md_090_construction_left)
    (cs_vehicle_speed 0.4)
    (sleep 240)
    (cs_fly_to "end_phantom_path_a/p2" 2.0)
    (cs_vehicle_speed 1.0)
    (cs_vehicle_boost true)
    (cs_fly_to "end_phantom_path_a/p3" 10.0)
    (ai_erase "end_phantom01")
)

(script command_script void cs_end_phantom_path_a_2
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 1.0)
    (cs_fly_to "end_phantom_path_a/p4" 5.0)
    (cs_vehicle_speed 0.8)
    (cs_fly_by "end_phantom_path_a/p5" 10.0)
    (cs_vehicle_speed 0.4)
    (sleep 240)
    (cs_fly_to "end_phantom_path_a/p6" 2.0)
    (cs_vehicle_speed 1.0)
    (cs_vehicle_boost true)
    (cs_fly_to "end_phantom_path_a/p7" 10.0)
    (ai_erase "end_phantom01_5")
)

(script command_script void cs_end_phantom_path_b
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 1.0)
    (cs_fly_to "end_phantom_path_b/p0" 5.0)
    (cs_fly_to "end_phantom_path_b/p9" 2.0)
    (cs_fly_to "end_phantom_path_b/p1" 2.0)
    (cs_vehicle_speed 0.4)
    (cs_fly_to_and_face "end_phantom_path_b/p2" "end_phantom_path_b/p3")
    (sleep 30)
    (vehicle_hover v_end_phantom02 true)
    (unit_open v_end_phantom02)
    (f_unload_phantom v_end_phantom02 "left")
    (wake md_090_construction_lower)
    (sleep 10)
    (unit_close v_end_phantom02)
    (vehicle_hover v_end_phantom02 false)
    (cs_vehicle_speed 1.0)
    (cs_vehicle_boost true)
    (cs_fly_by "end_phantom_path_b/p4" 2.0)
    (ai_erase "end_phantom02")
)

(script command_script void cs_end_phantom_path_b_2
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 1.0)
    (cs_fly_to "end_phantom_path_b/p5" 5.0)
    (cs_fly_to_and_face "end_phantom_path_b/p6" "end_phantom_path_b/p8")
    (cs_vehicle_speed 0.4)
    (cs_fly_to_and_face "end_phantom_path_b/p7" "end_phantom_path_b/p8")
    (sleep 30)
    (vehicle_hover v_end_phantom02_5 true)
    (unit_open v_end_phantom02_5)
    (f_unload_phantom v_end_phantom02_5 "left")
    (unit_close v_end_phantom02_5)
    (vehicle_hover v_end_phantom02_5 false)
    (cs_vehicle_speed 1.0)
    (cs_fly_to_and_face "end_phantom_path_b/p11" "end_phantom_path_b/p10")
    (cs_vehicle_boost true)
    (cs_fly_by "end_phantom_path_b/p10" 2.0)
    (ai_erase "end_phantom02_5")
)

(script command_script void cs_end_phantom_path_c
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 1.0)
    (cs_fly_to "end_phantom_path_c/p0" 5.0)
    (cs_vehicle_speed 0.8)
    (cs_fly_by "end_phantom_path_c/p1" 10.0)
    (cs_fly_to "end_phantom_path_c/p2" 2.0)
    (cs_vehicle_speed 0.4)
    (wake md_090_construction_right)
    (cs_fly_to "end_phantom_path_c/p3" 2.0)
    (sleep 240)
    (cs_fly_to "end_phantom_path_c/p4" 2.0)
    (cs_vehicle_speed 1.0)
    (cs_vehicle_boost true)
    (cs_fly_by "end_phantom_path_c/p5" 5.0)
    (ai_erase "end_phantom03")
)

(script command_script void cs_end_phantom_path_c_2
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 1.0)
    (cs_fly_to "end_phantom_path_c/p10" 5.0)
    (cs_vehicle_speed 0.8)
    (cs_fly_by "end_phantom_path_c/p9" 10.0)
    (cs_fly_to "end_phantom_path_c/p8" 2.0)
    (cs_vehicle_speed 0.4)
    (cs_fly_to "end_phantom_path_c/p7" 2.0)
    (sleep 240)
    (cs_fly_to "end_phantom_path_c/p6" 2.0)
    (cs_vehicle_speed 1.0)
    (cs_vehicle_boost true)
    (cs_fly_by "end_phantom_path_c/p11" 5.0)
    (ai_erase "end_phantom03_5")
)

(script command_script void cs_end_phantom_path_e
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 1.0)
    (cs_fly_to "end_phantom_path_e/p0" 5.0)
    (cs_vehicle_speed 0.8)
    (cs_fly_by "end_phantom_path_e/p1" 10.0)
    (wake md_090_construction_center)
    (cs_vehicle_speed 0.4)
    (cs_fly_to "end_phantom_path_e/p2" 2.0)
    (sleep 240)
    (cs_fly_to "end_phantom_path_e/p3" 2.0)
    (cs_vehicle_speed 1.0)
    (cs_vehicle_boost true)
    (cs_fly_by "end_phantom_path_e/p4" 2.0)
    (ai_erase "end_phantom05")
)

(script command_script void cs_end_phantom_path_e_2
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 1.0)
    (cs_fly_to "end_phantom_path_e/p5" 5.0)
    (cs_vehicle_speed 0.8)
    (cs_fly_by "end_phantom_path_e/p6" 10.0)
    (cs_vehicle_speed 0.4)
    (cs_fly_to "end_phantom_path_e/p7" 2.0)
    (sleep 240)
    (cs_fly_to "end_phantom_path_e/p8" 2.0)
    (cs_vehicle_speed 1.0)
    (cs_fly_by "end_phantom_path_e/p9" 5.0)
    (ai_erase "end_phantom05_5")
)

(script command_script void cs_end_phantom_path_f
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 1.0)
    (cs_fly_to "end_phantom_path_f/p0" 5.0)
    (cs_fly_to "end_phantom_path_f/p6" 2.0)
    (cs_fly_to "end_phantom_path_f/p1" 5.0)
    (cs_vehicle_speed 0.4)
    (cs_fly_to_and_face "end_phantom_path_f/p2" "end_phantom_path_f/p3")
    (sleep 15)
    (cs_fly_to_and_face "end_phantom_path_f/p2" "end_phantom_path_f/p3")
    (sleep 30)
    (unit_open v_end_phantom06)
    (vehicle_hover v_end_phantom06 true)
    (f_unload_phantom v_end_phantom06 "left")
    (unit_close v_end_phantom06)
)

(script command_script void cs_end_phantom_path_cin
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 1.0)
    (cs_fly_to "end_phantom_cin_points/p0" 5.0)
    (wake md_090_construction_chieftain)
    (cs_fly_to_and_face "end_phantom_cin_points/p1" "end_phantom_cin_points/p2")
    (cs_fly_to "end_phantom_cin_points/p3" 5.0)
)

(script dormant void obj_find_set
    (if debug 
        (print "new objective set:"))
    (if debug 
        (print "find mickey and dutch's pelican"))
    (f_new_intel "obj_new" "obj_1" 0 "null_flag")
)

(script dormant void obj_defend_set
    (if debug 
        (print "new objective set:"))
    (if debug 
        (print "defend pelican crash-site."))
    (f_new_intel "obj_new" "obj_2" 1 "null_flag")
)

(script dormant void obj_find_clear
    (if debug 
        (print "objective complete:"))
    (if debug 
        (print "find mickey and dutch's pelican"))
    (objectives_finish_up_to 0)
)

(script dormant void obj_defend_clear
    (if debug 
        (print "objective complete:"))
    (if debug 
        (print "defend pelican crash-site."))
    (objectives_finish_up_to 1)
)

(script dormant void player0_l00_waypoints
    (sc140_waypoints player_00)
)

(script dormant void player1_l00_waypoints
    (sc140_waypoints player_01)
)

(script dormant void player2_l00_waypoints
    (sc140_waypoints player_02)
)

(script dormant void player3_l00_waypoints
    (sc140_waypoints player_03)
)

(script static void sc140_waypoints (short player_name)
    (sleep_until 
        (begin
            (f_sleep_until_activate_waypoint player_name)
            (cond
                ((= s_waypoint_index 1)
                    (f_waypoint_activate_1 player_name "cell1a_navpoint")
                )
                ((= s_waypoint_index 2)
                    (f_waypoint_activate_1 player_name "cell1b_navpoint")
                )
                ((= s_waypoint_index 3)
                    (f_waypoint_activate_1 player_name "lobby_navpoint")
                )
                ((= s_waypoint_index 4)
                    (f_waypoint_activate_1 player_name "cell2a_navpoint")
                )
                ((= s_waypoint_index 5)
                    (f_waypoint_activate_1 player_name "cell2b_navpoint")
                )
                ((= s_waypoint_index 6)
                    (f_waypoint_activate_1 player_name "cell_end_navpoint")
                )
                ((= s_waypoint_index 7)
                    (f_waypoint_activate_1 player_name "landing_pad_navpoint")
                )
                ((= s_waypoint_index 8)
                    (f_waypoint_activate_1 player_name "banshee_battle_navpoint")
                )
            )
            false
        ) 
    1)
)

(script dormant void cell1a_navpoint_active
    (sleep (* 30.0 120.0))
    (hud_activate_team_nav_point_flag player "cell1a_navpoint" g_nav_offset)
)

(script dormant void cell1a_navpoint_deactive
    (sleep_until 
        (or
            (>= g_1a_obj_control 1)
            (<= (objects_distance_to_flag (players) "cell1a_navpoint") 1.0)
        ) 
    1)
    (sleep_forever cell1a_navpoint_active)
    (sleep 1)
    (hud_deactivate_team_nav_point_flag player "cell1a_navpoint")
)

(script dormant void cell1b_navpoint_active
    (sleep (* 30.0 120.0))
    (hud_activate_team_nav_point_flag player "cell1b_navpoint" g_nav_offset)
)

(script dormant void cell1b_navpoint_deactive
    (sleep_until 
        (or
            (>= g_1b_obj_control 1)
            (<= (objects_distance_to_flag (players) "cell1b_navpoint") 1.0)
        ) 
    1)
    (sleep_forever cell1b_navpoint_active)
    (sleep 1)
    (hud_deactivate_team_nav_point_flag player "cell1b_navpoint")
)

(script dormant void lobby_navpoint_active
    (sleep (* 30.0 120.0))
    (hud_activate_team_nav_point_flag player "lobby_navpoint" g_nav_offset)
)

(script dormant void lobby_navpoint_deactive
    (sleep_until (<= (objects_distance_to_flag (players) "lobby_navpoint") 3.5) 1)
    (sleep_forever lobby_navpoint_active)
    (sleep 1)
    (hud_deactivate_team_nav_point_flag player "lobby_navpoint")
)

(script dormant void cell2b_navpoint_active
    (sleep (* 30.0 90.0))
    (hud_activate_team_nav_point_flag player "cell2b_navpoint" g_nav_offset)
)

(script dormant void cell2b_navpoint_deactive
    (sleep_until 
        (or
            (>= g_2b_obj_control 1)
            (<= (objects_distance_to_flag (players) "cell2b_navpoint") 1.0)
        ) 
    1)
    (sleep_forever cell2b_navpoint_active)
    (sleep 1)
    (hud_deactivate_team_nav_point_flag player "cell2b_navpoint")
)

(script dormant void cell_end_navpoint_active
    (sleep (* 30.0 120.0))
    (hud_activate_team_nav_point_flag player "cell_end_navpoint" g_nav_offset)
)

(script dormant void cell_end_navpoint_deactive
    (sleep_until 
        (or
            (>= g_2b_obj_control 4)
            (<= (objects_distance_to_flag (players) "cell_end_navpoint") 2.0)
        ) 
    1)
    (sleep_forever cell_end_navpoint_active)
    (sleep 1)
    (hud_deactivate_team_nav_point_flag player "cell_end_navpoint")
    (wake landing_pad_navpoint_active)
    (wake landing_pad_navpoint_deactive)
)

(script dormant void landing_pad_navpoint_active
    (sleep (* 30.0 120.0))
    (hud_activate_team_nav_point_flag player "landing_pad_navpoint" g_nav_offset)
)

(script dormant void landing_pad_navpoint_deactive
    (sleep_until (<= (objects_distance_to_flag (players) "landing_pad_navpoint") 1.0) 3)
    (sleep_forever landing_pad_navpoint_active)
    (sleep 1)
    (hud_deactivate_team_nav_point_flag player "landing_pad_navpoint")
    (wake banshee_navpoint_active)
    (wake banshee_navpoint_deactive)
)

(script dormant void banshee_navpoint_active
    (sleep (* 30.0 90.0))
    (hud_activate_team_nav_point_flag player "banshee_battle_navpoint" g_nav_offset)
)

(script dormant void banshee_navpoint_deactive
    (sleep_until (<= (objects_distance_to_flag (players) "banshee_battle_navpoint") 1.0) 3)
    (sleep_forever banshee_navpoint_active)
    (sleep 1)
    (hud_deactivate_team_nav_point_flag player "banshee_battle_navpoint")
)

(script dormant void object_management
    (if (= (current_zone_set) 0) 
        (print "obj_mgmt- beginning"))
    (sleep_until (>= (current_zone_set) 1) 1)
    (if (= (current_zone_set) 1) 
        (begin
            (print "obj_mgmt- loading lobby")
        )
    )
    (sleep_until (>= (current_zone_set) 2) 1)
    (if (= (current_zone_set) 2) 
        (begin
            (device_set_power "sc140_door_14" 0.0)
            (device_set_position_immediate "sc140_door_14" 0.0)
            (sleep 5)
            (zone_set_trigger_volume_enable "zone_set:sc140_000_010_030" false)
            (print "obj_mgmt- loading cell2")
            (sleep_until (= (current_zone_set_fully_active) 2) 1)
            (sleep 1)
            (device_set_power "sc140_door_15" 1.0)
        )
    )
    (sleep_until (>= (current_zone_set) 3) 1)
    (if (= (current_zone_set) 3) 
        (begin
            (device_set_power "sc140_door_15" 0.0)
            (device_set_position_immediate "sc140_door_15" 0.0)
            (print "obj_mgmt- removing lobby")
        )
    )
)

(script dormant void sc_sc140_coop_resume
    (sleep_until (> g_1b_obj_control 0) 1)
    (if (< g_1b_obj_control 3) 
        (begin
            (if debug 
                (print "coop resume checkpoint 1"))
            (f_coop_resume_unlocked "coop_resume" 1)
        )
    )
    (sleep_until (> g_bridge_obj_control 0) 1)
    (if (< g_bridge_obj_control 2) 
        (begin
            (if debug 
                (print "coop resume checkpoint 2"))
            (f_coop_resume_unlocked "coop_resume" 2)
        )
    )
    (sleep_until (> g_2b_obj_control 0) 1)
    (if (< g_2b_obj_control 4) 
        (begin
            (if debug 
                (print "coop resume checkpoint 3"))
            (f_coop_resume_unlocked "coop_resume" 3)
        )
    )
    (sleep_until (> g_wave_control 0) 1)
    (if debug 
        (print "coop resume checkpoint 3"))
    (f_coop_resume_unlocked "coop_resume" 4)
)

(script dormant void gs_recycle_volumes
    (sleep_until (> g_1b_obj_control 0))
    (if (< g_1b_obj_control 3) 
        (add_recycling_volume "cell01a_recycle_vol" 30 30))
    (sleep_until (> g_bridge_obj_control 0))
    (if (< g_bridge_obj_control 3) 
        (begin
            (add_recycling_volume "cell01a_recycle_vol" 0 30)
            (add_recycling_volume "cell01b_recycle_vol" 30 30)
        )
    )
    (sleep_until (> g_2a_obj_control 0))
    (if (< g_2a_obj_control 3) 
        (begin
            (add_recycling_volume "cell01b_recycle_vol" 0 30)
            (add_recycling_volume "lobby_recycle_vol" 30 30)
        )
    )
    (sleep_until (> g_2b_obj_control 0))
    (if (< g_2b_obj_control 3) 
        (begin
            (add_recycling_volume "lobby_recycle_vol" 0 30)
            (add_recycling_volume "cell02a_recycle_vol" 30 30)
        )
    )
    (sleep_until (> g_wave_control 0))
    (add_recycling_volume "cell02a_recycle_vol" 0 30)
    (add_recycling_volume "cell02b_recycle_vol" 0 30)
    (sleep_until (> g_wave_control 1))
    (add_recycling_volume "banshee_hi_recycle_vol" 15 30)
    (add_recycling_volume "banshee_lo_recycle_vol" 0 30)
    (sleep_until (> g_wave_control 2))
    (add_recycling_volume "banshee_hi_recycle_vol" 15 30)
    (add_recycling_volume "banshee_lo_recycle_vol" 0 30)
    (sleep_until (> g_wave_control 3))
    (add_recycling_volume "banshee_hi_recycle_vol" 15 30)
    (add_recycling_volume "banshee_lo_recycle_vol" 0 30)
    (sleep_until (> g_wave_control 4))
    (add_recycling_volume "banshee_hi_recycle_vol" 15 30)
    (add_recycling_volume "banshee_lo_recycle_vol" 0 30)
)

(script dormant void gs_disposable_ai
    (sleep_until (> g_2a_obj_control 0))
    (if (< g_2a_obj_control 3) 
        (begin
            (ai_disposable "cell1b_group" true)
            (ai_disposable "cell1a_group" true)
        )
    )
    (sleep_until (> g_2b_obj_control 0))
    (sleep_until (> g_wave_control 0))
    (ai_disposable "cell2b_group" true)
    (ai_disposable "cell2a_group" true)
)

(script dormant void buck_fall
    (sleep_until 
        (begin
            (sleep_until (volume_test_objects "buck_fall_vol" obj_buck) 5)
            (ai_bring_forward obj_buck 1.0)
            false
        )
    )
)

(script dormant void mickey_fall
    (sleep_until 
        (begin
            (sleep_until (volume_test_objects "buck_fall_vol" obj_mickey) 5)
            (ai_bring_forward ai_dutch 1.0)
            false
        )
    )
)

(script dormant void dutch_fall
    (sleep_until 
        (begin
            (sleep_until (volume_test_objects "buck_fall_vol" obj_dutch) 5)
            (ai_bring_forward ai_dutch 1.0)
            false
        )
    )
)

(script dormant void sc140_survival_mode
    (print "sc140 survival")
    (set string_survival_map_name "sc140")
    (switch_zone_set "set_survival")
    (pda_set_active_pda_definition "sc140_survival")
    (zone_set_trigger_volume_enable "begin_zone_set:sc140_010_020_030" false)
    (zone_set_trigger_volume_enable "zone_set:sc140_010_020_030" false)
    (zone_set_trigger_volume_enable "zone_set:sc140_000_010_030" false)
    (zone_set_trigger_volume_enable "begin_zone_set:sc140_000_010_030" false)
    (sleep 1)
    (if (> (player_count) 0) 
        (cinematic_snap_to_black))
    (sleep 5)
    (object_destroy_folder "campaign_weapons")
    (object_destroy_folder "campaign_crates")
    (object_destroy_folder "lobby_bodies")
    (object_destroy_folder "bipeds_campaign")
    (object_destroy_folder "eq_campaign")
    (object_destroy_folder "sc_campaign")
    (object_destroy "sc140_door_08")
    (object_destroy "sc140_door_14")
    (object_create "sur_monster_door01")
    (object_create "sur_monster_door02")
    (kill_volume_enable "kill_survival01")
    (sleep 1)
    (player0_set_pitch g_player_start_pitch 0)
    (player1_set_pitch g_player_start_pitch 0)
    (player2_set_pitch g_player_start_pitch 0)
    (player3_set_pitch g_player_start_pitch 0)
    (sleep 1)
    (set ai_sur_phantom_01 "sq_sur_phantom_01")
    (set ai_sur_phantom_02 "sq_sur_phantom_02")
    (set ai_sur_phantom_03 none)
    (set ai_sur_phantom_04 none)
    (set s_sur_drop_side_01 "null")
    (set s_sur_drop_side_02 "null")
    (set s_sur_drop_side_03 "null")
    (set s_sur_drop_side_04 "null")
    (set ai_sur_wave_spawns "gr_survival_waves")
    (set s_sur_wave_squad_count 5)
    (set ai_sur_remaining "sq_sur_remaining")
    (set ai_sur_bonus_wave "sq_sur_bonus_round_01")
    (set ai_sur_bonus_phantom none)
    (set b_sur_bonus_round true)
    (set ai_obj_survival "obj_sc140_survival")
    (sleep 1)
    (device_set_power "sc140_door_02" 1.0)
    (device_set_power "sc140_door_04" 1.0)
    (device_set_power "sc140_door_05" 1.0)
    (device_set_power "sc140_door_07" 1.0)
    (device_set_power "sc140_door_15" 0.0)
    (device_set_power "sc140_door_10" 0.0)
    (wake survival_mode)
    (if (survival_mode_scenario_extras_enable) 
        (begin
            (wake survival_banshee_spawn)
        )
    )
    (sleep 5)
    (sc140_survival_turret_reserve)
)

(script static void survival_refresh_follow
    (survival_refresh_sleep)
    (ai_reset_objective "obj_sc140_survival/infantry_follow")
)

(script static void survival_hero_refresh_follow
    (survival_refresh_sleep)
    (survival_refresh_sleep)
    (ai_reset_objective "obj_sc140_survival/hero_follow")
)

(script static void sc140_survival_turret_reserve
    (print "reserving turrets")
    (ai_vehicle_reserve_seat "sur_turret01" turret_g true)
    (ai_vehicle_reserve_seat "sur_turret02" turret_g true)
)

(script dormant void survival_banshee_spawn
    (sleep_until 
        (begin
            (sleep (* 30.0 (random_range 90 240)))
            (if (< (ai_living_count "gr_survival_banshee") 1) 
                (cond
                    ((= (ai_living_count "sq_sur_banshee01") 0)
                        (ai_place "sq_sur_banshee01")
                    )
                    ((= (ai_living_count "sq_sur_banshee02") 0)
                        (ai_place "sq_sur_banshee02")
                    )
                )
            )
            false
        )
    )
)

(script command_script void cs_sur_phantom_01
    (set v_sur_phantom_01 (ai_vehicle_get_from_spawn_point "sq_sur_phantom_01/pilot"))
    (object_set_shadowless "sq_sur_phantom_01/pilot" true)
    (ai_cannot_die "sq_sur_phantom_01/pilot" true)
    (if (= g_pad_attack1 false) 
        (begin
            (cs_enable_pathfinding_failsafe true)
            (cs_vehicle_speed 1.0)
            (cs_fly_by "survival_phantom_path_c/p0" 5.0)
            (cs_fly_by "survival_phantom_path_c/p1" 10.0)
            (cs_fly_to "survival_phantom_path_c/p2" 5.0)
            (cs_vehicle_speed 0.8)
            (cs_fly_by "survival_phantom_path_c/p8" 2.0)
            (cs_fly_to "survival_phantom_path_c/p9" 2.0)
            (f_unload_phantom v_sur_phantom_01 "chute")
            (cs_fly_to "survival_phantom_path_c/p10" 2.0)
            (cs_vehicle_speed 1.0)
            (cs_fly_by "survival_phantom_path_c/p11" 10.0)
            (ai_erase ai_current_squad)
        ) (begin
            (cs_enable_pathfinding_failsafe true)
            (cs_vehicle_speed 1.0)
            (cs_fly_by "survival_phantom_path_a/p0" 5.0)
            (cs_fly_by "survival_phantom_path_a/p1" 10.0)
            (cs_fly_to "survival_phantom_path_a/p2" 5.0)
            (cs_vehicle_speed 0.8)
            (unit_open v_sur_phantom_01)
            (cs_fly_to_and_face "survival_phantom_path_a/p3" "survival_phantom_path_a/p4")
            (sleep 15)
            (vehicle_hover v_sur_phantom_01 true)
            (f_unload_phantom v_sur_phantom_01 "right")
            (sleep 150)
            (vehicle_hover v_sur_phantom_01 false)
            (cs_vehicle_speed 1.0)
            (cs_fly_to "survival_phantom_path_a/p5" 2.0)
            (cs_fly_to "survival_phantom_path_a/p6" 2.0)
            (cs_vehicle_boost true)
            (cs_fly_by "survival_phantom_path_a/p7" 10.0)
            (cs_vehicle_boost false)
            (ai_erase ai_current_squad)
        )
    )
)

(script command_script void cs_sur_phantom_02
    (set v_sur_phantom_02 (ai_vehicle_get_from_spawn_point "sq_sur_phantom_02/pilot"))
    (object_set_shadowless "sq_sur_phantom_02/pilot" true)
    (ai_cannot_die "sq_sur_phantom_02/pilot" true)
    (if (= g_pad_attack2 false) 
        (begin
            (cs_enable_pathfinding_failsafe true)
            (cs_vehicle_speed 1.0)
            (cs_fly_by "survival_phantom_path_d/p0" 5.0)
            (cs_fly_by "survival_phantom_path_d/p1" 10.0)
            (cs_fly_to "survival_phantom_path_d/p2" 5.0)
            (cs_vehicle_speed 0.7)
            (cs_fly_by "survival_phantom_path_d/p8" 2.0)
            (cs_fly_to "survival_phantom_path_d/p9" 2.0)
            (f_unload_phantom v_sur_phantom_02 "chute")
            (cs_fly_to "survival_phantom_path_d/p10" 2.0)
            (cs_fly_by "survival_phantom_path_d/p11" 10.0)
            (cs_vehicle_speed 1.0)
            (ai_erase ai_current_squad)
        ) (begin
            (cs_enable_pathfinding_failsafe true)
            (cs_vehicle_speed 1.0)
            (cs_fly_by "survival_phantom_path_b/p0" 5.0)
            (cs_fly_by "survival_phantom_path_b/p1" 10.0)
            (cs_fly_to "survival_phantom_path_b/p2" 5.0)
            (cs_vehicle_speed 0.8)
            (unit_open v_sur_phantom_02)
            (cs_fly_to_and_face "survival_phantom_path_b/p3" "survival_phantom_path_b/p4")
            (sleep 15)
            (vehicle_hover v_sur_phantom_02 true)
            (f_unload_phantom v_sur_phantom_02 "right")
            (sleep 150)
            (vehicle_hover v_sur_phantom_02 false)
            (cs_vehicle_speed 1.0)
            (cs_fly_by "survival_phantom_path_b/p5" 2.0)
            (cs_fly_to "survival_phantom_path_b/p6" 2.0)
            (cs_vehicle_boost true)
            (cs_fly_by "survival_phantom_path_b/p7" 10.0)
            (ai_erase ai_current_squad)
        )
    )
)

(script dormant void sur_kill_vol_disable
    (kill_volume_disable "kill_sur_room_01")
    (kill_volume_disable "kill_sur_room_02")
    (kill_volume_disable "kill_sur_room_03")
    (kill_volume_disable "kill_sur_room_04")
    (kill_volume_disable "kill_sur_room_05")
    (kill_volume_disable "kill_sur_room_06")
    (kill_volume_disable "kill_sur_room_07")
    (kill_volume_disable "kill_sur_room_08")
    (kill_volume_disable "kill_survival01")
    (print "disabling kill_volumes")
)

(script static void sc140_int_sc_01_sc_sh1
    (cinematic_show_letterbox_immediate true)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 0) 0 "sc140_int_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 0) 0)
    (cinematic_object_create_cinematic_anchor "sc140_int_anch" "sc140_int_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 0 "buck_01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 "romeo_01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 "ar_sc140_int_sc_01_1" true)
    (object_hide (cinematic_scripting_get_object 0 0 3) true)
    (object_hide (cinematic_scripting_get_object 0 0 4) true)
    (object_hide (cinematic_scripting_get_object 0 0 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 6 "sniper_01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 7 "sc140_in_door01_1" true)
    (object_hide (cinematic_scripting_get_object 0 0 8) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 9 "light_marker01_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (sleep 1)
    (cinematic_scripting_start_music 0 0 0 0)
    (sleep 177)
    (cinematic_scripting_start_dialogue 0 0 0 0 (cinematic_scripting_get_object 0 0 0))
    (sleep 22)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_int_sc_01_sc_sh2
    (fade_in 1.0 1.0 1.0 10)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 0) 1 "sc140_int_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 0) 1)
    (cinematic_object_create_cinematic_anchor "sc140_int_anch" "sc140_int_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 0 "buck_01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 "romeo_01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 "ar_sc140_int_sc_01_2" true)
    (object_hide (cinematic_scripting_get_object 0 0 3) true)
    (object_hide (cinematic_scripting_get_object 0 0 4) true)
    (object_hide (cinematic_scripting_get_object 0 0 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 6 "sniper_01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 7 "sc140_in_door01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 8 "super_hud_sc01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 9 "light_marker01_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (object_set_function_variable (cinematic_scripting_get_object 0 0 8) "location" 0.4 0.0)
    (object_set_function_variable (cinematic_scripting_get_object 0 0 8) "status" 0.8 0.0)
    (cinematic_scripting_start_screen_effect 0 0 1 0)
    (object_set_function_variable (cinematic_scripting_get_object 0 0 8) "timestamp" 0.2 0.0)
    (object_set_function_variable (cinematic_scripting_get_object 0 0 8) "eyes" 0.0 0.0)
    (cinematic_scripting_start_screen_effect 0 0 1 3)
    (sleep 8)
    (cinematic_scripting_start_dialogue 0 0 1 0 (cinematic_scripting_get_object 0 0 1))
    (sleep 22)
    (object_set_function_variable (cinematic_scripting_get_object 0 0 8) "eyes" 0.7 0.0)
    (sleep 2)
    (object_set_function_variable (cinematic_scripting_get_object 0 0 8) "eyes" 0.1 0.0)
    (sleep 4)
    (object_set_function_variable (cinematic_scripting_get_object 0 0 8) "eyes" 0.7 0.0)
    (sleep 2)
    (object_set_function_variable (cinematic_scripting_get_object 0 0 8) "eyes" 0.0 0.0)
    (sleep 12)
    (cinematic_scripting_start_screen_effect 0 0 1 1)
    (sleep 9)
    (cinematic_scripting_start_screen_effect 0 0 1 2)
    (sleep 21)
    (object_set_function_variable (cinematic_scripting_get_object 0 0 8) "eyes" 0.7 0.0)
    (sleep 2)
    (object_set_function_variable (cinematic_scripting_get_object 0 0 8) "eyes" 0.1 0.0)
    (sleep 4)
    (object_set_function_variable (cinematic_scripting_get_object 0 0 8) "eyes" 0.7 0.0)
    (sleep 2)
    (object_set_function_variable (cinematic_scripting_get_object 0 0 8) "eyes" 0.0 0.0)
    (sleep 41)
    (cinematic_scripting_stop_screen_effect 0 0 1 3)
    (sleep 1)
    (fade_in 1.0 1.0 1.0 10)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_int_sc_01_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 0) 2 "sc140_int_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 0) 2)
    (cinematic_object_create_cinematic_anchor "sc140_int_anch" "sc140_int_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 0 "buck_01_3" true)
    (object_hide (cinematic_scripting_get_object 0 0 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 "ar_sc140_int_sc_01_3" true)
    (object_hide (cinematic_scripting_get_object 0 0 3) true)
    (object_hide (cinematic_scripting_get_object 0 0 4) true)
    (object_hide (cinematic_scripting_get_object 0 0 5) true)
    (object_hide (cinematic_scripting_get_object 0 0 6) true)
    (object_hide (cinematic_scripting_get_object 0 0 7) true)
    (object_hide (cinematic_scripting_get_object 0 0 8) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 9 "light_marker01_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (sleep 16)
    (cinematic_scripting_start_dialogue 0 0 2 0 (cinematic_scripting_get_object 0 0 0))
    (sleep 149)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_int_sc_01_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 0) 3 "sc140_int_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 0) 3)
    (cinematic_object_create_cinematic_anchor "sc140_int_anch" "sc140_int_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 0 "buck_01_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 "romeo_01_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 "ar_sc140_int_sc_01_4" true)
    (object_hide (cinematic_scripting_get_object 0 0 3) true)
    (object_hide (cinematic_scripting_get_object 0 0 4) true)
    (object_hide (cinematic_scripting_get_object 0 0 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 6 "sniper_01_4" true)
    (object_hide (cinematic_scripting_get_object 0 0 7) true)
    (object_hide (cinematic_scripting_get_object 0 0 8) true)
    (object_hide (cinematic_scripting_get_object 0 0 9) true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (sleep 25)
    (cinematic_scripting_start_dialogue 0 0 3 0 (cinematic_scripting_get_object 0 0 1))
    (sleep 150)
    (cinematic_scripting_start_dialogue 0 0 3 1 (cinematic_scripting_get_object 0 0 0))
    (sleep 15)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_int_sc_01_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 0) 4 "sc140_int_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 0) 4)
    (cinematic_object_create_cinematic_anchor "sc140_int_anch" "sc140_int_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 0 "buck_01_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 "romeo_01_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 "ar_sc140_int_sc_01_5" true)
    (object_hide (cinematic_scripting_get_object 0 0 3) true)
    (object_hide (cinematic_scripting_get_object 0 0 4) true)
    (object_hide (cinematic_scripting_get_object 0 0 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 6 "sniper_01_5" true)
    (object_hide (cinematic_scripting_get_object 0 0 7) true)
    (object_hide (cinematic_scripting_get_object 0 0 8) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 9 "light_marker01_5" true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (sleep 64)
    (cinematic_scripting_start_dialogue 0 0 4 0 (cinematic_scripting_get_object 0 0 1))
    (sleep 90)
    (cinematic_scripting_start_dialogue 0 0 4 1 (cinematic_scripting_get_object 0 0 0))
    (sleep 79)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void !sc140_int_sc_01_sc
    (cinematic_print "beginning scene 1")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 0) 0)
    (sc140_int_sc_01_sc_sh1)
    (sc140_int_sc_01_sc_sh2)
    (sc140_int_sc_01_sc_sh3)
    (sc140_int_sc_01_sc_sh4)
    (sc140_int_sc_01_sc_sh5)
    (cinematic_lights_destroy)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
    (cinematic_scripting_destroy_object 0 0 0)
    (cinematic_scripting_destroy_object 0 0 1)
    (cinematic_scripting_destroy_object 0 0 2)
    (cinematic_scripting_destroy_object 0 0 3)
    (cinematic_scripting_destroy_object 0 0 4)
    (cinematic_scripting_destroy_object 0 0 5)
    (cinematic_scripting_destroy_object 0 0 6)
    (cinematic_scripting_destroy_object 0 0 7)
    (cinematic_scripting_destroy_object 0 0 8)
    (cinematic_scripting_destroy_object 0 0 9)
)

(script static void sc140_int_sc_02_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 1) 0 "sc140_int_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 1) 0)
    (cinematic_object_create_cinematic_anchor "sc140_int_anch" "sc140_int_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 0 "romeo_02_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 1 "ar_sc140_int_sc_02_1" true)
    (object_hide (cinematic_scripting_get_object 0 1 2) true)
    (object_hide (cinematic_scripting_get_object 0 1 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 4 "pelican_02_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 5 "sniper_02_1" true)
    (object_hide (cinematic_scripting_get_object 0 1 6) true)
    (object_hide (cinematic_scripting_get_object 0 1 7) true)
    (object_hide (cinematic_scripting_get_object 0 1 8) true)
    (object_hide (cinematic_scripting_get_object 0 1 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 10 "buck_helmet_02_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 11 "buck_nohelmet_02_1" true)
    (object_hide (cinematic_scripting_get_object 0 1 12) true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (object_set_function_variable (cinematic_scripting_get_object 0 1 4) "thrusters_down" 1.0 0.0)
    (object_set_function_variable (cinematic_scripting_get_object 0 1 4) "thrusters_back" 0.25 0.0)
    (sleep 33)
    (cinematic_scripting_start_dialogue 0 1 0 0 none)
    (sleep 51)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_int_sc_02_sc_sh2
    (begin
        (player_effect_set_max_rumble 0.07 0.07)
        (player_effect_start 1.0 0.0)
    )
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 1) 1 "sc140_int_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 1) 1)
    (cinematic_object_create_cinematic_anchor "sc140_int_anch" "sc140_int_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 0 "romeo_02_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 1 "ar_sc140_int_sc_02_2" true)
    (object_hide (cinematic_scripting_get_object 0 1 2) true)
    (object_hide (cinematic_scripting_get_object 0 1 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 4 "pelican_02_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 5 "sniper_02_2" true)
    (object_hide (cinematic_scripting_get_object 0 1 6) true)
    (object_hide (cinematic_scripting_get_object 0 1 7) true)
    (object_hide (cinematic_scripting_get_object 0 1 8) true)
    (object_hide (cinematic_scripting_get_object 0 1 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 10 "buck_helmet_02_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 11 "buck_nohelmet_02_2" true)
    (object_hide (cinematic_scripting_get_object 0 1 12) true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (sleep 70)
    (player_effect_stop 0.0)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_int_sc_02_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 1) 2 "sc140_int_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 1) 2)
    (cinematic_object_create_cinematic_anchor "sc140_int_anch" "sc140_int_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 0 "romeo_02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 1 "ar_sc140_int_sc_02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 2 "banshee01_02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 3 "banshee02_02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 4 "pelican_02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 5 "sniper_02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 6 "banshee_bomb01_02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 7 "banshee_bomb02_02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 8 "banshee_impact01_02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 9 "banshee_impact02_02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 10 "buck_helmet_02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 11 "buck_nohelmet_02_3" true)
    (object_hide (cinematic_scripting_get_object 0 1 12) true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (object_set_function_variable (cinematic_scripting_get_object 0 1 2) "banshee_power" 1.0 0.0)
    (object_set_function_variable (cinematic_scripting_get_object 0 1 2) "banshee_trails" 1.0 0.0)
    (object_set_function_variable (cinematic_scripting_get_object 0 1 4) "jet_wash_active" 0.0 0.0)
    (object_set_function_variable (cinematic_scripting_get_object 0 1 3) "banshee_trails" 1.0 0.0)
    (object_set_function_variable (cinematic_scripting_get_object 0 1 3) "banshee_power" 1.0 0.0)
    (object_set_function_variable (cinematic_scripting_get_object 0 1 4) "jet_wash_power" 0.35 0.0)
    (object_clear_function_variable (cinematic_scripting_get_object 0 1 3) "firing")
    (object_clear_function_variable (cinematic_scripting_get_object 0 1 2) "firing")
    (sleep 70)
    (object_set_function_variable (cinematic_scripting_get_object 0 1 4) "jet_wash_active" 1.0 0.0)
    (sleep 22)
    (cinematic_scripting_start_dialogue 0 1 2 0 (cinematic_scripting_get_object 0 1 11))
    (sleep 36)
    (cinematic_scripting_start_effect 0 1 2 0 (cinematic_object_get "banshee01"))
    (sleep 1)
    (cinematic_scripting_start_effect 0 1 2 1 (cinematic_object_get "bansheebomb_01"))
    (sleep 6)
    (cinematic_scripting_start_effect 0 1 2 2 (cinematic_object_get "banshee02"))
    (object_set_function_variable (cinematic_scripting_get_object 0 1 2) "firing" 1.0 0.0)
    (sleep 1)
    (cinematic_scripting_start_effect 0 1 2 3 (cinematic_object_get "bansheebomb_02"))
    (sleep 14)
    (object_set_function_variable (cinematic_scripting_get_object 0 1 3) "firing" 1.0 0.0)
    (sleep 3)
    (cinematic_scripting_start_dialogue 0 1 2 1 (cinematic_scripting_get_object 0 1 11))
    (sleep 20)
    (cinematic_scripting_start_effect 0 1 2 4 (cinematic_object_get "bansheebomb_impact_01"))
    (cinematic_object_destroy "bansheebomb_01")
    (cinematic_print "custom script play")
    (sleep 13)
    (cinematic_print "custom script play")
    (cinematic_object_destroy "bansheebomb_02")
    (cinematic_scripting_start_effect 0 1 2 6 (cinematic_object_get "pelican"))
    (cinematic_scripting_start_effect 0 1 2 5 (cinematic_object_get "bansheebomb_impact_02"))
    (sleep 53)
    (begin
        (player_effect_set_max_rumble 0.2 0.2)
        (player_effect_start 1.0 0.0)
    )
    (cinematic_print "custom script play")
    (sleep 1)
    (player_effect_stop 1.5)
    (cinematic_print "custom script play")
    (sleep 16)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_int_sc_02_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 1) 3 "sc140_int_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 1) 3)
    (cinematic_object_create_cinematic_anchor "sc140_int_anch" "sc140_int_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 0 "romeo_02_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 1 "ar_sc140_int_sc_02_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 2 "banshee01_02_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 3 "banshee02_02_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 4 "pelican_02_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 5 "sniper_02_4" true)
    (object_hide (cinematic_scripting_get_object 0 1 6) true)
    (object_hide (cinematic_scripting_get_object 0 1 7) true)
    (object_hide (cinematic_scripting_get_object 0 1 8) true)
    (object_hide (cinematic_scripting_get_object 0 1 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 10 "buck_helmet_02_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 11 "buck_nohelmet_02_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 12 "light_marker02_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (object_set_function_variable (cinematic_scripting_get_object 0 1 2) "firing" 1.0 0.0)
    (sleep 1)
    (object_set_function_variable (cinematic_scripting_get_object 0 1 3) "firing" 0.0 0.0)
    (sleep 13)
    (cinematic_scripting_start_dialogue 0 1 3 0 none)
    (sleep 61)
    (object_clear_function_variable (cinematic_scripting_get_object 0 1 3) "firing")
    (sleep 20)
    (object_clear_function_variable (cinematic_scripting_get_object 0 1 2) "firing")
    (sleep 20)
    (object_set_function_variable (cinematic_scripting_get_object 0 1 3) "firing" 1.0 0.0)
    (sleep 20)
    (cinematic_scripting_start_dialogue 0 1 3 1 (cinematic_scripting_get_object 0 1 11))
    (sleep 1)
    (cinematic_scripting_start_effect 0 1 3 0 (cinematic_object_get "sniper"))
    (cinematic_scripting_start_effect 0 1 3 1 (cinematic_object_get "sniper"))
    (sleep 6)
    (cinematic_scripting_start_effect 0 1 3 2 (cinematic_object_get "assault_rifle"))
    (sleep 4)
    (cinematic_scripting_start_effect 0 1 3 3 (cinematic_object_get "assault_rifle"))
    (sleep 4)
    (cinematic_scripting_start_effect 0 1 3 4 (cinematic_object_get "assault_rifle"))
    (sleep 1)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_int_sc_02_sc_sh5
    (cinematic_show_letterbox_immediate true)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 1) 4 "sc140_int_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 1) 4)
    (cinematic_object_create_cinematic_anchor "sc140_int_anch" "sc140_int_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 0 "romeo_02_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 1 "ar_sc140_int_sc_02_5" true)
    (object_hide (cinematic_scripting_get_object 0 1 2) true)
    (object_hide (cinematic_scripting_get_object 0 1 3) true)
    (object_hide (cinematic_scripting_get_object 0 1 4) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 5 "sniper_02_5" true)
    (object_hide (cinematic_scripting_get_object 0 1 6) true)
    (object_hide (cinematic_scripting_get_object 0 1 7) true)
    (object_hide (cinematic_scripting_get_object 0 1 8) true)
    (object_hide (cinematic_scripting_get_object 0 1 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 10 "buck_helmet_02_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 11 "buck_nohelmet_02_5" true)
    (object_hide (cinematic_scripting_get_object 0 1 12) true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (object_set_function_variable (cinematic_scripting_get_object 0 1 10) "polarize" 0.0 0.0)
    (sleep 1)
    (cinematic_scripting_start_effect 0 1 4 2 (cinematic_object_get "assault_rifle"))
    (sleep 1)
    (cinematic_scripting_start_effect 0 1 4 0 (cinematic_object_get "sniper"))
    (sleep 3)
    (cinematic_scripting_start_effect 0 1 4 3 (cinematic_object_get "assault_rifle"))
    (sleep 4)
    (cinematic_scripting_start_effect 0 1 4 4 (cinematic_object_get "assault_rifle"))
    (sleep 4)
    (cinematic_scripting_start_effect 0 1 4 5 (cinematic_object_get "assault_rifle"))
    (sleep 4)
    (cinematic_scripting_start_effect 0 1 4 6 (cinematic_object_get "assault_rifle"))
    (sleep 6)
    (cinematic_scripting_start_effect 0 1 4 1 (cinematic_object_get "sniper"))
    (sleep 21)
    (cinematic_scripting_start_dialogue 0 1 4 0 (cinematic_scripting_get_object 0 1 11))
    (sleep 90)
    (object_set_function_variable (cinematic_scripting_get_object 0 1 10) "polarize" 1.0 30.0)
    (sleep 47)
    (cinematic_scripting_start_dialogue 0 1 4 1 (cinematic_scripting_get_object 0 1 11))
    (sleep 34)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_int_sc_02_sc_sh6
    (begin
        (cinematic_show_letterbox_immediate false)
        (fade_in 1.0 1.0 1.0 10)
        (cinematic_hud_on)
        (set render_near_clip_distance 0.04)
    )
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 1) 5 "sc140_int_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 1) 5)
    (cinematic_object_create_cinematic_anchor "sc140_int_anch" "sc140_int_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 0 "romeo_02_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 1 "ar_sc140_int_sc_02_6" true)
    (object_hide (cinematic_scripting_get_object 0 1 2) true)
    (object_hide (cinematic_scripting_get_object 0 1 3) true)
    (object_hide (cinematic_scripting_get_object 0 1 4) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 5 "sniper_02_6" true)
    (object_hide (cinematic_scripting_get_object 0 1 6) true)
    (object_hide (cinematic_scripting_get_object 0 1 7) true)
    (object_hide (cinematic_scripting_get_object 0 1 8) true)
    (object_hide (cinematic_scripting_get_object 0 1 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 10 "buck_helmet_02_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 11 "buck_nohelmet_02_6" true)
    (object_hide (cinematic_scripting_get_object 0 1 12) true)
    (cinematic_lights_initialize_for_shot 5)
    (cinematic_clips_initialize_for_shot 5)
    (object_set_function_variable (cinematic_scripting_get_object 0 1 10) "polarize" 1.0 0.0)
    (sleep 1)
    (cinematic_scripting_start_music 0 1 5 0)
    (sleep 87)
    (object_set_function_variable (cinematic_scripting_get_object 0 1 10) "polarize" 0.0 30.0)
    (sleep 45)
    (cinematic_scripting_start_dialogue 0 1 5 0 (cinematic_scripting_get_object 0 1 11))
    (sleep 140)
    (fade_out 1.0 1.0 1.0 0)
    (cinematic_print "custom script play")
    (sleep 1)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void !sc140_int_sc_02_sc
    (cinematic_print "beginning scene 2")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 1) 0)
    (sc140_int_sc_02_sc_sh1)
    (sc140_int_sc_02_sc_sh2)
    (sc140_int_sc_02_sc_sh3)
    (sc140_int_sc_02_sc_sh4)
    (sc140_int_sc_02_sc_sh5)
    (sc140_int_sc_02_sc_sh6)
    (cinematic_lights_destroy)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
    (cinematic_scripting_destroy_object 0 1 0)
    (cinematic_scripting_destroy_object 0 1 1)
    (cinematic_scripting_destroy_object 0 1 2)
    (cinematic_scripting_destroy_object 0 1 3)
    (cinematic_scripting_destroy_object 0 1 4)
    (cinematic_scripting_destroy_object 0 1 5)
    (cinematic_scripting_destroy_object 0 1 6)
    (cinematic_scripting_destroy_object 0 1 7)
    (cinematic_scripting_destroy_object 0 1 8)
    (cinematic_scripting_destroy_object 0 1 9)
    (cinematic_scripting_destroy_object 0 1 10)
    (cinematic_scripting_destroy_object 0 1 11)
    (cinematic_scripting_destroy_object 0 1 12)
)

(script static void sc140_int_sc_cleanup
    (cinematic_scripting_clean_up 0)
)

(script static void begin_sc140_int_sc_debug
    (cinematic_zone_activate_for_debugging 0)
    (sleep 2)
    (camera_control true)
    (cinematic_start)
    (set cinematic_letterbox_style 2)
    (cinematic_show_letterbox_immediate true)
    (chud_cinematic_fade 0.0 0.0)
    (camera_set_cinematic)
    (cinematic_set_debug_mode true)
    (cinematic_set (cinematic_tag_reference_get_cinematic 0))
)

(script static void end_sc140_int_sc_debug
    (cinematic_destroy)
    (chud_cinematic_fade 1.0 0.0)
    (cinematic_stop)
    (cinematic_show_letterbox_immediate false)
    (camera_control false)
    (render_exposure_fade_out 0.0)
    (cinematic_zone_deactivate 0)
    (fade_in 0.0 0.0 0.0 0)
)

(script static void sc140_int_sc_debug
    (begin_sc140_int_sc_debug)
    (fade_in 0.0 0.0 0.0 0)
    (begin
        (sound_class_set_gain "" 0.0 0)
        (sound_class_set_gain "scripted" 1.0 0)
        (sound_class_set_gain "dialog" 1.0 0)
        (sound_class_set_gain "mus" 1.0 0)
    )
    (!sc140_int_sc_01_sc)
    (!sc140_int_sc_02_sc)
    (sound_class_set_gain "" 1.0 60)
    (end_sc140_int_sc_debug)
)

(script static void begin_sc140_int_sc
    (cinematic_zone_activate 0)
    (sleep 2)
    (camera_set_cinematic)
    (cinematic_set_debug_mode false)
    (cinematic_set (cinematic_tag_reference_get_cinematic 0))
)

(script static void end_sc140_int_sc
    (cinematic_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_int_sc
    (begin_sc140_int_sc)
    (fade_in 0.0 0.0 0.0 0)
    (begin
        (sound_class_set_gain "" 0.0 0)
        (sound_class_set_gain "scripted" 1.0 0)
        (sound_class_set_gain "dialog" 1.0 0)
        (sound_class_set_gain "mus" 1.0 0)
    )
    (!sc140_int_sc_01_sc)
    (!sc140_int_sc_02_sc)
    (sound_class_set_gain "" 1.0 60)
    (end_sc140_int_sc)
)

(script static void sc140_out_sc_01_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 0) 0 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 0) 0)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 0 "buck_scene01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 1 "dutch_scene01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 2 "mickey_scene01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 3 "romeo_scene01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 4 "fodder_scene01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 5 "brute_scene01_1" true)
    (object_hide (cinematic_scripting_get_object 1 0 6) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 7 "br_scene01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 8 "hammer_scene01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 9 "sniper_scene01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 10 "sc140_chieftain_back_plate_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 11 "sc140_chieftain_helmet_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 12 "sc140_chieftain_left_shoulder_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 13 "sc140_chieftain_right_shoulder_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 14 "phantom_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 15 "buck_ar_01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 16 "splazer_01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 17 "shotgun_01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 18 "brute_land01_1" true)
    (object_hide (cinematic_scripting_get_object 1 0 19) true)
    (object_hide (cinematic_scripting_get_object 1 0 20) true)
    (object_hide (cinematic_scripting_get_object 1 0 21) true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (object_set_function_variable (cinematic_scripting_get_object 1 0 8) "hammer_on" 1.0 0.0)
    (sleep 1)
    (cinematic_scripting_start_music 1 0 0 0)
    (sleep 64)
    (cinematic_scripting_start_effect 1 0 0 3 (cinematic_object_get "mickey_shotgun"))
    (sleep 6)
    (cinematic_scripting_start_dialogue 1 0 0 0 none)
    (sleep 1)
    (cinematic_scripting_start_effect 1 0 0 0 (cinematic_object_get "fx_brute_land"))
    (sleep 27)
    (cinematic_scripting_start_effect 1 0 0 4 (cinematic_object_get "mickey_shotgun"))
    (sleep 3)
    (cinematic_scripting_start_effect 1 0 0 2 (cinematic_object_get "grp_hammer"))
    (cinematic_scripting_start_effect 1 0 0 1 (cinematic_object_get "fodder"))
    (sleep 30)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_01_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 0) 1 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 0) 1)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 0 "buck_scene01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 1 "dutch_scene01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 2 "mickey_scene01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 3 "romeo_scene01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 4 "fodder_scene01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 5 "brute_scene01_2" true)
    (object_hide (cinematic_scripting_get_object 1 0 6) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 7 "br_scene01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 8 "hammer_scene01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 9 "sniper_scene01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 10 "sc140_chieftain_back_plate_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 11 "sc140_chieftain_helmet_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 12 "sc140_chieftain_left_shoulder_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 13 "sc140_chieftain_right_shoulder_2" true)
    (object_hide (cinematic_scripting_get_object 1 0 14) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 15 "buck_ar_01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 16 "splazer_01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 17 "shotgun_01_2" true)
    (object_hide (cinematic_scripting_get_object 1 0 18) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 19 "hammer_hit01_2" true)
    (object_hide (cinematic_scripting_get_object 1 0 20) true)
    (object_hide (cinematic_scripting_get_object 1 0 21) true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (sleep 26)
    (cinematic_scripting_start_effect 1 0 1 0 (cinematic_object_get "grp_sniper_rifle"))
    (cinematic_scripting_start_effect 1 0 1 1 (cinematic_object_get "grp_sniper_rifle"))
    (sleep 8)
    (cinematic_scripting_start_effect 1 0 1 3 (cinematic_object_get "grp_hammer"))
    (cinematic_scripting_start_effect 1 0 1 2 (cinematic_object_get "grp_hammer"))
    (sleep 33)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_01_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 0) 2 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 0) 2)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 0 "buck_scene01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 1 "dutch_scene01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 2 "mickey_scene01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 3 "romeo_scene01_3" true)
    (object_hide (cinematic_scripting_get_object 1 0 4) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 5 "brute_scene01_3" true)
    (object_hide (cinematic_scripting_get_object 1 0 6) true)
    (object_hide (cinematic_scripting_get_object 1 0 7) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 8 "hammer_scene01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 9 "sniper_scene01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 10 "sc140_chieftain_back_plate_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 11 "sc140_chieftain_helmet_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 12 "sc140_chieftain_left_shoulder_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 13 "sc140_chieftain_right_shoulder_3" true)
    (object_hide (cinematic_scripting_get_object 1 0 14) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 15 "buck_ar_01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 16 "splazer_01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 17 "shotgun_01_3" true)
    (object_hide (cinematic_scripting_get_object 1 0 18) true)
    (object_hide (cinematic_scripting_get_object 1 0 19) true)
    (object_hide (cinematic_scripting_get_object 1 0 20) true)
    (object_hide (cinematic_scripting_get_object 1 0 21) true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (sleep 6)
    (cinematic_scripting_start_effect 1 0 2 5 (cinematic_object_get "buck_assaultrifle"))
    (sleep 1)
    (cinematic_scripting_start_effect 1 0 2 2 (cinematic_object_get "grp_brute"))
    (cinematic_scripting_start_effect 1 0 2 3 (cinematic_object_get "grp_sniper_rifle"))
    (cinematic_scripting_start_effect 1 0 2 4 (cinematic_object_get "grp_sniper_rifle"))
    (sleep 3)
    (cinematic_scripting_start_effect 1 0 2 6 (cinematic_object_get "buck_assaultrifle"))
    (sleep 4)
    (cinematic_scripting_start_effect 1 0 2 7 (cinematic_object_get "buck_assaultrifle"))
    (sleep 4)
    (cinematic_scripting_start_effect 1 0 2 8 (cinematic_object_get "buck_assaultrifle"))
    (sleep 4)
    (cinematic_scripting_start_effect 1 0 2 9 (cinematic_object_get "buck_assaultrifle"))
    (sleep 4)
    (cinematic_scripting_start_effect 1 0 2 10 (cinematic_object_get "buck_assaultrifle"))
    (sleep 4)
    (cinematic_scripting_start_effect 1 0 2 11 (cinematic_object_get "buck_assaultrifle"))
    (sleep 4)
    (cinematic_scripting_start_effect 1 0 2 12 (cinematic_object_get "buck_assaultrifle"))
    (sleep 4)
    (cinematic_scripting_start_effect 1 0 2 13 (cinematic_object_get "buck_assaultrifle"))
    (sleep 4)
    (cinematic_scripting_start_effect 1 0 2 14 (cinematic_object_get "buck_assaultrifle"))
    (sleep 7)
    (cinematic_scripting_start_effect 1 0 2 1 (cinematic_object_get "grp_hammer"))
    (cinematic_scripting_start_effect 1 0 2 0 (cinematic_object_get "grp_hammer"))
    (sleep 17)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_01_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 0) 3 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 0) 3)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (object_hide (cinematic_scripting_get_object 1 0 0) true)
    (object_hide (cinematic_scripting_get_object 1 0 1) true)
    (object_hide (cinematic_scripting_get_object 1 0 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 3 "romeo_scene01_4" true)
    (object_hide (cinematic_scripting_get_object 1 0 4) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 5 "brute_scene01_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 6 "sc140_out_01_4" true)
    (object_hide (cinematic_scripting_get_object 1 0 7) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 8 "hammer_scene01_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 9 "sniper_scene01_4" true)
    (object_hide (cinematic_scripting_get_object 1 0 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 11 "sc140_chieftain_helmet_4" true)
    (object_hide (cinematic_scripting_get_object 1 0 12) true)
    (object_hide (cinematic_scripting_get_object 1 0 13) true)
    (object_hide (cinematic_scripting_get_object 1 0 14) true)
    (object_hide (cinematic_scripting_get_object 1 0 15) true)
    (object_hide (cinematic_scripting_get_object 1 0 16) true)
    (object_hide (cinematic_scripting_get_object 1 0 17) true)
    (object_hide (cinematic_scripting_get_object 1 0 18) true)
    (object_hide (cinematic_scripting_get_object 1 0 19) true)
    (object_hide (cinematic_scripting_get_object 1 0 20) true)
    (object_hide (cinematic_scripting_get_object 1 0 21) true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (sleep 74)
    (cinematic_scripting_start_dialogue 1 0 3 0 none)
    (sleep 1)
    (cinematic_scripting_start_effect 1 0 3 0 (cinematic_object_get "grp_hammer"))
    (sleep 100)
    (cinematic_scripting_start_effect 1 0 3 1 (cinematic_object_get "grp_brute"))
    (sleep 21)
    (cinematic_scripting_start_music 1 0 3 0)
    (sleep 14)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_01_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 0) 4 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 0) 4)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (object_hide (cinematic_scripting_get_object 1 0 0) true)
    (object_hide (cinematic_scripting_get_object 1 0 1) true)
    (object_hide (cinematic_scripting_get_object 1 0 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 3 "romeo_scene01_5" true)
    (object_hide (cinematic_scripting_get_object 1 0 4) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 5 "brute_scene01_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 6 "sc140_out_01_5" true)
    (object_hide (cinematic_scripting_get_object 1 0 7) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 8 "hammer_scene01_5" true)
    (object_hide (cinematic_scripting_get_object 1 0 9) true)
    (object_hide (cinematic_scripting_get_object 1 0 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 11 "sc140_chieftain_helmet_5" true)
    (object_hide (cinematic_scripting_get_object 1 0 12) true)
    (object_hide (cinematic_scripting_get_object 1 0 13) true)
    (object_hide (cinematic_scripting_get_object 1 0 14) true)
    (object_hide (cinematic_scripting_get_object 1 0 15) true)
    (object_hide (cinematic_scripting_get_object 1 0 16) true)
    (object_hide (cinematic_scripting_get_object 1 0 17) true)
    (object_hide (cinematic_scripting_get_object 1 0 18) true)
    (object_hide (cinematic_scripting_get_object 1 0 19) true)
    (object_hide (cinematic_scripting_get_object 1 0 20) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 21 "light01_5" true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (sleep 57)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void !sc140_out_sc_01_sc
    (cinematic_print "beginning scene 1")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 0) 0)
    (sc140_out_sc_01_sc_sh1)
    (sc140_out_sc_01_sc_sh2)
    (sc140_out_sc_01_sc_sh3)
    (sc140_out_sc_01_sc_sh4)
    (sc140_out_sc_01_sc_sh5)
    (cinematic_lights_destroy)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
    (cinematic_scripting_destroy_object 1 0 0)
    (cinematic_scripting_destroy_object 1 0 1)
    (cinematic_scripting_destroy_object 1 0 2)
    (cinematic_scripting_destroy_object 1 0 3)
    (cinematic_scripting_destroy_object 1 0 4)
    (cinematic_scripting_destroy_object 1 0 5)
    (cinematic_scripting_destroy_object 1 0 6)
    (cinematic_scripting_destroy_object 1 0 7)
    (cinematic_scripting_destroy_object 1 0 8)
    (cinematic_scripting_destroy_object 1 0 9)
    (cinematic_scripting_destroy_object 1 0 10)
    (cinematic_scripting_destroy_object 1 0 11)
    (cinematic_scripting_destroy_object 1 0 12)
    (cinematic_scripting_destroy_object 1 0 13)
    (cinematic_scripting_destroy_object 1 0 14)
    (cinematic_scripting_destroy_object 1 0 15)
    (cinematic_scripting_destroy_object 1 0 16)
    (cinematic_scripting_destroy_object 1 0 17)
    (cinematic_scripting_destroy_object 1 0 18)
    (cinematic_scripting_destroy_object 1 0 19)
    (cinematic_scripting_destroy_object 1 0 20)
    (cinematic_scripting_destroy_object 1 0 21)
)

(script static void sc140_out_sc_02_sc_sh1
    (object_destroy "bridge")
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 0 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 0)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (object_hide (cinematic_scripting_get_object 1 1 0) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "brute_scene02_1" true)
    (object_hide (cinematic_scripting_get_object 1 1 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 3 "hammer_scene02_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "sc140_out_sc02_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_1" true)
    (object_hide (cinematic_scripting_get_object 1 1 9) true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "buck_scene02_1" true)
    (object_hide (cinematic_scripting_get_object 1 1 15) true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 3) "hammer_on" 1.0 0.0)
    (sleep 45)
    (cinematic_scripting_stop_music 1 1 0 0)
    (sleep 21)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 1 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 1)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (object_hide (cinematic_scripting_get_object 1 1 0) true)
    (object_hide (cinematic_scripting_get_object 1 1 1) true)
    (object_hide (cinematic_scripting_get_object 1 1 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 3 "hammer_scene02_2" true)
    (object_hide (cinematic_scripting_get_object 1 1 4) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "romeo_scene02_2" true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_2" true)
    (object_hide (cinematic_scripting_get_object 1 1 14) true)
    (object_hide (cinematic_scripting_get_object 1 1 15) true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (sleep 6)
    (cinematic_scripting_start_effect 1 1 1 0 (cinematic_object_get "grp_hammer"))
    (object_set_function_variable (cinematic_scripting_get_object 1 1 3) "hammer_on" 0.0 0.0)
    (sleep 24)
    (cinematic_scripting_start_dialogue 1 1 1 0 none)
    (sleep 6)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 2 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 2)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (object_hide (cinematic_scripting_get_object 1 1 0) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "brute_scene02_3" true)
    (object_hide (cinematic_scripting_get_object 1 1 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 3 "hammer_scene02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "sc140_out_sc02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "romeo_scene02_3" true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "buck_scene02_3" true)
    (object_hide (cinematic_scripting_get_object 1 1 15) true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (sleep 28)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 3 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 3)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (object_hide (cinematic_scripting_get_object 1 1 0) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "brute_scene02_4" true)
    (object_hide (cinematic_scripting_get_object 1 1 2) true)
    (object_hide (cinematic_scripting_get_object 1 1 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "sc140_out_sc02_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_4" true)
    (object_hide (cinematic_scripting_get_object 1 1 9) true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "buck_scene02_4" true)
    (object_hide (cinematic_scripting_get_object 1 1 15) true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (sleep 42)
    (cinematic_scripting_start_dialogue 1 1 3 0 none)
    (sleep 26)
    (cinematic_scripting_start_effect 1 1 3 0 (cinematic_object_get "buck_knife"))
    (sleep 2)
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "buck_knife") "blade" "bloody")
    (sleep 15)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 4 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 4)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (object_hide (cinematic_scripting_get_object 1 1 0) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "brute_scene02_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 2 "shotgun_scene02_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 3 "hammer_scene02_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "sc140_out_sc02_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "romeo_scene02_5" true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "buck_scene02_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "mickey_scene02_5" true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (sleep 15)
    (cinematic_scripting_start_effect 1 1 4 0 (cinematic_object_get "buck_knife"))
    (sleep 40)
    (cinematic_scripting_start_effect 1 1 4 1 (cinematic_object_get "buck_knife"))
    (sleep 30)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh6
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 5 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 5)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (object_hide (cinematic_scripting_get_object 1 1 0) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "brute_scene02_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 2 "shotgun_scene02_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 3 "hammer_scene02_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "sc140_out_sc02_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "romeo_scene02_6" true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "buck_scene02_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "mickey_scene02_6" true)
    (cinematic_lights_initialize_for_shot 5)
    (cinematic_clips_initialize_for_shot 5)
    (sleep 18)
    (cinematic_scripting_start_effect 1 1 5 0 (cinematic_object_get "buck_knife"))
    (sleep 18)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh7
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 6 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 6)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 0 "dutch_scene02_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "brute_scene02_7" true)
    (object_hide (cinematic_scripting_get_object 1 1 2) true)
    (object_hide (cinematic_scripting_get_object 1 1 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "sc140_out_sc02_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_7" true)
    (object_hide (cinematic_scripting_get_object 1 1 9) true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "buck_scene02_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "mickey_scene02_7" true)
    (cinematic_lights_initialize_for_shot 6)
    (cinematic_clips_initialize_for_shot 6)
    (sleep 16)
    (cinematic_scripting_start_effect 1 1 6 0 (cinematic_object_get "buck_knife"))
    (sleep 21)
    (cinematic_scripting_start_effect 1 1 6 1 (cinematic_object_get "buck_knife"))
    (sleep 30)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh8
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 7 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 7)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 0 "dutch_scene02_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "brute_scene02_8" true)
    (object_hide (cinematic_scripting_get_object 1 1 2) true)
    (object_hide (cinematic_scripting_get_object 1 1 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "sc140_out_sc02_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "romeo_scene02_8" true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "buck_scene02_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "mickey_scene02_8" true)
    (cinematic_lights_initialize_for_shot 7)
    (cinematic_clips_initialize_for_shot 7)
    (sleep 58)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh9
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 8 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 8)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 0 "dutch_scene02_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "brute_scene02_9" true)
    (object_hide (cinematic_scripting_get_object 1 1 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 3 "hammer_scene02_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "sc140_out_sc02_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "romeo_scene02_9" true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "buck_scene02_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "mickey_scene02_9" true)
    (cinematic_lights_initialize_for_shot 8)
    (cinematic_clips_initialize_for_shot 8)
    (sleep 83)
    (cinematic_scripting_start_dialogue 1 1 8 0 none)
    (sleep 120)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh10
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 9 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 9)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 0 "dutch_scene02_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "brute_scene02_10" true)
    (object_hide (cinematic_scripting_get_object 1 1 2) true)
    (object_hide (cinematic_scripting_get_object 1 1 3) true)
    (object_hide (cinematic_scripting_get_object 1 1 4) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_10" true)
    (object_hide (cinematic_scripting_get_object 1 1 9) true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_10" true)
    (object_hide (cinematic_scripting_get_object 1 1 14) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "mickey_scene02_10" true)
    (cinematic_lights_initialize_for_shot 9)
    (cinematic_clips_initialize_for_shot 9)
    (render_exposure 0.2 0.0)
    (sleep 46)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh11
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 10 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 10)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 0 "dutch_scene02_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "brute_scene02_11" true)
    (object_hide (cinematic_scripting_get_object 1 1 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 3 "hammer_scene02_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "sc140_out_sc02_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "romeo_scene02_11" true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "buck_scene02_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "mickey_scene02_11" true)
    (cinematic_lights_initialize_for_shot 10)
    (cinematic_clips_initialize_for_shot 10)
    (render_exposure 0.9 0.0)
    (sleep 159)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh12
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 11 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 11)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 0 "dutch_scene02_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "brute_scene02_12" true)
    (object_hide (cinematic_scripting_get_object 1 1 2) true)
    (object_hide (cinematic_scripting_get_object 1 1 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "sc140_out_sc02_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "romeo_scene02_12" true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "buck_scene02_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "mickey_scene02_12" true)
    (cinematic_lights_initialize_for_shot 11)
    (cinematic_clips_initialize_for_shot 11)
    (cinematic_scripting_start_effect 1 1 11 0 (cinematic_object_get "buck_knife"))
    (sleep 88)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh13
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 12 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 12)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 0 "dutch_scene02_13" true)
    (object_hide (cinematic_scripting_get_object 1 1 1) true)
    (object_hide (cinematic_scripting_get_object 1 1 2) true)
    (object_hide (cinematic_scripting_get_object 1 1 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "sc140_out_sc02_13" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_13" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_13" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_13" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_13" true)
    (object_hide (cinematic_scripting_get_object 1 1 9) true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_13" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_13" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_13" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "buck_scene02_13" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "mickey_scene02_13" true)
    (cinematic_lights_initialize_for_shot 12)
    (cinematic_clips_initialize_for_shot 12)
    (render_exposure 0.1 0.0)
    (sleep 15)
    (cinematic_scripting_start_effect 1 1 12 0 (cinematic_object_get "buck_knife"))
    (sleep 36)
    (cinematic_scripting_start_effect 1 1 12 1 (cinematic_object_get "buck_knife"))
    (sleep 42)
    (cinematic_scripting_start_dialogue 1 1 12 0 none)
    (sleep 30)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh14
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 13 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 13)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 0 "dutch_scene02_14" true)
    (object_hide (cinematic_scripting_get_object 1 1 1) true)
    (object_hide (cinematic_scripting_get_object 1 1 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 3 "hammer_scene02_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "sc140_out_sc02_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "romeo_scene02_14" true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "buck_scene02_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "mickey_scene02_14" true)
    (cinematic_lights_initialize_for_shot 13)
    (cinematic_clips_initialize_for_shot 13)
    (render_exposure 1.0 0.0)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 11) "polarize" 0.0 0.0)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 12) "polarize" 0.0 0.0)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 13) "polarize" 0.0 0.0)
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "buck_knife") "blade" "clean")
    (sleep 5)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 12) "polarize" 1.0 20.0)
    (sleep 35)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 11) "polarize" 1.0 25.0)
    (sleep 49)
    (cinematic_scripting_start_dialogue 1 1 13 0 (cinematic_scripting_get_object 1 1 14))
    (sleep 12)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 13) "polarize" 1.0 35.0)
    (sleep 14)
    (cinematic_scripting_start_dialogue 1 1 13 1 (cinematic_scripting_get_object 1 1 9))
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh15
    (set render_lightmap_shadows false)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 14 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 14)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (object_hide (cinematic_scripting_get_object 1 1 0) true)
    (object_hide (cinematic_scripting_get_object 1 1 1) true)
    (object_hide (cinematic_scripting_get_object 1 1 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 3 "hammer_scene02_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "sc140_out_sc02_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "romeo_scene02_15" true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "buck_scene02_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "mickey_scene02_15" true)
    (cinematic_lights_initialize_for_shot 14)
    (cinematic_clips_initialize_for_shot 14)
    (sleep 10)
    (if (= (game_difficulty_get) legendary) 
        (effect_new_on_object_marker "fx\cinematics\sc140_out\legendary_spurt" (cinematic_object_get "romeo_dented") ""))
    (cinematic_print "custom script play")
    (sleep 88)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh16
    (set render_lightmap_shadows true)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 15 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 15)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (object_hide (cinematic_scripting_get_object 1 1 0) true)
    (object_hide (cinematic_scripting_get_object 1 1 1) true)
    (object_hide (cinematic_scripting_get_object 1 1 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 3 "hammer_scene02_16" true)
    (object_hide (cinematic_scripting_get_object 1 1 4) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_16" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_16" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_16" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_16" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "romeo_scene02_16" true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_16" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_16" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_16" true)
    (object_hide (cinematic_scripting_get_object 1 1 14) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "mickey_scene02_16" true)
    (cinematic_lights_initialize_for_shot 15)
    (cinematic_clips_initialize_for_shot 15)
    (sleep 22)
    (cinematic_scripting_start_dialogue 1 1 15 0 (cinematic_scripting_get_object 1 1 15))
    (sleep 51)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh17
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 16 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 16)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 0 "dutch_scene02_17" true)
    (object_hide (cinematic_scripting_get_object 1 1 1) true)
    (object_hide (cinematic_scripting_get_object 1 1 2) true)
    (object_hide (cinematic_scripting_get_object 1 1 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "sc140_out_sc02_17" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_17" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_17" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_17" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_17" true)
    (object_hide (cinematic_scripting_get_object 1 1 9) true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_17" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_17" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_17" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "buck_scene02_17" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "mickey_scene02_17" true)
    (cinematic_lights_initialize_for_shot 16)
    (cinematic_clips_initialize_for_shot 16)
    (sleep 2)
    (cinematic_scripting_start_dialogue 1 1 16 0 (cinematic_scripting_get_object 1 1 0))
    (sleep 64)
    (cinematic_scripting_start_dialogue 1 1 16 1 (cinematic_scripting_get_object 1 1 14))
    (sleep 18)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh18
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 17 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 17)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (object_hide (cinematic_scripting_get_object 1 1 0) true)
    (object_hide (cinematic_scripting_get_object 1 1 1) true)
    (object_hide (cinematic_scripting_get_object 1 1 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 3 "hammer_scene02_18" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "sc140_out_sc02_18" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_18" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_18" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_18" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_18" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "romeo_scene02_18" true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_18" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_18" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_18" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "buck_scene02_18" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "mickey_scene02_18" true)
    (cinematic_lights_initialize_for_shot 17)
    (cinematic_clips_initialize_for_shot 17)
    (sleep 50)
    (cinematic_scripting_start_dialogue 1 1 17 0 none)
    (sleep 14)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh19
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 18 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 18)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 0 "dutch_scene02_19" true)
    (object_hide (cinematic_scripting_get_object 1 1 1) true)
    (object_hide (cinematic_scripting_get_object 1 1 2) true)
    (object_hide (cinematic_scripting_get_object 1 1 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "sc140_out_sc02_19" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_19" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_19" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_19" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_19" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "romeo_scene02_19" true)
    (object_hide (cinematic_scripting_get_object 1 1 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_19" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_19" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_19" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "buck_scene02_19" true)
    (object_hide (cinematic_scripting_get_object 1 1 15) true)
    (cinematic_lights_initialize_for_shot 18)
    (cinematic_clips_initialize_for_shot 18)
    (sleep 24)
    (cinematic_scripting_start_dialogue 1 1 18 0 (cinematic_scripting_get_object 1 1 14))
    (sleep 37)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc_02_sc_sh20
    (fade_in 1.0 1.0 1.0 10)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1 1) 19 "sc140_out_anch")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 19)
    (cinematic_object_create_cinematic_anchor "sc140_out_anch" "sc140_out_anch")
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 0 "dutch_scene02_20" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "brute_scene02_20" true)
    (object_hide (cinematic_scripting_get_object 1 1 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 3 "hammer_scene02_20" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "sc140_out_sc02_20" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sc140_out_sc02_chieftain_back_plate_20" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sc140_out_sc02_chieftain_helmet_20" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "sc140_out_sc02_chieftain_left_shoulder_20" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "sc140_out_sc02_chieftain_right_shoulder_20" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "romeo_scene02_20" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 10 "super_hud_02_20" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "buck_helmet02_20" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "mickey_helmet02_20" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "romeo_helmet02_20" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "buck_scene02_20" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "mickey_scene02_20" true)
    (cinematic_lights_initialize_for_shot 19)
    (cinematic_clips_initialize_for_shot 19)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "location" 0.9 0.0)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "timestamp" 0.4 0.0)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "status" 0.8 0.0)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "eyes" 0.0 0.0)
    (cinematic_scripting_start_screen_effect 1 1 19 0)
    (sleep 20)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "timestamp" 0.5 0.0)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "eyes" 0.7 0.0)
    (sleep 2)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "eyes" 0.1 0.0)
    (sleep 2)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "eyes" 0.7 0.0)
    (sleep 2)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "eyes" 0.0 0.0)
    (sleep 14)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "timestamp" 0.4 0.0)
    (sleep 4)
    (cinematic_scripting_start_screen_effect 1 1 19 1)
    (sleep 14)
    (cinematic_scripting_start_screen_effect 1 1 19 2)
    (sleep 2)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "timestamp" 0.5 0.0)
    (sleep 20)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "timestamp" 0.4 0.0)
    (sleep 8)
    (fade_out 0.0 0.0 0.0 60)
    (cinematic_print "custom script play")
    (sleep 2)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "eyes" 0.7 0.0)
    (sleep 2)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "eyes" 0.1 0.0)
    (sleep 2)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "eyes" 0.7 0.0)
    (sleep 2)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "eyes" 0.0 0.0)
    (sleep 4)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "timestamp" 0.5 0.0)
    (sleep 20)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "timestamp" 0.4 0.0)
    (sleep 20)
    (object_set_function_variable (cinematic_scripting_get_object 1 1 10) "timestamp" 0.5 0.0)
    (sleep 8)
    (cinematic_scripting_stop_screen_effect 1 1 19 0)
    (begin
        (sound_class_set_gain "" 0.0 70)
        (sleep 70)
    )
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void !sc140_out_sc_02_sc
    (cinematic_print "beginning scene 2")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1 1) 0)
    (sc140_out_sc_02_sc_sh1)
    (sc140_out_sc_02_sc_sh2)
    (sc140_out_sc_02_sc_sh3)
    (sc140_out_sc_02_sc_sh4)
    (sc140_out_sc_02_sc_sh5)
    (sc140_out_sc_02_sc_sh6)
    (sc140_out_sc_02_sc_sh7)
    (sc140_out_sc_02_sc_sh8)
    (sc140_out_sc_02_sc_sh9)
    (sc140_out_sc_02_sc_sh10)
    (sc140_out_sc_02_sc_sh11)
    (sc140_out_sc_02_sc_sh12)
    (sc140_out_sc_02_sc_sh13)
    (sc140_out_sc_02_sc_sh14)
    (sc140_out_sc_02_sc_sh15)
    (sc140_out_sc_02_sc_sh16)
    (sc140_out_sc_02_sc_sh17)
    (sc140_out_sc_02_sc_sh18)
    (sc140_out_sc_02_sc_sh19)
    (sc140_out_sc_02_sc_sh20)
    (cinematic_lights_destroy)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0.0)
    (cinematic_scripting_destroy_object 1 1 0)
    (cinematic_scripting_destroy_object 1 1 1)
    (cinematic_scripting_destroy_object 1 1 2)
    (cinematic_scripting_destroy_object 1 1 3)
    (cinematic_scripting_destroy_object 1 1 4)
    (cinematic_scripting_destroy_object 1 1 5)
    (cinematic_scripting_destroy_object 1 1 6)
    (cinematic_scripting_destroy_object 1 1 7)
    (cinematic_scripting_destroy_object 1 1 8)
    (cinematic_scripting_destroy_object 1 1 9)
    (cinematic_scripting_destroy_object 1 1 10)
    (cinematic_scripting_destroy_object 1 1 11)
    (cinematic_scripting_destroy_object 1 1 12)
    (cinematic_scripting_destroy_object 1 1 13)
    (cinematic_scripting_destroy_object 1 1 14)
    (cinematic_scripting_destroy_object 1 1 15)
)

(script static void sc140_out_sc_cleanup
    (cinematic_scripting_clean_up 1)
)

(script static void begin_sc140_out_sc_debug
    (cinematic_zone_activate_for_debugging 1)
    (sleep 2)
    (camera_control true)
    (cinematic_start)
    (set cinematic_letterbox_style 2)
    (cinematic_show_letterbox_immediate true)
    (chud_cinematic_fade 0.0 0.0)
    (camera_set_cinematic)
    (cinematic_set_debug_mode true)
    (cinematic_set (cinematic_tag_reference_get_cinematic 1))
)

(script static void end_sc140_out_sc_debug
    (cinematic_destroy)
    (chud_cinematic_fade 1.0 0.0)
    (cinematic_stop)
    (cinematic_show_letterbox_immediate false)
    (camera_control false)
    (render_exposure_fade_out 0.0)
    (cinematic_zone_deactivate 1)
    (fade_in 0.0 0.0 0.0 0)
)

(script static void sc140_out_sc_debug
    (begin_sc140_out_sc_debug)
    (fade_in 0.0 0.0 0.0 0)
    (begin
        (sound_class_set_gain "" 0.0 0)
        (sound_class_set_gain "amb" 1.0 0)
        (sound_class_set_gain "amb" 0.0 60)
        (sound_class_set_gain "scripted" 1.0 0)
        (sound_class_set_gain "dialog" 1.0 0)
        (sound_class_set_gain "mus" 1.0 0)
    )
    (!sc140_out_sc_01_sc)
    (!sc140_out_sc_02_sc)
    (sound_class_set_gain "" 0.0 0)
    (end_sc140_out_sc_debug)
)

(script static void begin_sc140_out_sc
    (cinematic_zone_activate 1)
    (sleep 2)
    (camera_set_cinematic)
    (cinematic_set_debug_mode false)
    (cinematic_set (cinematic_tag_reference_get_cinematic 1))
)

(script static void end_sc140_out_sc
    (cinematic_destroy)
    (render_exposure_fade_out 0.0)
)

(script static void sc140_out_sc
    (begin_sc140_out_sc)
    (fade_in 0.0 0.0 0.0 0)
    (begin
        (sound_class_set_gain "" 0.0 0)
        (sound_class_set_gain "amb" 1.0 0)
        (sound_class_set_gain "amb" 0.0 60)
        (sound_class_set_gain "scripted" 1.0 0)
        (sound_class_set_gain "dialog" 1.0 0)
        (sound_class_set_gain "mus" 1.0 0)
    )
    (!sc140_out_sc_01_sc)
    (!sc140_out_sc_02_sc)
    (sound_class_set_gain "" 0.0 0)
    (end_sc140_out_sc)
)

